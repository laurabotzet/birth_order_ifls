<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title></title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/paper.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 64px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 69px;
  margin-top: -69px;
}

.section h2 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h3 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h4 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h5 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h6 {
  padding-top: 69px;
  margin-top: -69px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("1_data_import.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>





<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Birth Order IFLS</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">

<li style="background-color: #66C2A5">
  <a href="index.html">Overview</a>
</li>
<li style="background-color: #FC8D62">
  <a href="1_data_import.html">Data Wrangling</a>
</li>
<li style="background-color: #8DA0CB">
  <a href="2_Inclusion.html">Data Sampling</a>
</li>
<li style="background-color: #E78AC3">
  <a href="3_sample_analyses.html">Sample Analyses</a>
</li>
<li style="background-color: #A6D854">
  <a href="4_analyses.html">Birth Order Effects</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/laurabotzet/birth_order_ifls">
    <span class="fa fa-github"></span>


  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>




</div>


<div id="data-wrangling" class="section level1 tabset">
<h1><span style="color:#FC8D62">Data Wrangling</span></h1>
<div id="helper" class="section level2">
<h2>Helper</h2>
<pre class="r"><code>source(&quot;0_helpers.R&quot;)</code></pre>
<pre><code>## Warning: package &#39;rmarkdown&#39; was built under R version 3.4.3</code></pre>
<pre><code>## Warning: package &#39;knitr&#39; was built under R version 3.4.3</code></pre>
<pre><code>## 
## Attaching package: &#39;formr&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:rmarkdown&#39;:
## 
##     word_document</code></pre>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:base&#39;:
## 
##     date</code></pre>
<pre><code>## Warning: package &#39;stringr&#39; was built under R version 3.4.3</code></pre>
<pre><code>## Loading required package: carData</code></pre>
<pre><code>## lattice theme set by effectsTheme()
## See ?effectsTheme for details.</code></pre>
<pre><code>## 
## Attaching package: &#39;data.table&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:lubridate&#39;:
## 
##     hour, isoweek, mday, minute, month, quarter, second, wday, week, yday, year</code></pre>
<pre><code>## The following objects are masked from &#39;package:formr&#39;:
## 
##     first, last</code></pre>
<pre><code>## Loading required package: Matrix</code></pre>
<pre><code>## 
## Attaching package: &#39;lmerTest&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:lme4&#39;:
## 
##     lmer</code></pre>
<pre><code>## The following object is masked from &#39;package:stats&#39;:
## 
##     step</code></pre>
<pre><code>## 
## Attaching package: &#39;cowplot&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:ggplot2&#39;:
## 
##     ggsave</code></pre>
<pre><code>## Warning: package &#39;haven&#39; was built under R version 3.4.3</code></pre>
<pre><code>## 
## Attaching package: &#39;psych&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:ggplot2&#39;:
## 
##     %+%, alpha</code></pre>
<pre><code>## This is lavaan 0.5-23.1097</code></pre>
<pre><code>## lavaan is BETA software! Please report any bugs.</code></pre>
<pre><code>## 
## Attaching package: &#39;lavaan&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:psych&#39;:
## 
##     cor2cov</code></pre>
<pre><code>## Loading required package: lattice</code></pre>
<pre><code>## Loading required package: survival</code></pre>
<pre><code>## Loading required package: Formula</code></pre>
<pre><code>## 
## Attaching package: &#39;Hmisc&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:psych&#39;:
## 
##     describe</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     format.pval, round.POSIXt, trunc.POSIXt, units</code></pre>
<pre><code>## Warning: package &#39;tidyr&#39; was built under R version 3.4.3</code></pre>
<pre><code>## 
## Attaching package: &#39;tidyr&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:Matrix&#39;:
## 
##     expand</code></pre>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:Hmisc&#39;:
## 
##     combine, src, summarize</code></pre>
<pre><code>## The following objects are masked from &#39;package:data.table&#39;:
## 
##     between, first, last</code></pre>
<pre><code>## The following objects are masked from &#39;package:lubridate&#39;:
## 
##     intersect, setdiff, union</code></pre>
<pre><code>## The following objects are masked from &#39;package:formr&#39;:
## 
##     first, last</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
</div>
<div id="import-data" class="section level2 active">
<h2>Import data</h2>
<p>All data is retrieved from the <a href="http://www.rand.org/labor/FLS/IFLS.html">RAND foundation</a></p>
<pre class="r"><code>### Informations about individuals living in the household in 2014/2015
## All Individuals living in the household
bk_ar1 = read_dta(&quot;data/hh14_all_dta/bk_ar1.dta&quot;) # Book K, Section ar
# compute father pidlink
bk_ar1 = left_join(bk_ar1, bk_ar1 %&gt;% select(hhid14_9, pid14, pidlink) %&gt;% rename(ar10 = pid14, father_pidlink = pidlink), by = c(&quot;hhid14_9&quot;, &quot;ar10&quot;))</code></pre>
<pre><code>## Warning: Column `ar10` has different attributes on LHS and RHS of join</code></pre>
<pre class="r"><code># compute mother pidlink
bk_ar1 = left_join(bk_ar1, bk_ar1 %&gt;% select(hhid14_9, pid14, pidlink) %&gt;% rename(ar11 = pid14, mother_pidlink = pidlink), by = c(&quot;hhid14_9&quot;, &quot;ar11&quot;))</code></pre>
<pre><code>## Warning: Column `ar11` has different attributes on LHS and RHS of join</code></pre>
<pre class="r"><code>### Informations from IFLS wave 5 to link data to earlier waves:
ptrack = read_dta(&quot;data/hh14_all_dta/ptrack.dta&quot;) # Tracking informations

### Pregnancy Informations from mother
## Wave 5 - 2014
w5_pregnancy = read_dta(&quot;data/hh14_all_dta/b4_ch1.dta&quot;) # Book 4, Section ch
## Wave 4 - 2007
w4_pregnancy = read_dta(&quot;data/hh07_all_dta/b4_ch1.dta&quot;) # Book 4, Section ch
## Wave 3 - 2000
w3_pregnancy = read_dta(&quot;data/hh00_all_dta/b4_ch1.dta&quot;) # Book 4, Section ch
## Wave 2 - 1997
w2_pregnancy = read_dta(&quot;data/hh97dta/b4_ch1.dta&quot;) # Book 4, Section ch
## Wave 1 - 1993
w1_pregnancy = read_dta(&quot;data/hh93dta/buk4ch1.dta&quot;) # Book 4, Section ch

### Marriage information from mother
## Wave 5 - 2014
w5_marriage= read_dta(&quot;data/hh14_all_dta/b4_kw3.dta&quot;) # Book 4, Section kw3
## Wave 4 - 2007
w4_marriage = read_dta(&quot;data/hh07_all_dta/b4_kw2.dta&quot;) # Book 4, Section kw2
## Wave 3 - 2000
w3_marriage = read_dta(&quot;data/hh00_all_dta/b4_kw3.dta&quot;) # Book 4, Section kw3
## Wave 2 - 1997
w2_marriage = read_dta(&quot;data/hh97dta/b4_kw2.dta&quot;) # Book 4, Section kw2
## Wave 1 - 1993
w1_marriage = read_dta(&quot;data/hh93dta/buk4kw2.dta&quot;) # Book 4, Section kw2

## Additional marriage information from mother
# Wave 5 - 2014
w5_marriage_additional = read_dta(&quot;data/hh14_all_dta/b4_cov.dta&quot;) # Book 4, Section cov
# Wave 4 - 2007
w4_marriage_additional = read_dta(&quot;data/hh07_all_dta/b4_cov.dta&quot;) # Book 4, Section cov
# Wave 3 - 2000
w3_marriage_additional = read_dta(&quot;data/hh00_all_dta/b4_cov.dta&quot;) # Book 4, Section cov
# Wave 2 - 1997
w2_marriage_additional = read_dta(&quot;data/hh97dta/b4_cov.dta&quot;) # Book 4, Section cov
# Wave 1 - 1993
w1_marriage_additional = read_dta(&quot;data/hh93dta/bukkar2.dta&quot;) # Book K, Section ar, household roaster

### IQ Information
ek_ek2 = read_dta(&quot;data/hh14_all_dta/ek_ek2.dta&quot;) # Book ek2: &gt;15 years
ek_ek1 = read_dta(&quot;data/hh14_all_dta/ek_ek1.dta&quot;) # Book ek1: &lt;15 years
# additional information (counting backwards, adaptive testing) for adults
b3b_cob = read_dta(&quot;data/hh14_all_dta/b3b_cob.dta&quot;) # Book 3b, Section cob
b3b_co1 = read_dta(&quot;data/hh14_all_dta/b3b_co1.dta&quot;) # Book 3b, Section co1
# additional information from earlier waves
bek_ek1 = read_dta(&quot;data/hh07_all_dta/bek_ek1.dta&quot;) # Intelligence information from wave 4 (2007): 7-14
bek_ek2 = read_dta(&quot;data/hh07_all_dta/bek_ek2.dta&quot;) # Intelligence info from wave 4 (2007): 15 - 24
bek00 = read_dta(&quot;data/hh00_all_dta/bek.dta&quot;) # Intelligence information from wave 3 (2000)
bek97 = read_dta(&quot;data/hh97dta/bek.dta&quot;) #Intelligence information from wave 2 (1997)


### Personality Information (only for adults)
b3b_psn = read_dta(&quot;data/hh14_all_dta/b3b_psn.dta&quot;) # Book 3b, Section psn

### Risk taking
b3a_si = read_dta(&quot;data/hh14_all_dta/b3a_si.dta&quot;) # Book 3a, Section si

### Educational Attainment
b3a_dl1 = read_dta(&quot;data/hh14_all_dta/b3a_dl1.dta&quot;) # Book 3a, Section dl1

### EBTANAS/UAN/UN Score
b3a_dl3 = read_dta(&quot;data/hh14_all_dta/b3a_dl3.dta&quot;) # Book 3a, Section dl3
b3a_dl4 = read_dta(&quot;data/hh14_all_dta/b3a_dl4.dta&quot;) # Book 3a, Section dl4

### Job Information
b3a_tk2 = read_dta(&quot;data/hh14_all_dta/b3a_tk2.dta&quot;) # Book 3a, Section tk2

### Smoking behavior
b3b_km = read_dta(&quot;data/hh14_all_dta/b3b_km.dta&quot;) # Book 3b, Section km</code></pre>
</div>
<div id="birth-order-information" class="section level2 tabset">
<h2>Birth order information</h2>
<div id="information-about-pregnancy" class="section level3">
<h3>Information about pregnancy</h3>
<pre class="r"><code>## Select data
w5_pregnancy = w5_pregnancy %&gt;% select(pidlink, ch05, ch06, ch06a, ch08, ch09day, ch09mth, ch09yr, ch25)
w4_pregnancy = w4_pregnancy %&gt;% select(pidlink, ch05, ch06, ch06a, ch08, ch09day, ch09mth, ch09yr, ch25)
w3_pregnancy = w3_pregnancy %&gt;% select(pidlink, ch05, ch06, ch06a, ch08, ch09day, ch09mth, ch09yr, ch25)
w2_pregnancy = w2_pregnancy %&gt;% select(pidlink, ch05, ch06, ch06a, ch08, ch09day, ch09mth, ch09yr, ch25)
w1_pregnancy = w1_pregnancy %&gt;% 
  group_by(pidlink, ch04) %&gt;% mutate(ch06a = if_else(!is.na(pidlink) &amp; !is.na(ch04), if_else( n() &gt; 1, 1, 3), 9)) %&gt;%
  ungroup() %&gt;% 
  select(pidlink, ch05, ch06, ch06a, ch08, ch09day, ch09mth, ch09yr, ch25) %&gt;% 
# In the first wave the year is named wrong
  mutate(ch09yr = ifelse(ch09yr &lt;= 93, ch09yr, NA),
          ch09yr = as.numeric(str_c(&quot;19&quot;, ch09yr)))

## Combine data
pregnancy = bind_rows(w1 = w1_pregnancy, w2 = w2_pregnancy, w3 = w3_pregnancy, w4 = w4_pregnancy, w5 = w5_pregnancy, .id = &quot;wave&quot;)</code></pre>
<pre><code>## Warning in bind_rows_(x, .id): Vectorizing &#39;labelled&#39; elements may not preserve their attributes

## Warning in bind_rows_(x, .id): Vectorizing &#39;labelled&#39; elements may not preserve their attributes

## Warning in bind_rows_(x, .id): Vectorizing &#39;labelled&#39; elements may not preserve their attributes

## Warning in bind_rows_(x, .id): Vectorizing &#39;labelled&#39; elements may not preserve their attributes

## Warning in bind_rows_(x, .id): Vectorizing &#39;labelled&#39; elements may not preserve their attributes

## Warning in bind_rows_(x, .id): Vectorizing &#39;labelled&#39; elements may not preserve their attributes</code></pre>
<pre class="r"><code>pregnancy = codebook::rescue_attributes(pregnancy, w5_pregnancy)

## Rename Variables
pregnancy = pregnancy %&gt;% rename(chron_order_birth = ch05, lifebirths = ch06, multiple_birth = ch06a, gender = ch08,
                                 birth_day = ch09day, birth_month = ch09mth, birth_year = ch09yr, 
                                 mother_pidlink = pidlink, alive = ch25) # pregnancy$lifebirths values: 1 = still pregnant, 2 = livebirth, 3 = still birth, 4 = misscarriage

## Set values as NA that are missing
pregnancy = pregnancy %&gt;%
  mutate(birth_day = ifelse(birth_day&gt;31, NA, birth_day),
         birth_month = ifelse(birth_month&gt;12, NA, birth_month),
         birth_year = ifelse(birth_year&gt;2016, NA, birth_year),
         birth_day = ifelse(is.nan(birth_day), NA, birth_day),
         birth_month = ifelse(is.nan(birth_month), NA, birth_month),
         birth_year = ifelse(is.nan(birth_year), NA, birth_year),
         multiple_birth = ifelse(multiple_birth == 9, NA, multiple_birth),
         multiple_birth = ifelse(is.nan(multiple_birth), NA, multiple_birth))

pregnancy$month = paste0(pregnancy$birth_year,&quot;-&quot;, ifelse(is.na(pregnancy$birth_month), &quot;01&quot;,
                                                          pad_month(pregnancy$birth_month)))

pregnancy = pregnancy %&gt;% 
  mutate(birthdate = all_available_info_birth_date(birth_year, birth_month, birth_day),
         mother_birthdate = str_c(mother_pidlink, &quot;-&quot;, birthdate),
         mother_birthorder = paste0(mother_pidlink , &quot;-&quot;, chron_order_birth))

pregnancy = pregnancy %&gt;% 
  mutate(wave = str_sub(wave, 2, 3) %&gt;% as.numeric()) %&gt;% # from most recent wave to oldest
  arrange(desc(wave)) %&gt;% # use most recent wave (because these will have pregnancy outcomes)
  group_by(mother_birthdate) %&gt;% 
  mutate(birthdate_duped_in_earlier_wave = min_rank(wave)) %&gt;% 
  group_by(mother_birthorder) %&gt;% 
  mutate(birthorder_duped_in_earlier_wave = min_rank(wave))
# these are pregnancy that changes status (i.e. ongoing in wave 2, miscarried/born by wave 3)
crosstabs(~ birthdate_duped_in_earlier_wave + birthorder_duped_in_earlier_wave + is.na(birthdate), pregnancy)</code></pre>
<table>
<colgroup>
<col width="32%" />
<col width="33%" />
<col width="18%" />
<col width="7%" />
<col width="7%" />
</colgroup>
<tbody>
<tr class="odd">
<td></td>
<td></td>
<td align="center">is.na(birthdate)</td>
<td align="center">FALSE</td>
<td align="center">TRUE</td>
</tr>
<tr class="even">
<td>birthdate_duped_in_earlier_wave</td>
<td>birthorder_duped_in_earlier_wave</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>1</td>
<td>1</td>
<td align="center"></td>
<td align="center">36830</td>
<td align="center">1339</td>
</tr>
<tr class="even">
<td></td>
<td>2</td>
<td align="center"></td>
<td align="center">9330</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>3</td>
<td align="center"></td>
<td align="center">2189</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>4</td>
<td align="center"></td>
<td align="center">444</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>5</td>
<td align="center"></td>
<td align="center">55</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td>2</td>
<td>1</td>
<td align="center"></td>
<td align="center">182</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>2</td>
<td align="center"></td>
<td align="center">2371</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>3</td>
<td align="center"></td>
<td align="center">807</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>4</td>
<td align="center"></td>
<td align="center">218</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>5</td>
<td align="center"></td>
<td align="center">42</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td>3</td>
<td>1</td>
<td align="center"></td>
<td align="center">3</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>2</td>
<td align="center"></td>
<td align="center">80</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>3</td>
<td align="center"></td>
<td align="center">191</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>4</td>
<td align="center"></td>
<td align="center">58</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>5</td>
<td align="center"></td>
<td align="center">16</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td>4</td>
<td>1</td>
<td align="center"></td>
<td align="center">1</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>2</td>
<td align="center"></td>
<td align="center">1</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>3</td>
<td align="center"></td>
<td align="center">5</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>4</td>
<td align="center"></td>
<td align="center">31</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>5</td>
<td align="center"></td>
<td align="center">5</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td>5</td>
<td>1</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>2</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>3</td>
<td align="center"></td>
<td align="center">2</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>4</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>5</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td>6</td>
<td>1</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>2</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>3</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>4</td>
<td align="center"></td>
<td align="center">1</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>5</td>
<td align="center"></td>
<td align="center">1</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td>7</td>
<td>1</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>2</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>3</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>4</td>
<td align="center"></td>
<td align="center">2</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>5</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td>1340</td>
<td>1</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">313</td>
</tr>
<tr class="odd">
<td></td>
<td>2</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">151</td>
</tr>
<tr class="even">
<td></td>
<td>3</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>4</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>5</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td>1804</td>
<td>1</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">442</td>
</tr>
<tr class="even">
<td></td>
<td>2</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">160</td>
</tr>
<tr class="odd">
<td></td>
<td>3</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">57</td>
</tr>
<tr class="even">
<td></td>
<td>4</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>5</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td>2463</td>
<td>1</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">590</td>
</tr>
<tr class="odd">
<td></td>
<td>2</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">56</td>
</tr>
<tr class="even">
<td></td>
<td>3</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">23</td>
</tr>
<tr class="odd">
<td></td>
<td>4</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">9</td>
</tr>
<tr class="even">
<td></td>
<td>5</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td>3141</td>
<td>1</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">727</td>
</tr>
<tr class="even">
<td></td>
<td>2</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">171</td>
</tr>
<tr class="odd">
<td></td>
<td>3</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">65</td>
</tr>
<tr class="even">
<td></td>
<td>4</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">42</td>
</tr>
<tr class="odd">
<td></td>
<td>5</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">10</td>
</tr>
</tbody>
</table>
<pre class="r"><code># unfortunately, sometimes chron_order_birth is inconsistent with birthdates
# to eliminate duplicates from the pregnancy file (because pregnancies changed statuses)
# now, for those where we don&#39;t know the birthdate, we keep only unique birth orders
# for those, where we know the birthdate, we keep only unique birthdates (as this is higher q information)
pregnancy = pregnancy %&gt;% 
  filter((is.na(birthdate) &amp;&amp; birthorder_duped_in_earlier_wave == 1) | birthdate_duped_in_earlier_wave == 1) %&gt;% 
  ungroup() # eliminate dupes across waves (same mother_birthdate), keep mult births
crosstabs(~ birthdate_duped_in_earlier_wave + birthorder_duped_in_earlier_wave + is.na(birthdate), pregnancy)</code></pre>
<table>
<colgroup>
<col width="32%" />
<col width="33%" />
<col width="18%" />
<col width="7%" />
<col width="7%" />
</colgroup>
<tbody>
<tr class="odd">
<td></td>
<td></td>
<td align="center">is.na(birthdate)</td>
<td align="center">FALSE</td>
<td align="center">TRUE</td>
</tr>
<tr class="even">
<td>birthdate_duped_in_earlier_wave</td>
<td>birthorder_duped_in_earlier_wave</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>1</td>
<td>1</td>
<td align="center"></td>
<td align="center">36830</td>
<td align="center">1339</td>
</tr>
<tr class="even">
<td></td>
<td>2</td>
<td align="center"></td>
<td align="center">9330</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>3</td>
<td align="center"></td>
<td align="center">2189</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>4</td>
<td align="center"></td>
<td align="center">444</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>5</td>
<td align="center"></td>
<td align="center">55</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td>1340</td>
<td>1</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">170</td>
</tr>
<tr class="odd">
<td></td>
<td>2</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>3</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>4</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>5</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td>1804</td>
<td>1</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">167</td>
</tr>
<tr class="even">
<td></td>
<td>2</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>3</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>4</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>5</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td>2463</td>
<td>1</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">252</td>
</tr>
<tr class="odd">
<td></td>
<td>2</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>3</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>4</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>5</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td>3141</td>
<td>1</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">727</td>
</tr>
<tr class="even">
<td></td>
<td>2</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>3</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>4</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>5</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<pre class="r"><code>x = (unique(pregnancy$mother_pidlink))

##remove all with missing birthdate/miscarriage date
table(is.na(pregnancy$birthdate))</code></pre>
<table style="width:22%;">
<colgroup>
<col width="11%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">FALSE</th>
<th align="center">TRUE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">48848</td>
<td align="center">2655</td>
</tr>
</tbody>
</table>
<pre class="r"><code># for whatever reason there are some multiple births with just one row in the data, but number are low enough
# that we consider some errors in the records the likely reason
pregnancy %&gt;% filter(!is.na(birthdate)) %&gt;% group_by(mother_birthdate)  %&gt;% 
  mutate(mult = n()) %&gt;% crosstabs(~ mult + multiple_birth + is.na(birth_month), data = .)</code></pre>
<table style="width:85%;">
<colgroup>
<col width="9%" />
<col width="23%" />
<col width="29%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<tbody>
<tr class="odd">
<td></td>
<td></td>
<td align="center">is.na(birth_month)</td>
<td align="center">FALSE</td>
<td align="center">TRUE</td>
</tr>
<tr class="even">
<td>mult</td>
<td>multiple_birth</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>1</td>
<td>1</td>
<td align="center"></td>
<td align="center">682</td>
<td align="center">34</td>
</tr>
<tr class="even">
<td></td>
<td>3</td>
<td align="center"></td>
<td align="center">37015</td>
<td align="center">5670</td>
</tr>
<tr class="odd">
<td></td>
<td>NA</td>
<td align="center"></td>
<td align="center">2613</td>
<td align="center">1974</td>
</tr>
<tr class="even">
<td>2</td>
<td>1</td>
<td align="center"></td>
<td align="center">493</td>
<td align="center">93</td>
</tr>
<tr class="odd">
<td></td>
<td>3</td>
<td align="center"></td>
<td align="center">28</td>
<td align="center">100</td>
</tr>
<tr class="even">
<td></td>
<td>NA</td>
<td align="center"></td>
<td align="center">13</td>
<td align="center">99</td>
</tr>
<tr class="odd">
<td>3</td>
<td>1</td>
<td align="center"></td>
<td align="center">8</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>3</td>
<td align="center"></td>
<td align="center">1</td>
<td align="center">4</td>
</tr>
<tr class="odd">
<td></td>
<td>NA</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">17</td>
</tr>
<tr class="even">
<td>4</td>
<td>1</td>
<td align="center"></td>
<td align="center">4</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td></td>
<td>3</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>NA</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<pre class="r"><code>## Form variable for any multiple birth in family
pregnancy = pregnancy %&gt;% group_by(mother_pidlink) %&gt;% mutate(any_multiple_birth = if_else(any(multiple_birth == 1), 1, 0))
prop.table(table(pregnancy$multiple_birth))</code></pre>
<table style="width:28%;">
<colgroup>
<col width="13%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">1</th>
<th align="center">3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0.02956</td>
<td align="center">0.9704</td>
</tr>
</tbody>
</table>
<pre class="r"><code>prop.table(table(pregnancy$any_multiple_birth))</code></pre>
<table style="width:22%;">
<colgroup>
<col width="11%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">0</th>
<th align="center">1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0.896</td>
<td align="center">0.104</td>
</tr>
</tbody>
</table>
</div>
<div id="information-about-marriage-history" class="section level3">
<h3>Information about marriage history</h3>
<pre class="r"><code>## Select marriage data
w5_marriage = w5_marriage %&gt;% select(pidlink, kw10mth, kw10yr, kw18mth, kw18yr, kw11, kw19)
w4_marriage = w4_marriage %&gt;% select(pidlink, kw10mth, kw10yr, kw18mth, kw18yr, kw11, kw19)
w3_marriage = w3_marriage %&gt;% select(pidlink, kw10mth, kw10yr, kw18mth, kw18yr, kw11, kw19)
w2_marriage = w2_marriage %&gt;% select(pidlink, kw10mth, kw10yr, kw18mth, kw18yr, kw11, kw19)
w1_marriage = w1_marriage %&gt;% select(pidlink, kw05a, kw05b, kw13a, kw13b, kw06, kw14age)
# In the first wave the year is named wrong
w1_marriage = w1_marriage %&gt;%
  mutate(kw05a = ifelse(kw05a &lt;= 93, as.numeric(str_c(&quot;19&quot;, w1_marriage$kw05a)), kw05a),
         kw13a = ifelse(kw13a &lt;=93 , as.numeric(str_c(&quot;19&quot;, w1_marriage$kw13a)), kw13a))
# And the column names are wrong...
w1_marriage = w1_marriage %&gt;% rename(kw10mth = kw05b, kw10yr = kw05a, kw18mth = kw13b, kw18yr = kw13a, kw11 = kw06, kw19 = kw14age)

## Select additional marriage information (age of respondent)
w5_marriage_additional = w5_marriage_additional %&gt;% select(pidlink, age, dob_yr)
w4_marriage_additional = w4_marriage_additional %&gt;% select(pidlink, age, dob_yr)
w3_marriage_additional = w3_marriage_additional %&gt;% select(pidlink, age, dob_yr)
w2_marriage_additional = w2_marriage_additional %&gt;% select(pidlink, age, dob_yr)
w1_marriage_additional = w1_marriage_additional %&gt;% select(pidlink, ar09yr, ar08yr)
# In the first wave the year is named wrong
w1_marriage_additional = w1_marriage_additional %&gt;%
  mutate(ar08yr = ifelse(ar08yr &lt;= 93, 
                         as.numeric(str_c(&quot;19&quot;, w1_marriage_additional$ar08yr)),
                         ar08yr))
# And the column names are wrong...
w1_marriage_additional = w1_marriage_additional %&gt;% rename(age = ar09yr, dob_yr = ar08yr)

## Combine marriage information and additional marriage information:
w1_marriage = left_join(w1_marriage, w1_marriage_additional, by = &quot;pidlink&quot;) %&gt;%
  mutate(wave = as.numeric(&quot;1993&quot;))
w2_marriage = left_join(w2_marriage, w2_marriage_additional, by = &quot;pidlink&quot;) %&gt;%
  mutate(wave = as.numeric(&quot;1997&quot;))
w3_marriage = left_join(w3_marriage, w3_marriage_additional, by = &quot;pidlink&quot;)  %&gt;%
  mutate(wave = as.numeric(&quot;2000&quot;))
w4_marriage = left_join(w4_marriage, w4_marriage_additional, by = &quot;pidlink&quot;) %&gt;%
  mutate(wave = as.numeric(&quot;2007&quot;))
w5_marriage = left_join(w5_marriage, w5_marriage_additional, by = &quot;pidlink&quot;) %&gt;%
  mutate(wave = as.numeric(&quot;2014&quot;))

## Combine marriage informations
marriage = bind_rows(w1_marriage, w2_marriage, w3_marriage, w4_marriage, w5_marriage)</code></pre>
<pre><code>## Warning in bind_rows_(x, .id): Vectorizing &#39;labelled&#39; elements may not preserve their attributes

## Warning in bind_rows_(x, .id): Vectorizing &#39;labelled&#39; elements may not preserve their attributes

## Warning in bind_rows_(x, .id): Vectorizing &#39;labelled&#39; elements may not preserve their attributes

## Warning in bind_rows_(x, .id): Vectorizing &#39;labelled&#39; elements may not preserve their attributes

## Warning in bind_rows_(x, .id): Vectorizing &#39;labelled&#39; elements may not preserve their attributes

## Warning in bind_rows_(x, .id): Vectorizing &#39;labelled&#39; elements may not preserve their attributes</code></pre>
<pre class="r"><code># Rename columns
marriage = marriage %&gt;% rename(start_year = kw10yr, start_month = kw10mth, end_year = kw18yr, end_month = kw18mth, start_age = kw11, end_age = kw19, birth_year = dob_yr, birth_age = age)


# Set values as NA that are missing
marriage$start_year[ marriage$start_year&lt;1900] = NA
marriage$start_year[ marriage$start_year&gt;2016] = NA
marriage$start_year[ is.nan(marriage$start_year)] = NA
marriage$end_year[ marriage$end_year&lt;1900] = NA
marriage$end_year[ marriage$end_year&gt;2016] = NA
marriage$end_year[ is.nan(marriage$end_year)] = NA
marriage$start_month [marriage$start_month&gt;12] = NA
marriage$start_month [is.nan(marriage$start_month)] = NA
marriage$end_month [marriage$end_month&gt;12] = NA
marriage$end_month [is.nan(marriage$end_month)] = NA
marriage$start_age [marriage$start_age &gt; 97] = NA
marriage$start_age [is.nan(marriage$start_age)] = NA
marriage$end_age [marriage$end_age &gt; 97] = NA
marriage$end_age [is.nan(marriage$end_age)] = NA
marriage$birth_year[ marriage$birth_year&lt;1900] = NA
marriage$birth_year[ marriage$birth_year&gt;2016] = NA
marriage$birth_year[ is.nan(marriage$birth_year)] = NA
marriage$birth_age [marriage$birth_age &gt; 97] = NA
marriage$birth_age [is.nan(marriage$birth_age)] = NA

## Reconstruct marriage start year and end year for marriages with missing year
marriage = marriage %&gt;%
  mutate(birth_year = ifelse(is.na(birth_year), wave - birth_age, birth_year),
         start_year = ifelse(is.na(start_year), birth_year + start_age, start_year),
         end_year = ifelse(is.na(end_year), birth_year + end_age, end_year))


marriage = marriage %&gt;% arrange(pidlink, start_year, start_month, start_age, end_year, end_month, end_age)

marriage = marriage %&gt;% filter(!duplicated(cbind(pidlink, start_year, start_month)) | is.na(start_year) | is.na(start_month)) # nobody gets married twice on the same day, right? so these are dupes.

## Calculate date for beginning of marriage:
marriage = marriage %&gt;% 
  ungroup() %&gt;%
  mutate(start_string = str_c(start_year, &quot;-&quot;, ifelse(is.na(start_month), &quot;01&quot;,
                                                      pad_month(start_month)), &quot;-01&quot;),
        end_string = str_c(end_year, &quot;-&quot;, ifelse(is.na(end_month), &quot;12&quot;, pad_month(end_month)), &quot;-01&quot;),
        start = ymd(start_string),
        end = ymd(end_string) + months(1) - days(1))

## Count number of marriages
marriage = marriage %&gt;%
  arrange(pidlink, start, end) %&gt;%
  group_by(pidlink) %&gt;%
  mutate(number_marriages = n(),
         order_marriage = row_number(),
         marriage_id = paste0(pidlink, &quot;_&quot;, as.character(order_marriage), &quot;_&quot;,
                              as.character(start), &quot;/&quot;,as.character(end)))

### Marriage Timeline
minimum_start = min(ymd(str_c(pregnancy$month, &quot;-01&quot;)), na.rm = T)</code></pre>
<pre><code>## Warning: 2655 failed to parse.</code></pre>
<pre class="r"><code>maximum_end = max(ymd(str_c(pregnancy$month, &quot;-01&quot;)), na.rm = T)</code></pre>
<pre><code>## Warning: 2655 failed to parse.</code></pre>
<pre class="r"><code>marriage_timeline = marriage %&gt;%
    mutate(implied_start = as.Date(ifelse(is.na(start), minimum_start , start),
                                   origin=&quot;1970-01-01&quot;),
           implied_end = as.Date(ifelse(is.na(end), maximum_end , end),
                                 origin=&quot;1970-01-01&quot;)) %&gt;%
  filter(implied_start &lt; implied_end)

marriage_timeline = marriage_timeline %&gt;%
    rowwise() %&gt;%
    do(data.frame(
        marriage_id=.$marriage_id, 
        mother_pidlink = .$pidlink,
        order_marriage = .$order_marriage,
        start = .$start,
        end = .$end,
        month = seq(.$implied_start,.$implied_end, by=&quot;1 month&quot;) ))

# no duplicate mother_id - month combinations (no two marriages at the same time)
marriage_timeline = marriage_timeline %&gt;% 
  arrange(mother_pidlink, start, end) %&gt;% 
  distinct(mother_pidlink, month, .keep_all = TRUE)

marriage_timeline$month = stringr::str_sub(as.character(marriage_timeline$month),1,7)

# we assume that fathers are those to whom mothers were married in the birth month
pregnancy = pregnancy %&gt;% left_join(marriage_timeline, by = c(&quot;mother_pidlink&quot;, &quot;month&quot;)) %&gt;% ungroup()</code></pre>
<pre><code>## Warning: Column `mother_pidlink` has different attributes on LHS and RHS of join</code></pre>
</div>
<div id="birth-order-calculations" class="section level3 tabset">
<h3>Birth order calculations</h3>
<pre class="r"><code>#### Maternal Pregnancy Order
pregnancy1 = pregnancy %&gt;%
  group_by(mother_pidlink) %&gt;%
  mutate(birthorder_uterus_preg = min_rank(birthdate),
         birthorder_uterus_preg2 = ifelse(is.na(birthorder_uterus_preg), chron_order_birth, 
                                          ifelse(chron_order_birth &gt; birthorder_uterus_preg, 
                                                  chron_order_birth, birthorder_uterus_preg)),
         # birthorder_uterus_preg = ifelse(any_multiple_birth == 1, NA, birthorder_uterus_preg),
         sibling_count_uterus_preg = sum(!is.na(birthdate)),
         sibling_count_uterus_preg2 = ifelse(is.na(sibling_count_uterus_preg), max(chron_order_birth, na.rm = T),
                                             ifelse(max(chron_order_birth, na.rm = T) &gt; sibling_count_uterus_preg,
                                                     max(chron_order_birth, na.rm = T), sibling_count_uterus_preg))
         # ,sibling_count_uterus_preg = ifelse(any_multiple_birth == 1, NA, sibling_count_uterus_preg)
         ) %&gt;%
  ungroup()</code></pre>
<pre><code>## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück

## Warning in max(chron_order_birth, na.rm = T): kein nicht-fehlendes Argument für max; gebe -Inf zurück</code></pre>
<pre class="r"><code>cor.test(pregnancy1$birthorder_uterus_preg, pregnancy1$birthorder_uterus_preg2)</code></pre>
<table style="width:94%;">
<caption>Pearson’s product-moment correlation: <code>pregnancy1$birthorder_uterus_preg</code> and <code>pregnancy1$birthorder_uterus_preg2</code></caption>
<colgroup>
<col width="23%" />
<col width="11%" />
<col width="13%" />
<col width="34%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Test statistic</th>
<th align="center">df</th>
<th align="center">P value</th>
<th align="center">Alternative hypothesis</th>
<th align="center">cor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1876</td>
<td align="center">48846</td>
<td align="center">0 * * *</td>
<td align="center">two.sided</td>
<td align="center">0.9931</td>
</tr>
</tbody>
</table>
<pre class="r"><code>cor.test(pregnancy1$sibling_count_uterus_preg, pregnancy1$sibling_count_uterus_preg)</code></pre>
<table style="width:90%;">
<caption>Pearson’s product-moment correlation: <code>pregnancy1$sibling_count_uterus_preg</code> and <code>pregnancy1$sibling_count_uterus_preg</code></caption>
<colgroup>
<col width="23%" />
<col width="11%" />
<col width="13%" />
<col width="34%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Test statistic</th>
<th align="center">df</th>
<th align="center">P value</th>
<th align="center">Alternative hypothesis</th>
<th align="center">cor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Inf</td>
<td align="center">51501</td>
<td align="center">0 * * *</td>
<td align="center">two.sided</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<pre class="r"><code>crosstabs(~ is.na(birthorder_uterus_preg) + is.na(birthorder_uterus_preg2) + is.na(birthdate), pregnancy1)</code></pre>
<table>
<colgroup>
<col width="32%" />
<col width="33%" />
<col width="19%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<tbody>
<tr class="odd">
<td></td>
<td></td>
<td align="center">is.na(birthdate)</td>
<td align="center">FALSE</td>
<td align="center">TRUE</td>
</tr>
<tr class="even">
<td>is.na(birthorder_uterus_preg)</td>
<td>is.na(birthorder_uterus_preg2)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>FALSE</td>
<td>FALSE</td>
<td align="center"></td>
<td align="center">48848</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td></td>
<td>TRUE</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td>TRUE</td>
<td>FALSE</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">2426</td>
</tr>
<tr class="even">
<td></td>
<td>TRUE</td>
<td align="center"></td>
<td align="center">0</td>
<td align="center">229</td>
</tr>
</tbody>
</table>
<pre class="r"><code>crosstabs(~ is.na(sibling_count_uterus_preg) + is.na(sibling_count_uterus_preg2) + is.na(birthdate), pregnancy1)</code></pre>
<table style="width:100%;">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="17%" />
<col width="7%" />
<col width="7%" />
</colgroup>
<tbody>
<tr class="odd">
<td></td>
<td></td>
<td align="center">is.na(birthdate)</td>
<td align="center">FALSE</td>
<td align="center">TRUE</td>
</tr>
<tr class="even">
<td>is.na(sibling_count_uterus_preg)</td>
<td>is.na(sibling_count_uterus_preg2)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>FALSE</td>
<td>FALSE</td>
<td align="center"></td>
<td align="center">48848</td>
<td align="center">2655</td>
</tr>
</tbody>
</table>
<pre class="r"><code># our birthdate based birthorder estimates are extremely consistent with chron_order_birth

#### Maternal Birth Order
pregnancy2 = pregnancy %&gt;%
  filter(lifebirths == 2) %&gt;%
  group_by(mother_pidlink) %&gt;%
    mutate(birthorder_uterus_alive = min_rank(birthdate),
           # birthorder_uterus_alive = ifelse(any_multiple_birth == 1, NA, birthorder_uterus_alive),
           sibling_count_uterus_alive = sum(!is.na(birthdate))
           # ,sibling_count_uterus_alive = ifelse(any_multiple_birth == 1, NA, sibling_count_uterus_alive)
           ) %&gt;%
  ungroup()

pregnancy2 = pregnancy2 %&gt;% select(mother_birthdate, birthorder_uterus_alive, sibling_count_uterus_alive) %&gt;% distinct()

#### Parental Full Sibling Birthorder
pregnancy3 = pregnancy %&gt;%
  filter(lifebirths == 2) %&gt;%
  group_by(marriage_id) %&gt;%
    mutate(birthorder_genes = min_rank(birthdate),
           birthorder_genes = ifelse(is.na(marriage_id), NA, birthorder_genes),
           sibling_count_genes = ifelse(is.na(marriage_id), NA, sum(!is.na(marriage_id)))) %&gt;%
  ungroup()

pregnancy3 = pregnancy3 %&gt;% select(mother_birthdate, birthorder_genes, sibling_count_genes) %&gt;% distinct()


# remove dupes because of missings and twins
pregnancy1 &lt;- pregnancy1 %&gt;% select(-birthorder_uterus_preg2, -sibling_count_uterus_preg2) %&gt;% 
  filter(!is.na(birthdate)) %&gt;% 
  distinct(mother_birthdate, .keep_all = TRUE)

pregnancy2 &lt;- pregnancy2 %&gt;%
  distinct(mother_birthdate, .keep_all = TRUE)

### Combine birthorder data
table(duplicated(pregnancy1$mother_birthdate))</code></pre>
<table style="width:10%;">
<colgroup>
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">FALSE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">48412</td>
</tr>
</tbody>
</table>
<pre class="r"><code>table(duplicated(pregnancy2$mother_birthdate))</code></pre>
<table style="width:10%;">
<colgroup>
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">FALSE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">43189</td>
</tr>
</tbody>
</table>
<pre class="r"><code>table(duplicated(pregnancy3$mother_birthdate))</code></pre>
<table style="width:10%;">
<colgroup>
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">FALSE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">43189</td>
</tr>
</tbody>
</table>
<pre class="r"><code>pregnancy = left_join(pregnancy1, pregnancy2, by=&quot;mother_birthdate&quot;) %&gt;% ungroup()
pregnancy = left_join(pregnancy, pregnancy3, by = &quot;mother_birthdate&quot;) %&gt;% ungroup()</code></pre>
</div>
<div id="birth-order-graphs" class="section level3">
<h3>Birth order graphs</h3>
<pre class="r"><code>### Graphs
## Biological Birthorder - Uterus_Pregnancies
ggplot(pregnancy, aes(x=sibling_count_uterus_preg, y=birthorder_uterus_preg)) + geom_jitter(alpha = 0.1)</code></pre>
<p><img src="1_data_import_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<pre class="r"><code>## Biological Birthorder - Uterus_Births
ggplot(pregnancy, aes(x=sibling_count_uterus_alive, y=birthorder_uterus_alive)) + geom_jitter(alpha = 0.1)</code></pre>
<pre><code>## Warning: Removed 5224 rows containing missing values (geom_point).</code></pre>
<p><img src="1_data_import_files/figure-html/unnamed-chunk-2-2.png" width="672" /></p>
<pre class="r"><code>## Biological Birthorder - Full Sibling Order
ggplot(pregnancy, aes(x=sibling_count_genes, y=birthorder_genes)) + geom_jitter(alpha = 0.1)</code></pre>
<pre><code>## Warning: Removed 5864 rows containing missing values (geom_point).</code></pre>
<p><img src="1_data_import_files/figure-html/unnamed-chunk-2-3.png" width="672" /></p>
<pre class="r"><code>## Bio: Uterus_preg vs. Uterus_Births
ggplot(pregnancy, aes(x=birthorder_uterus_preg, y=birthorder_uterus_alive)) + geom_jitter(alpha = 0.1)</code></pre>
<pre><code>## Warning: Removed 5224 rows containing missing values (geom_point).</code></pre>
<p><img src="1_data_import_files/figure-html/unnamed-chunk-2-4.png" width="672" /></p>
<pre class="r"><code># The birth_order_alive is always lower, which makes sense, becaus not live births (miscarriage, still births are excluded)

## Bio: Uterus_preg vs. Genes
ggplot(pregnancy, aes(x=birthorder_uterus_preg, y=birthorder_genes)) + geom_jitter(alpha = 0.1)</code></pre>
<pre><code>## Warning: Removed 5864 rows containing missing values (geom_point).</code></pre>
<p><img src="1_data_import_files/figure-html/unnamed-chunk-2-5.png" width="672" /></p>
<pre class="r"><code># The birthorder_genes is always lower, which makes sense, because different/unknown fathers are excluded

## Bio: Uterus_alive vs. Genes
ggplot(pregnancy, aes(x=birthorder_uterus_alive, y=birthorder_genes))  + geom_jitter(alpha = 0.1)</code></pre>
<pre><code>## Warning: Removed 5864 rows containing missing values (geom_point).</code></pre>
<p><img src="1_data_import_files/figure-html/unnamed-chunk-2-6.png" width="672" /></p>
<pre class="r"><code># children with the same father includes only live births

# chron order birth does not correlate perfectly, unsurprising given that we found chron orders sometimes started
# from 1 in new waves even though previous births were recorded
pregnancy %&gt;% select(chron_order_birth, birthorder_uterus_alive, birthorder_uterus_preg, birthorder_genes) %&gt;% na.omit() %&gt;% cor()</code></pre>
<table>
<colgroup>
<col width="22%" />
<col width="29%" />
<col width="28%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">chron_order_birth</th>
<th align="center">birthorder_uterus_alive</th>
<th align="center">birthorder_uterus_preg</th>
<th align="center">birthorder_genes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">0.7455</td>
<td align="center">0.7705</td>
<td align="center">0.7238</td>
</tr>
<tr class="even">
<td align="center">0.7455</td>
<td align="center">1</td>
<td align="center">0.9667</td>
<td align="center">0.9679</td>
</tr>
<tr class="odd">
<td align="center">0.7705</td>
<td align="center">0.9667</td>
<td align="center">1</td>
<td align="center">0.9359</td>
</tr>
<tr class="even">
<td align="center">0.7238</td>
<td align="center">0.9679</td>
<td align="center">0.9359</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<pre class="r"><code>pregnancy %&gt;% select(chron_order_birth, birthorder_uterus_alive, birthorder_uterus_preg, birthorder_genes) %&gt;% missingness_patterns()</code></pre>
<pre><code>##  index                     col missings
##      1        birthorder_genes     5864
##      2 birthorder_uterus_alive     5224</code></pre>
<table style="width:50%;">
<colgroup>
<col width="13%" />
<col width="11%" />
<col width="25%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Pattern</th>
<th align="center">Freq</th>
<th align="center">Culprit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">___</td>
<td align="center">42548</td>
<td align="center">_</td>
</tr>
<tr class="even">
<td align="center">1_2</td>
<td align="center">5224</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">1__</td>
<td align="center">640</td>
<td align="center">birthorder_genes</td>
</tr>
</tbody>
</table>
<pre class="r"><code>pregnancy %&gt;% select(sibling_count_uterus_alive, sibling_count_uterus_preg, sibling_count_genes) %&gt;% missingness_patterns()</code></pre>
<pre><code>##  index                        col missings
##      1        sibling_count_genes     5864
##      2 sibling_count_uterus_alive     5224</code></pre>
<table style="width:54%;">
<colgroup>
<col width="13%" />
<col width="11%" />
<col width="29%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Pattern</th>
<th align="center">Freq</th>
<th align="center">Culprit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">___</td>
<td align="center">42548</td>
<td align="center">_</td>
</tr>
<tr class="even">
<td align="center">1_2</td>
<td align="center">5224</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">1__</td>
<td align="center">640</td>
<td align="center">sibling_count_genes</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="select-individual-data-from-ifls-5" class="section level2">
<h2>Select individual data from IFLS 5</h2>
<pre class="r"><code>### Individuals
individuals = bk_ar1 %&gt;% select(hhid14_9, pidlink, father_pidlink, mother_pidlink, ar01a, ar02b, ar10, ar11, ar07, ar08day, ar08mth, ar08yr, ar09, ar18eyr, ar18emth)
#Rename variables to make it easier
individuals = rename(individuals, relation_to_HH_head = ar02b, fatherID = ar10, motherID = ar11, sex = ar07, age = ar09, status = ar01a, death_yr = ar18eyr, death_month = ar18emth) 
# Remove duplicats (some people are mentioned in two households, e.g. because they moved in the last 12 months)
individuals = individuals %&gt;% distinct(pidlink, .keep_all = TRUE)
individuals_unchanged = individuals

## people whose parents can not be identified have to be marked as NA:
individuals$fatherID[ individuals$fatherID&gt;50] = NA
individuals$motherID[ individuals$motherID&gt;50] = NA


## Create date of birth
#Set all variables missing that have not been reported:
individuals$ar08day[ individuals$ar08day&gt;31] = NA
individuals$ar08mth[ individuals$ar08mth&gt;12] = NA
individuals$ar08yr[ individuals$ar08yr&gt;2016] = NA
individuals$ar08day[ is.nan(individuals$ar08day) ] = NA
individuals$ar08mth[ is.nan(individuals$ar08mth) ] = NA
individuals$ar08yr[ is.nan(individuals$ar08yr)] = NA
individuals$death_month[ individuals$death_month&gt;12] = NA
individuals$death_yr[ individuals$death_yr&gt;2016] = NA
individuals$death_month[ is.nan(individuals$death_month) ] = NA
individuals$death_yr[ is.nan(individuals$death_yr)] = NA

## Create variable that contains pidlink of mother and birthdate of child:
individuals = individuals %&gt;%
    mutate(birthdate = all_available_info_birth_date(ar08yr, ar08mth, ar08day),
           mother_birthdate = str_c(mother_pidlink, &quot;-&quot;, birthdate)) # mother_pidlink-YYYY-MM; is NA if birth_year is missing

individuals = individuals %&gt;% group_by(mother_pidlink) %&gt;% 
  mutate(birthorder_naive_ind = if_else(!is.na(mother_pidlink), min_rank(birthdate), NA_integer_),
         sibling_count_naive_ind = if_else(!is.na(mother_pidlink), n(), NA_integer_)) %&gt;% 
  ungroup()

##Remove all with missing mother_birthdate
# individuals = individuals %&gt;%
#   filter(!is.na(mother_birthdate))

# 
# individuals = individuals %&gt;%
#   group_by(mother_birthdate) %&gt;%
#   mutate(twin_order = row_number(birthdate),
#          mother_birthdate_unique = paste0(mother_birthdate, &quot;-&quot;, twin_order)) %&gt;%
#   ungroup() %&gt;%
#   select(mother_birthdate_unique, pidlink, sex, age)
# 
# 
# pregnancy_missing = pregnancy %&gt;%
#   mutate(missing = ifelse(!(mother_birthdate_unique %in% individuals$mother_birthdate_unique),
#                           1, 0)) %&gt;%
#   filter(missing == 1)

# prevent that twins exist 4 times because they appear twice in pregnancy and twice in individuals, by eliminating dupes from pregnancy
# pregnancy_not_missing = pregnancy %&gt;%
#   mutate(missing = ifelse(!(mother_birthdate_unique %in% individuals$mother_birthdate_unique),
#                           1, 0)) %&gt;%
#   filter(missing == 0)          

alldata_pregnancy = full_join(pregnancy, individuals,
                              by = c(&quot;mother_pidlink&quot;, &quot;birthdate&quot;, &quot;mother_birthdate&quot;)) %&gt;% 
  distinct(mother_pidlink, birthdate, pidlink, .keep_all = TRUE)

alldata_pregnancy = alldata_pregnancy %&gt;% group_by(mother_pidlink) %&gt;% 
  mutate(birthorder_naive = min_rank(if_else(!is.na(mother_pidlink), birthdate, NA_character_)),
         sibling_count_naive = if_else(!is.na(mother_pidlink), n(), NA_integer_)) %&gt;% 
  # filter(is.na(lifebirths) | lifebirths == 2) %&gt;% 
  # mutate(birthorder_naive3 = if_else(!is.na(mother_pidlink) &amp; (is.na(lifebirths) | lifebirths == 2), min_rank(birthdate), NA_integer_),
  #        sibling_count_naive3 = if_else(!is.na(mother_pidlink) &amp; (is.na(lifebirths) | lifebirths == 2), sum(is.na(lifebirths) | lifebirths == 2), NA_integer_)) %&gt;% 
  ungroup()

# alldata_pregnancy = bind_rows(alldata_pregnancy, pregnancy_missing)

prop.table(table(alldata_pregnancy$multiple_birth))</code></pre>
<table style="width:24%;">
<colgroup>
<col width="13%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">1</th>
<th align="center">3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0.02601</td>
<td align="center">0.974</td>
</tr>
</tbody>
</table>
<pre class="r"><code>prop.table(table(alldata_pregnancy$any_multiple_birth))</code></pre>
<table style="width:24%;">
<colgroup>
<col width="11%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">0</th>
<th align="center">1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0.903</td>
<td align="center">0.09701</td>
</tr>
</tbody>
</table>
<pre class="r"><code>alldata_pregnancy %&gt;% select(birthorder_naive,birthorder_naive_ind,chron_order_birth, birthorder_uterus_alive, birthorder_uterus_preg, birthorder_genes) %&gt;% cor(use=&#39;pairwise.complete.obs&#39;) %&gt;% round(2)</code></pre>
<table>
<colgroup>
<col width="14%" />
<col width="17%" />
<col width="15%" />
<col width="19%" />
<col width="19%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">birthorder_naive</th>
<th align="center">birthorder_naive_ind</th>
<th align="center">chron_order_birth</th>
<th align="center">birthorder_uterus_alive</th>
<th align="center">birthorder_uterus_preg</th>
<th align="center">birthorder_genes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">0.82</td>
<td align="center">0.74</td>
<td align="center">0.93</td>
<td align="center">0.95</td>
<td align="center">0.9</td>
</tr>
<tr class="even">
<td align="center">0.82</td>
<td align="center">1</td>
<td align="center">0.56</td>
<td align="center">0.84</td>
<td align="center">0.79</td>
<td align="center">0.83</td>
</tr>
<tr class="odd">
<td align="center">0.74</td>
<td align="center">0.56</td>
<td align="center">1</td>
<td align="center">0.75</td>
<td align="center">0.75</td>
<td align="center">0.72</td>
</tr>
<tr class="even">
<td align="center">0.93</td>
<td align="center">0.84</td>
<td align="center">0.75</td>
<td align="center">1</td>
<td align="center">0.97</td>
<td align="center">0.97</td>
</tr>
<tr class="odd">
<td align="center">0.95</td>
<td align="center">0.79</td>
<td align="center">0.75</td>
<td align="center">0.97</td>
<td align="center">1</td>
<td align="center">0.94</td>
</tr>
<tr class="even">
<td align="center">0.9</td>
<td align="center">0.83</td>
<td align="center">0.72</td>
<td align="center">0.97</td>
<td align="center">0.94</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<pre class="r"><code>alldata_pregnancy %&gt;% select(birthorder_naive, chron_order_birth, birthorder_uterus_alive, birthorder_uterus_preg, birthorder_genes) %&gt;% codebook::md_pattern()</code></pre>
<table>
<colgroup>
<col width="16%" />
<col width="12%" />
<col width="12%" />
<col width="16%" />
<col width="16%" />
<col width="12%" />
<col width="7%" />
<col width="5%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">description</th>
<th align="center">birthorder_naive</th>
<th align="center">chron_order_birth</th>
<th align="center">birthorder_uterus_preg</th>
<th align="center">birthorder_uterus_alive</th>
<th align="center">birthorder_genes</th>
<th align="center">var_miss</th>
<th align="center">n_miss</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Missings per variable</td>
<td align="center">34215</td>
<td align="center">52695</td>
<td align="center">52695</td>
<td align="center">57919</td>
<td align="center">58559</td>
<td align="center">256083</td>
<td align="center">256083</td>
</tr>
<tr class="even">
<td align="center">Missings in 0 variables</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">42682</td>
</tr>
<tr class="odd">
<td align="center">Missings in 5 variables</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">5</td>
<td align="center">34215</td>
</tr>
<tr class="even">
<td align="center">Missings in 4 variables</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">4</td>
<td align="center">18480</td>
</tr>
<tr class="odd">
<td align="center">Missings in 2 variables</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">2</td>
<td align="center">5224</td>
</tr>
<tr class="even">
<td align="center">1 other, less frequent patterns</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">640</td>
</tr>
</tbody>
</table>
<pre class="r"><code>alldata_pregnancy %&gt;% select(sibling_count_naive, sibling_count_uterus_alive, sibling_count_uterus_preg, sibling_count_genes) %&gt;% cor(use=&#39;pairwise.complete.obs&#39;) %&gt;% round(2)</code></pre>
<table>
<colgroup>
<col width="22%" />
<col width="28%" />
<col width="28%" />
<col width="21%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">sibling_count_naive</th>
<th align="center">sibling_count_uterus_alive</th>
<th align="center">sibling_count_uterus_preg</th>
<th align="center">sibling_count_genes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">0.92</td>
<td align="center">0.93</td>
<td align="center">0.9</td>
</tr>
<tr class="even">
<td align="center">0.92</td>
<td align="center">1</td>
<td align="center">0.96</td>
<td align="center">0.97</td>
</tr>
<tr class="odd">
<td align="center">0.93</td>
<td align="center">0.96</td>
<td align="center">1</td>
<td align="center">0.93</td>
</tr>
<tr class="even">
<td align="center">0.9</td>
<td align="center">0.97</td>
<td align="center">0.93</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<pre class="r"><code>qplot(data=alldata_pregnancy,sibling_count_naive) + facet_wrap(~ is.na(sibling_count_uterus_preg))</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 34178 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="1_data_import_files/figure-html/select%20individual%20data-1.png" width="672" /></p>
<pre class="r"><code>qplot(data=alldata_pregnancy,birthorder_naive) + facet_wrap(~ is.na(sibling_count_uterus_preg))</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 34215 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="1_data_import_files/figure-html/select%20individual%20data-2.png" width="672" /></p>
<pre class="r"><code># prop.table(table(alldata_pregnancy$birthorder_uterus_alive == alldata_pregnancy$birthorder_naive3))
prop.table(table(alldata_pregnancy$birthorder_uterus_alive == alldata_pregnancy$birthorder_naive))</code></pre>
<table style="width:25%;">
<colgroup>
<col width="12%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">FALSE</th>
<th align="center">TRUE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0.3937</td>
<td align="center">0.6063</td>
</tr>
</tbody>
</table>
<pre class="r"><code>prop.table(table(alldata_pregnancy$birthorder_uterus_preg == alldata_pregnancy$birthorder_naive))</code></pre>
<table style="width:25%;">
<colgroup>
<col width="12%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">FALSE</th>
<th align="center">TRUE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0.3006</td>
<td align="center">0.6994</td>
</tr>
</tbody>
</table>
<pre class="r"><code>ggplot(alldata_pregnancy, aes(x=birthorder_uterus_alive, y=birthorder_naive)) + geom_jitter(alpha = 0.1)</code></pre>
<pre><code>## Warning: Removed 57919 rows containing missing values (geom_point).</code></pre>
<p><img src="1_data_import_files/figure-html/select%20individual%20data-3.png" width="672" /></p>
<pre class="r"><code># it makes sense that the birth order based on including the pregnancy file is strictly higher, because
# this includes people who moved away
ggplot(alldata_pregnancy, aes(x=birthorder_naive_ind, y=birthorder_naive)) + geom_jitter(alpha = 0.1)</code></pre>
<pre><code>## Warning: Removed 59776 rows containing missing values (geom_point).</code></pre>
<p><img src="1_data_import_files/figure-html/select%20individual%20data-4.png" width="672" /></p>
<pre class="r"><code>ggplot(alldata_pregnancy, aes(x=sibling_count_naive_ind, y=sibling_count_naive)) + geom_jitter(alpha = 0.1)</code></pre>
<pre><code>## Warning: Removed 59739 rows containing missing values (geom_point).</code></pre>
<p><img src="1_data_import_files/figure-html/select%20individual%20data-5.png" width="672" /></p>
<pre class="r"><code>alldata_pregnancy %&gt;% filter(birthorder_naive != birthorder_uterus_alive) %&gt;% select(birthorder_naive,birthorder_naive_ind, birthorder_uterus_alive, sibling_count_uterus_alive, mother_pidlink, birthdate, mother_birthdate) %&gt;% View()

# alldata_pregnancy %&gt;% filter(mother_pidlink == &quot;001060007&quot;) %&gt;% select(birthorder_naive,birthorder_naive_ind, birthorder_uterus_alive, sibling_count_naive, sibling_count_uterus_alive, mother_pidlink, birthdate, mother_birthdate) %&gt;% View()


cor.test(alldata_pregnancy$sibling_count_uterus_alive, alldata_pregnancy$sibling_count_naive)</code></pre>
<table style="width:94%;">
<caption>Pearson’s product-moment correlation: <code>alldata_pregnancy$sibling_count_uterus_alive</code> and <code>alldata_pregnancy$sibling_count_naive</code></caption>
<colgroup>
<col width="23%" />
<col width="11%" />
<col width="13%" />
<col width="34%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Test statistic</th>
<th align="center">df</th>
<th align="center">P value</th>
<th align="center">Alternative hypothesis</th>
<th align="center">cor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">503.6</td>
<td align="center">43320</td>
<td align="center">0 * * *</td>
<td align="center">two.sided</td>
<td align="center">0.9242</td>
</tr>
</tbody>
</table>
<pre class="r"><code>crosstabs(alldata_pregnancy$sibling_count_uterus_alive == alldata_pregnancy$sibling_count_naive_ind)</code></pre>
<table style="width:33%;">
<colgroup>
<col width="11%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">FALSE</th>
<th align="center">TRUE</th>
<th align="center">NA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">6276</td>
<td align="center">16702</td>
<td align="center">78263</td>
</tr>
</tbody>
</table>
<pre class="r"><code>crosstabs(alldata_pregnancy$sibling_count_uterus_alive == alldata_pregnancy$sibling_count_naive)</code></pre>
<table style="width:33%;">
<colgroup>
<col width="11%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">FALSE</th>
<th align="center">TRUE</th>
<th align="center">NA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">26009</td>
<td align="center">17313</td>
<td align="center">57919</td>
</tr>
</tbody>
</table>
<pre class="r"><code>crosstabs(~ I(sibling_count_uterus_alive == sibling_count_naive_ind) + 
            I(sibling_count_uterus_alive == sibling_count_naive), alldata_pregnancy)</code></pre>
<table style="width:33%;">
<colgroup>
<col width="11%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">FALSE</th>
<th align="center">TRUE</th>
<th align="center">NA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">4252</td>
<td align="center">2024</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">5428</td>
<td align="center">11274</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">16329</td>
<td align="center">4015</td>
<td align="center">57919</td>
</tr>
</tbody>
</table>
<pre class="r"><code>crosstabs(alldata_pregnancy$sibling_count_uterus_alive == alldata_pregnancy$sibling_count_naive)</code></pre>
<table style="width:33%;">
<colgroup>
<col width="11%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">FALSE</th>
<th align="center">TRUE</th>
<th align="center">NA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">26009</td>
<td align="center">17313</td>
<td align="center">57919</td>
</tr>
</tbody>
</table>
<pre class="r"><code>ggplot(alldata_pregnancy, aes(x=sibling_count_uterus_alive, y=sibling_count_naive)) + geom_jitter(alpha = 0.1)</code></pre>
<pre><code>## Warning: Removed 57919 rows containing missing values (geom_point).</code></pre>
<p><img src="1_data_import_files/figure-html/select%20individual%20data-6.png" width="672" /></p>
<pre class="r"><code>crosstabs( ~ I(sibling_count_uterus_alive == sibling_count_naive) + is.na(birthdate), data = alldata_pregnancy)</code></pre>
<table style="width:22%;">
<colgroup>
<col width="11%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">FALSE</th>
<th align="center">TRUE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">26009</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">17313</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">51266</td>
<td align="center">6653</td>
</tr>
</tbody>
</table>
</div>
<div id="intelligence" class="section level2 tabset">
<h2>Intelligence</h2>
<pre class="r"><code>### IQ Informations from wave 5 (2014)
##ek2 (&gt;14yrs, includes only individuals, that are 15 years or older)
iq2.1 = ek_ek2 %&gt;% select(hhid14_9, pidlink, age, sex, ektype, resptype, result, reason, ek1_ans, ek2_ans, ek3_ans, ek4_ans, ek5_ans, ek6_ans, ek7_ans, ek8_ans, ek9_ans, ek10_ans, ek11_ans, ek12_ans, ek13_ans, ek14_ans, ek15_ans, ek16_ans, ek17_ans, ek18_ans, ek19_ans, ek20_ans, ek21_ans, ek22_ans)

##ek2 (&lt;14yrs, includes all individuals, that are younger than 15 years old)
iq3.1 = ek_ek1 %&gt;% select(hhid14_9, pidlink, age, sex, ektype, resptype, result, reason, ek1_ans, ek2_ans, ek3_ans, ek4_ans, ek5_ans, ek6_ans, ek7_ans, ek8_ans, ek9_ans, ek10_ans, ek11_ans, ek12_ans, ek13_ans, ek14_ans, ek15_ans, ek16_ans, ek17_ans, ek18_ans, ek19_ans, ek20_ans, ek21_ans, ek22_ans)

#### Raven Test (wave 2015, younger than 15 years)
answered_raven_items = iq3.1 %&gt;% select(ek1_ans:ek12_ans)
psych::alpha(data.frame(answered_raven_items))</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(answered_raven_items))
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean   sd
##       0.87      0.87    0.88      0.36 6.9 0.0016 0.68 0.28
## 
##  lower alpha upper     95% confidence boundaries
## 0.87 0.87 0.87 
## 
##  Reliability if an item is dropped:
##          raw_alpha std.alpha G6(smc) average_r S/N alpha se
## ek1_ans       0.86      0.86    0.87      0.36 6.2   0.0017
## ek2_ans       0.86      0.86    0.87      0.36 6.1   0.0018
## ek3_ans       0.85      0.86    0.87      0.36 6.1   0.0018
## ek4_ans       0.86      0.86    0.87      0.36 6.2   0.0018
## ek5_ans       0.86      0.87    0.88      0.38 6.6   0.0016
## ek6_ans       0.87      0.88    0.88      0.39 7.1   0.0015
## ek7_ans       0.86      0.86    0.87      0.36 6.1   0.0017
## ek8_ans       0.85      0.86    0.86      0.35 6.0   0.0018
## ek9_ans       0.85      0.86    0.86      0.35 6.0   0.0018
## ek10_ans      0.86      0.86    0.87      0.36 6.2   0.0018
## ek11_ans      0.85      0.86    0.87      0.36 6.1   0.0018
## ek12_ans      0.87      0.88    0.89      0.40 7.3   0.0015
## 
##  Item statistics 
##              n raw.r std.r r.cor r.drop mean   sd
## ek1_ans  14943  0.66  0.68  0.64   0.60 0.87 0.33
## ek2_ans  14943  0.69  0.69  0.67   0.62 0.77 0.42
## ek3_ans  14943  0.71  0.70  0.67   0.63 0.70 0.46
## ek4_ans  14943  0.69  0.68  0.65   0.61 0.69 0.46
## ek5_ans  14943  0.59  0.57  0.51   0.48 0.61 0.49
## ek6_ans  14943  0.48  0.46  0.38   0.36 0.37 0.48
## ek7_ans  14943  0.68  0.69  0.67   0.60 0.78 0.42
## ek8_ans  14943  0.71  0.72  0.71   0.64 0.81 0.39
## ek9_ans  14943  0.73  0.74  0.73   0.67 0.79 0.41
## ek10_ans 14943  0.69  0.69  0.65   0.61 0.72 0.45
## ek11_ans 14943  0.70  0.71  0.68   0.63 0.77 0.42
## ek12_ans 14943  0.41  0.41  0.31   0.29 0.24 0.43
## 
## Non missing response frequency for each item
##             0    1 miss
## ek1_ans  0.13 0.87    0
## ek2_ans  0.23 0.77    0
## ek3_ans  0.30 0.70    0
## ek4_ans  0.31 0.69    0
## ek5_ans  0.39 0.61    0
## ek6_ans  0.63 0.37    0
## ek7_ans  0.22 0.78    0
## ek8_ans  0.19 0.81    0
## ek9_ans  0.21 0.79    0
## ek10_ans 0.28 0.72    0
## ek11_ans 0.23 0.77    0
## ek12_ans 0.76 0.24    0</code></pre>
<pre class="r"><code>iq3.1$raven_2015_young = rowMeans( answered_raven_items, na.rm = T)
qplot(iq3.1$raven_2015_young)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="1_data_import_files/figure-html/select%20IQ%20data-1.png" width="672" /></p>
<pre class="r"><code>#### Math Test (wave 2015, younger than 15 years)
answered_math_items = iq3.1 %&gt;% select(ek13_ans:ek17_ans)
psych::alpha(data.frame(answered_math_items))</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(answered_math_items))
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean   sd
##       0.62      0.62    0.59      0.24 1.6 0.0049 0.53 0.29
## 
##  lower alpha upper     95% confidence boundaries
## 0.61 0.62 0.63 
## 
##  Reliability if an item is dropped:
##          raw_alpha std.alpha G6(smc) average_r S/N alpha se
## ek13_ans      0.54      0.54    0.49      0.23 1.2   0.0061
## ek14_ans      0.51      0.51    0.46      0.21 1.1   0.0065
## ek15_ans      0.52      0.52    0.47      0.21 1.1   0.0064
## ek16_ans      0.61      0.61    0.56      0.28 1.6   0.0051
## ek17_ans      0.62      0.62    0.57      0.29 1.7   0.0050
## 
##  Item statistics 
##              n raw.r std.r r.cor r.drop mean   sd
## ek13_ans 14943  0.65  0.66  0.54   0.42 0.76 0.43
## ek14_ans 14943  0.70  0.70  0.61   0.47 0.66 0.47
## ek15_ans 14943  0.70  0.69  0.59   0.46 0.64 0.48
## ek16_ans 14943  0.57  0.56  0.36   0.28 0.34 0.47
## ek17_ans 14943  0.52  0.54  0.32   0.25 0.25 0.43
## 
## Non missing response frequency for each item
##             0    1 miss
## ek13_ans 0.24 0.76    0
## ek14_ans 0.34 0.66    0
## ek15_ans 0.36 0.64    0
## ek16_ans 0.66 0.34    0
## ek17_ans 0.75 0.25    0</code></pre>
<pre class="r"><code>iq3.1$math_2015_young = rowMeans( answered_math_items, na.rm = T)
qplot(iq3.1$math_2015_young)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="1_data_import_files/figure-html/select%20IQ%20data-2.png" width="672" /></p>
<pre class="r"><code>iq3.1 = iq3.1 %&gt;% select(pidlink, age_2015_young = age, sex_2015_young = sex,
                         raven_2015_young, math_2015_young)

##additional informations for adults: counting backwards
iq2.2 = b3b_co1 %&gt;% select(hhid14_9, pidlink, co04a, co04b, co04c, co04d, co04e, co07count, co10count)
##additional informations for adults: adaptive number test
iq2.3 = b3b_cob %&gt;% select(hhid14_9, pidlink, w_abil, cob18, cob19b)

## put all the informations for participants &gt;= 15 together
iq2 = full_join(iq2.1, iq2.2, by = &quot;pidlink&quot;)
iq2 = full_join(iq2, iq2.3, by = &quot;pidlink&quot;)
iq = iq2
iq = full_join(iq, iq3.1, by = &quot;pidlink&quot;)

### calculate iq scores
##Raven Test (wave 2015, older than 14 years)
answered_raven_items = iq %&gt;% select(ek1_ans:ek6_ans, ek11_ans, ek12_ans)
psych::alpha(data.frame(answered_raven_items))</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(answered_raven_items))
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean   sd
##       0.85      0.85    0.84      0.41 5.5 0.0011 0.53 0.33
## 
##  lower alpha upper     95% confidence boundaries
## 0.85 0.85 0.85 
## 
##  Reliability if an item is dropped:
##          raw_alpha std.alpha G6(smc) average_r S/N alpha se
## ek1_ans       0.82      0.82    0.81      0.39 4.5   0.0013
## ek2_ans       0.81      0.81    0.80      0.38 4.3   0.0013
## ek3_ans       0.81      0.81    0.80      0.38 4.3   0.0013
## ek4_ans       0.82      0.81    0.81      0.38 4.4   0.0013
## ek5_ans       0.83      0.83    0.83      0.41 4.9   0.0012
## ek6_ans       0.85      0.85    0.84      0.44 5.6   0.0011
## ek11_ans      0.83      0.82    0.82      0.40 4.6   0.0012
## ek12_ans      0.86      0.86    0.85      0.46 5.9   0.0010
## 
##  Item statistics 
##              n raw.r std.r r.cor r.drop mean   sd
## ek1_ans  36380  0.74  0.74  0.71   0.65 0.74 0.44
## ek2_ans  36380  0.80  0.80  0.79   0.72 0.67 0.47
## ek3_ans  36380  0.79  0.79  0.77   0.71 0.58 0.49
## ek4_ans  36380  0.78  0.77  0.74   0.69 0.59 0.49
## ek5_ans  36380  0.68  0.68  0.60   0.56 0.50 0.50
## ek6_ans  36380  0.54  0.55  0.44   0.40 0.28 0.45
## ek11_ans 36380  0.73  0.72  0.67   0.62 0.61 0.49
## ek12_ans 36380  0.47  0.49  0.36   0.34 0.22 0.42
## 
## Non missing response frequency for each item
##             0    1 miss
## ek1_ans  0.26 0.74 0.18
## ek2_ans  0.33 0.67 0.18
## ek3_ans  0.42 0.58 0.18
## ek4_ans  0.41 0.59 0.18
## ek5_ans  0.50 0.50 0.18
## ek6_ans  0.72 0.28 0.18
## ek11_ans 0.39 0.61 0.18
## ek12_ans 0.78 0.22 0.18</code></pre>
<pre class="r"><code>iq$raven_2015_old = rowMeans( answered_raven_items, na.rm = T)
iq$raven_2015_old[! iq$result %in% 1:2] = NA
qplot(iq$raven_2015_old)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 13212 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="1_data_import_files/figure-html/select%20IQ%20data-3.png" width="672" /></p>
<pre class="r"><code>##Math Test (wave 2015, older than 14 years)
answered_math_items = iq %&gt;% select(ek18_ans:ek22_ans)
psych::alpha(data.frame(answered_math_items))</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(answered_math_items))
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean   sd
##       0.68      0.68    0.64       0.3 2.1 0.0023 0.26 0.29
## 
##  lower alpha upper     95% confidence boundaries
## 0.68 0.68 0.69 
## 
##  Reliability if an item is dropped:
##          raw_alpha std.alpha G6(smc) average_r S/N alpha se
## ek18_ans      0.68      0.67    0.61      0.34 2.1   0.0025
## ek19_ans      0.60      0.60    0.54      0.28 1.5   0.0030
## ek20_ans      0.60      0.60    0.53      0.27 1.5   0.0031
## ek21_ans      0.66      0.65    0.60      0.32 1.9   0.0027
## ek22_ans      0.63      0.62    0.56      0.29 1.7   0.0029
## 
##  Item statistics 
##              n raw.r std.r r.cor r.drop mean   sd
## ek18_ans 36380  0.59  0.59  0.41   0.34 0.25 0.43
## ek19_ans 36380  0.71  0.71  0.61   0.50 0.28 0.45
## ek20_ans 36380  0.73  0.72  0.63   0.51 0.34 0.47
## ek21_ans 36380  0.60  0.63  0.46   0.38 0.18 0.38
## ek22_ans 36380  0.68  0.68  0.55   0.46 0.28 0.45
## 
## Non missing response frequency for each item
##             0    1 miss
## ek18_ans 0.75 0.25 0.18
## ek19_ans 0.72 0.28 0.18
## ek20_ans 0.66 0.34 0.18
## ek21_ans 0.82 0.18 0.18
## ek22_ans 0.72 0.28 0.18</code></pre>
<pre class="r"><code>iq$math_2015_old = rowMeans( answered_math_items, na.rm = T)
iq$math_2015_old[! iq$result %in% 1:2] = NA
qplot(iq$math_2015_old)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 13212 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="1_data_import_files/figure-html/select%20IQ%20data-4.png" width="672" /></p>
<pre class="r"><code>##Counting Items
# Create Right/Wrong Scores for the counting items
iq$co04aright = as.numeric(iq$co04a == 93)
iq$co04bright = as.numeric(iq$co04b == iq$co04a-7)
iq$co04cright = as.numeric(iq$co04c == iq$co04b-7)
iq$co04dright = as.numeric(iq$co04d == iq$co04c-7)
iq$co04eright = as.numeric(iq$co04e == iq$co04d-7)

answered_counting_items = iq %&gt;% select(co04aright:co04eright)
psych::alpha(data.frame(answered_counting_items))</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(answered_counting_items))
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean   sd
##       0.69      0.68    0.64      0.29 2.1 0.0021 0.73 0.29
## 
##  lower alpha upper     95% confidence boundaries
## 0.68 0.69 0.69 
## 
##  Reliability if an item is dropped:
##            raw_alpha std.alpha G6(smc) average_r S/N alpha se
## co04aright      0.71      0.71    0.65      0.38 2.4   0.0023
## co04bright      0.64      0.62    0.57      0.29 1.6   0.0025
## co04cright      0.60      0.59    0.54      0.27 1.5   0.0028
## co04dright      0.61      0.60    0.54      0.27 1.5   0.0027
## co04eright      0.60      0.59    0.54      0.27 1.5   0.0028
## 
##  Item statistics 
##                n raw.r std.r r.cor r.drop mean   sd
## co04aright 30452  0.43  0.51  0.27   0.23 0.95 0.22
## co04bright 29661  0.70  0.67  0.53   0.45 0.63 0.48
## co04cright 29260  0.73  0.71  0.61   0.52 0.69 0.46
## co04dright 29078  0.73  0.71  0.61   0.51 0.69 0.46
## co04eright 28983  0.73  0.71  0.61   0.52 0.70 0.46
## 
## Non missing response frequency for each item
##               0    1 miss
## co04aright 0.05 0.95 0.32
## co04bright 0.37 0.63 0.33
## co04cright 0.31 0.69 0.34
## co04dright 0.31 0.69 0.35
## co04eright 0.30 0.70 0.35</code></pre>
<pre class="r"><code>iq$count_backwards = rowMeans( answered_counting_items, na.rm = T)
qplot(iq$count_backwards)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 14099 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="1_data_import_files/figure-html/select%20IQ%20data-5.png" width="672" /></p>
<pre class="r"><code>## Word Memory
iq$words_immediate = iq$co07count
iq$words_delayed = iq$co10count
qplot(iq$words_immediate, iq$words_delayed, geom = &quot;jitter&quot;)</code></pre>
<pre><code>## Warning: Removed 13080 rows containing missing values (geom_point).</code></pre>
<p><img src="1_data_import_files/figure-html/select%20IQ%20data-6.png" width="672" /></p>
<pre class="r"><code>answered_word_items = iq %&gt;% select(co07count,co10count)
psych::alpha(data.frame(answered_word_items))</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(answered_word_items))
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean  sd
##       0.87      0.87    0.77      0.77 6.8 0.0012  4.6 1.8
## 
##  lower alpha upper     95% confidence boundaries
## 0.87 0.87 0.87 
## 
##  Reliability if an item is dropped:
##           raw_alpha std.alpha G6(smc) average_r S/N alpha se
## co07count      0.77      0.77     0.6      0.77  NA       NA
## co10count      0.77      0.77     0.6      0.77  NA       NA
## 
##  Item statistics 
##               n raw.r std.r r.cor r.drop mean  sd
## co07count 31471  0.94  0.94  0.83   0.77  5.1 1.8
## co10count 31471  0.94  0.94  0.83   0.77  4.2 1.9</code></pre>
<pre class="r"><code>iq$words_remembered_avg = rowMeans( answered_word_items, na.rm = T)
qplot(iq$words_remembered_avg)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 13080 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="1_data_import_files/figure-html/select%20IQ%20data-7.png" width="672" /></p>
<pre class="r"><code>##Adaptive Numbering
iq$adaptive_numbering = iq$w_abil
qplot(iq$adaptive_numbering)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 13142 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="1_data_import_files/figure-html/select%20IQ%20data-8.png" width="672" /></p>
<div id="iq-tests-earlier-waves" class="section level3">
<h3>IQ-Tests earlier waves</h3>
<pre class="r"><code>## Wave 4 - 2007
### Data
iq2007_ek2= bek_ek2 %&gt;%
  select(pidlink, ektype, &quot;age_2007&quot; = age, matches(&quot;ek[0-9]x&quot;),
         matches(&quot;ek[0-9][0-9]x&quot;))

iq2007_ek1= bek_ek1 %&gt;%
  select(pidlink, ektype, &quot;age_2007&quot; = age, matches(&quot;ek[0-9]x&quot;),
         matches(&quot;ek[0-9][0-9]x&quot;)) %&gt;%
  filter(!(pidlink %in% iq2007_ek2$pidlink))

# some people answered both versions of the test
# (depending on whether they had seen test ek1 already in 2000)
# In order to deal with them i form an additional dataset that includes the information from
# the people that repeated the first test and their score on the first test in 2007
# that means they have already seen the test 7 years before...
# i merge this data later in the same column as the other scores in 2007 in the first test
# check with Ruben, if that is the right way to go...

iq2007_ek1_repeater = bek_ek1 %&gt;%
  select(pidlink, ektype, &quot;age_2007&quot; = age, matches(&quot;ek[0-9]x&quot;),
         matches(&quot;ek[0-9][0-9]x&quot;)) %&gt;%
  filter((pidlink %in% iq2007_ek2$pidlink))

iq2007 = bind_rows(iq2007_ek1, iq2007_ek2) 

### Raven
iq2007 = iq2007 %&gt;%
  mutate(ek1x = ifelse(ek1x == 1, 1,
                       ifelse(ek1x == 6, NA, 0)),
         ek2x = ifelse(ek2x == 1,  1,
                       ifelse(ek2x == 6, NA, 0)),
         ek3x = ifelse(ek3x == 1,  1,
                       ifelse(ek3x == 6, NA, 0)),
         ek4x = ifelse(ek4x == 1,  1,
                       ifelse(ek4x == 6, NA, 0)),
         ek5x = ifelse(ek5x == 1,  1,
                       ifelse(ek5x == 6, NA, 0)),
         ek6x = ifelse(ek6x == 1,  1,
                       ifelse(ek6x == 6, NA, 0)),
         ek7x = ifelse(ek7x == 1,  1,
                       ifelse(ek7x == 6, NA, 0)),
         ek8x = ifelse(ek8x == 1,  1,
                       ifelse(ek8x == 6, NA, 0)),
         ek9x = ifelse(ek9x == 1,  1,
                       ifelse(ek9x == 6, NA, 0)),
         ek10x = ifelse(ek10x == 1, 1,
                       ifelse(ek10x == 6, NA, 0)),
         ek11x = ifelse(ek11x == 1,  1,
                       ifelse(ek11x == 6, NA, 0)),
         ek12x = ifelse(ek12x == 1,  1,
                       ifelse(ek12x == 6, NA, 0)))

answered_raven_items = iq2007 %&gt;% select(ek1x:ek12x)
psych::alpha(data.frame(answered_raven_items))</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(answered_raven_items))
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean   sd
##       0.85      0.87    0.87      0.35 6.4 0.0016 0.69 0.28
## 
##  lower alpha upper     95% confidence boundaries
## 0.85 0.85 0.86 
## 
##  Reliability if an item is dropped:
##       raw_alpha std.alpha G6(smc) average_r S/N alpha se
## ek1x       0.84      0.85    0.86      0.34 5.7   0.0017
## ek2x       0.83      0.85    0.86      0.34 5.6   0.0018
## ek3x       0.83      0.85    0.85      0.34 5.6   0.0018
## ek4x       0.84      0.85    0.86      0.34 5.7   0.0018
## ek5x       0.85      0.86    0.87      0.36 6.1   0.0017
## ek6x       0.85      0.87    0.87      0.37 6.5   0.0016
## ek7x       0.84      0.85    0.85      0.34 5.8   0.0017
## ek8x       0.84      0.85    0.85      0.34 5.7   0.0017
## ek9x       0.84      0.85    0.86      0.35 5.8   0.0017
## ek10x      0.84      0.86    0.87      0.35 6.0   0.0017
## ek11x      0.84      0.85    0.86      0.34 5.7   0.0017
## ek12x      0.86      0.87    0.87      0.37 6.5   0.0015
## 
##  Item statistics 
##           n raw.r std.r r.cor r.drop mean   sd
## ek1x  18508  0.63  0.69  0.65   0.58 0.89 0.31
## ek2x  18508  0.73  0.71  0.69   0.65 0.74 0.44
## ek3x  18508  0.75  0.72  0.70   0.67 0.70 0.46
## ek4x  18508  0.72  0.69  0.66   0.62 0.69 0.46
## ek5x  18508  0.63  0.59  0.52   0.50 0.64 0.48
## ek6x  18508  0.55  0.48  0.40   0.39 0.42 0.49
## ek7x   6684  0.62  0.67  0.65   0.55 0.92 0.27
## ek8x   6684  0.63  0.68  0.67   0.56 0.91 0.29
## ek9x   6684  0.63  0.65  0.61   0.54 0.85 0.36
## ek10x  6684  0.61  0.61  0.55   0.51 0.79 0.40
## ek11x 18508  0.65  0.68  0.64   0.58 0.82 0.38
## ek12x 18508  0.54  0.47  0.38   0.37 0.40 0.49
## 
## Non missing response frequency for each item
##          0    1 miss
## ek1x  0.11 0.89 0.00
## ek2x  0.26 0.74 0.00
## ek3x  0.30 0.70 0.00
## ek4x  0.31 0.69 0.00
## ek5x  0.36 0.64 0.00
## ek6x  0.58 0.42 0.00
## ek7x  0.08 0.92 0.64
## ek8x  0.09 0.91 0.64
## ek9x  0.15 0.85 0.64
## ek10x 0.21 0.79 0.64
## ek11x 0.18 0.82 0.00
## ek12x 0.60 0.40 0.00</code></pre>
<pre class="r"><code>iq2007$raven2007 = rowMeans(answered_raven_items, na.rm = T)
iq2007 = iq2007 %&gt;%
  mutate(raven_2007_young = ifelse(ektype == 1, raven2007, NA),
         raven_2007_old = ifelse(ektype == 2, raven2007, NA))
qplot(iq2007$raven_2007_young)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 11824 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="1_data_import_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre class="r"><code>qplot(iq2007$raven_2007_old)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 6684 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="1_data_import_files/figure-html/unnamed-chunk-3-2.png" width="672" /></p>
<pre class="r"><code>##Math Test
iq2007 = iq2007 %&gt;%
  mutate(ek13x = ifelse(ek13x == 1, 1,
                       ifelse(ek13x == 6, NA, 0)),
         ek14x = ifelse(ek14x == 1,  1,
                       ifelse(ek14x == 6, NA, 0)),
         ek15x = ifelse(ek15x == 1,  1,
                       ifelse(ek15x == 6, NA, 0)),
         ek16x = ifelse(ek16x == 1,  1,
                       ifelse(ek16x == 6, NA, 0)),
         ek17x = ifelse(ek17x == 1,  1,
                       ifelse(ek17x == 6, NA, 0)),
         ek18x = ifelse(ek18x == 1,  1,
                       ifelse(ek18x == 6, NA, 0)),
         ek19x = ifelse(ek19x == 1,  1,
                       ifelse(ek19x == 6, NA, 0)),
         ek20x = ifelse(ek20x == 1,  1,
                       ifelse(ek20x == 6, NA, 0)),
         ek21x = ifelse(ek21x == 1,  1,
                       ifelse(ek21x == 6, NA, 0)),
         ek22x = ifelse(ek22x == 1, 1,
                       ifelse(ek22x == 6, NA, 0)))

answered_math_items = iq2007 %&gt;% select(ek13x:ek22x)
iq2007$math2007 = rowMeans( answered_math_items, na.rm = T)
iq2007 = iq2007 %&gt;%
  mutate(math_2007_young = ifelse(ektype == 1, math2007, NA),
         math_2007_old = ifelse(ektype == 2, math2007, NA))
qplot(iq2007$math_2007_young)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 11824 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="1_data_import_files/figure-html/unnamed-chunk-3-3.png" width="672" /></p>
<pre class="r"><code>qplot(iq2007$math_2007_old)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 6684 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="1_data_import_files/figure-html/unnamed-chunk-3-4.png" width="672" /></p>
<pre class="r"><code>iq2007 = iq2007 %&gt;% select(pidlink, age_2007, raven_2007_young, raven_2007_old,
                           math_2007_young, math_2007_old)

##Do the same for the repeater
### Raven
iq2007_ek1_repeater = iq2007_ek1_repeater %&gt;%
  mutate(ek1x = ifelse(ek1x == 1, 1,
                       ifelse(ek1x == 6, NA, 0)),
         ek2x = ifelse(ek2x == 1,  1,
                       ifelse(ek2x == 6, NA, 0)),
         ek3x = ifelse(ek3x == 1,  1,
                       ifelse(ek3x == 6, NA, 0)),
         ek4x = ifelse(ek4x == 1,  1,
                       ifelse(ek4x == 6, NA, 0)),
         ek5x = ifelse(ek5x == 1,  1,
                       ifelse(ek5x == 6, NA, 0)),
         ek6x = ifelse(ek6x == 1,  1,
                       ifelse(ek6x == 6, NA, 0)),
         ek7x = ifelse(ek7x == 1,  1,
                       ifelse(ek7x == 6, NA, 0)),
         ek8x = ifelse(ek8x == 1,  1,
                       ifelse(ek8x == 6, NA, 0)),
         ek9x = ifelse(ek9x == 1,  1,
                       ifelse(ek9x == 6, NA, 0)),
         ek10x = ifelse(ek10x == 1, 1,
                       ifelse(ek10x == 6, NA, 0)),
         ek11x = ifelse(ek11x == 1,  1,
                       ifelse(ek11x == 6, NA, 0)),
         ek12x = ifelse(ek12x == 1,  1,
                       ifelse(ek12x == 6, NA, 0)))

answered_raven_items = iq2007_ek1_repeater %&gt;% select(ek1x:ek12x)
psych::alpha(data.frame(answered_raven_items))</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(answered_raven_items))
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean   sd
##       0.87      0.89     0.9      0.41 8.2 0.0028 0.78 0.25
## 
##  lower alpha upper     95% confidence boundaries
## 0.87 0.87 0.88 
## 
##  Reliability if an item is dropped:
##       raw_alpha std.alpha G6(smc) average_r S/N alpha se
## ek1x       0.86      0.88    0.89      0.40 7.3   0.0031
## ek2x       0.86      0.88    0.89      0.40 7.3   0.0032
## ek3x       0.85      0.88    0.89      0.40 7.3   0.0033
## ek4x       0.86      0.88    0.89      0.40 7.5   0.0032
## ek5x       0.87      0.89    0.90      0.42 8.0   0.0030
## ek6x       0.88      0.89    0.90      0.44 8.5   0.0027
## ek7x       0.86      0.88    0.88      0.39 7.1   0.0031
## ek8x       0.86      0.88    0.88      0.39 7.1   0.0031
## ek9x       0.86      0.88    0.89      0.39 7.1   0.0032
## ek10x      0.86      0.88    0.89      0.40 7.3   0.0032
## ek11x      0.86      0.88    0.89      0.40 7.5   0.0031
## ek12x      0.88      0.90    0.90      0.44 8.6   0.0027
## 
##  Item statistics 
##          n raw.r std.r r.cor r.drop mean   sd
## ek1x  4518  0.69  0.73  0.71   0.64 0.91 0.29
## ek2x  4518  0.72  0.72  0.69   0.65 0.81 0.40
## ek3x  4518  0.76  0.74  0.72   0.69 0.78 0.41
## ek4x  4518  0.71  0.69  0.65   0.62 0.76 0.43
## ek5x  4518  0.61  0.58  0.51   0.49 0.69 0.46
## ek6x  4518  0.53  0.48  0.40   0.39 0.48 0.50
## ek7x  4518  0.71  0.76  0.76   0.66 0.92 0.27
## ek8x  4518  0.73  0.78  0.78   0.68 0.92 0.27
## ek9x  4518  0.73  0.77  0.75   0.67 0.90 0.30
## ek10x 4518  0.70  0.72  0.69   0.64 0.87 0.34
## ek11x 4518  0.67  0.69  0.65   0.59 0.86 0.35
## ek12x 4518  0.51  0.46  0.37   0.37 0.46 0.50
## 
## Non missing response frequency for each item
##          0    1 miss
## ek1x  0.09 0.91    0
## ek2x  0.19 0.81    0
## ek3x  0.22 0.78    0
## ek4x  0.24 0.76    0
## ek5x  0.31 0.69    0
## ek6x  0.52 0.48    0
## ek7x  0.08 0.92    0
## ek8x  0.08 0.92    0
## ek9x  0.10 0.90    0
## ek10x 0.13 0.87    0
## ek11x 0.14 0.86    0
## ek12x 0.54 0.46    0</code></pre>
<pre class="r"><code>iq2007_ek1_repeater$raven_2007_young_repeater = rowMeans(answered_raven_items, na.rm = T)
qplot(iq2007_ek1_repeater$raven_2007_young_repeater)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="1_data_import_files/figure-html/unnamed-chunk-3-5.png" width="672" /></p>
<pre class="r"><code>##Math Test
iq2007_ek1_repeater = iq2007_ek1_repeater %&gt;%
  mutate(ek13x = ifelse(ek13x == 1, 1,
                       ifelse(ek13x == 6, NA, 0)),
         ek14x = ifelse(ek14x == 1,  1,
                       ifelse(ek14x == 6, NA, 0)),
         ek15x = ifelse(ek15x == 1,  1,
                       ifelse(ek15x == 6, NA, 0)),
         ek16x = ifelse(ek16x == 1,  1,
                       ifelse(ek16x == 6, NA, 0)),
         ek17x = ifelse(ek17x == 1,  1,
                       ifelse(ek17x == 6, NA, 0)),
         ek18x = ifelse(ek18x == 1,  1,
                       ifelse(ek18x == 6, NA, 0)),
         ek19x = ifelse(ek19x == 1,  1,
                       ifelse(ek19x == 6, NA, 0)),
         ek20x = ifelse(ek20x == 1,  1,
                       ifelse(ek20x == 6, NA, 0)),
         ek21x = ifelse(ek21x == 1,  1,
                       ifelse(ek21x == 6, NA, 0)),
         ek22x = ifelse(ek22x == 1, 1,
                       ifelse(ek22x == 6, NA, 0)))

answered_math_items = iq2007_ek1_repeater %&gt;% select(ek13x:ek22x)
iq2007_ek1_repeater$math_2007_young_repeater = rowMeans( answered_math_items, na.rm = T)
qplot(iq2007_ek1_repeater$math_2007_young_repeater)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="1_data_import_files/figure-html/unnamed-chunk-3-6.png" width="672" /></p>
<pre class="r"><code>iq2007_ek1_repeater = iq2007_ek1_repeater %&gt;% select(pidlink, raven_2007_young_repeater,
                                                     math_2007_young_repeater)

iq2007_all = left_join(iq2007, iq2007_ek1_repeater, by = &quot;pidlink&quot;)</code></pre>
<pre><code>## Warning: Column `pidlink` has different attributes on LHS and RHS of join</code></pre>
<pre class="r"><code># Now we instert raven and math scores from the repeaters as raven and math scores young
# Treat them like all the others.
crosstabs(is.na(iq2007_all$raven_2007_young) + is.na(iq2007_all$raven_2007_young_repeater))</code></pre>
<table style="width:22%;">
<colgroup>
<col width="11%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">FALSE</th>
<th align="center">TRUE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">6684</td>
</tr>
<tr class="even">
<td align="center">4518</td>
<td align="center">7306</td>
</tr>
</tbody>
</table>
<pre class="r"><code>iq2007_all = iq2007_all %&gt;%
  mutate(raven_2007_young = ifelse(!is.na(raven_2007_young_repeater),
                                   raven_2007_young_repeater, raven_2007_young),
         math_2007_young = ifelse(!is.na(math_2007_young_repeater),
                                  math_2007_young_repeater, math_2007_young))

iq2007_all = iq2007_all %&gt;% select(pidlink, age_2007, raven_2007_old, raven_2007_young,
                                   math_2007_young, math_2007_old)
iq = full_join(iq, iq2007_all, by = &quot;pidlink&quot;)</code></pre>
<pre><code>## Warning: Column `pidlink` has different attributes on LHS and RHS of join</code></pre>
<pre class="r"><code>## IQ Tests 
## Correlation of all Iq-Tests
round(cor(iq %&gt;% select(raven_2015_old, math_2015_old, raven_2015_young, math_2015_young, count_backwards, words_immediate, words_delayed, adaptive_numbering, raven_2007_old, math_2007_young), use = &quot;pairwise.complete.obs&quot;), 2)</code></pre>
<table>
<colgroup>
<col width="9%" />
<col width="9%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="9%" />
<col width="11%" />
<col width="9%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">raven_2015_old</th>
<th align="center">math_2015_old</th>
<th align="center">raven_2015_young</th>
<th align="center">math_2015_young</th>
<th align="center">count_backwards</th>
<th align="center">words_immediate</th>
<th align="center">words_delayed</th>
<th align="center">adaptive_numbering</th>
<th align="center">raven_2007_old</th>
<th align="center">math_2007_young</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">0.41</td>
<td align="center">0.66</td>
<td align="center">0.3</td>
<td align="center">0.27</td>
<td align="center">0.38</td>
<td align="center">0.37</td>
<td align="center">0.45</td>
<td align="center">0.33</td>
<td align="center">0.18</td>
</tr>
<tr class="even">
<td align="center">0.41</td>
<td align="center">1</td>
<td align="center">0.3</td>
<td align="center">0.49</td>
<td align="center">0.2</td>
<td align="center">0.31</td>
<td align="center">0.31</td>
<td align="center">0.35</td>
<td align="center">0.19</td>
<td align="center">0.22</td>
</tr>
<tr class="odd">
<td align="center">0.66</td>
<td align="center">0.3</td>
<td align="center">1</td>
<td align="center">0.57</td>
<td align="center">0.22</td>
<td align="center">0.19</td>
<td align="center">0.18</td>
<td align="center">0.29</td>
<td align="center">0.19</td>
<td align="center">0.08</td>
</tr>
<tr class="even">
<td align="center">0.3</td>
<td align="center">0.49</td>
<td align="center">0.57</td>
<td align="center">1</td>
<td align="center">0.23</td>
<td align="center">0.18</td>
<td align="center">0.17</td>
<td align="center">0.28</td>
<td align="center">0.14</td>
<td align="center">0.15</td>
</tr>
<tr class="odd">
<td align="center">0.27</td>
<td align="center">0.2</td>
<td align="center">0.22</td>
<td align="center">0.23</td>
<td align="center">1</td>
<td align="center">0.23</td>
<td align="center">0.22</td>
<td align="center">0.33</td>
<td align="center">0.2</td>
<td align="center">0.17</td>
</tr>
<tr class="even">
<td align="center">0.38</td>
<td align="center">0.31</td>
<td align="center">0.19</td>
<td align="center">0.18</td>
<td align="center">0.23</td>
<td align="center">1</td>
<td align="center">0.77</td>
<td align="center">0.4</td>
<td align="center">0.2</td>
<td align="center">0.13</td>
</tr>
<tr class="odd">
<td align="center">0.37</td>
<td align="center">0.31</td>
<td align="center">0.18</td>
<td align="center">0.17</td>
<td align="center">0.22</td>
<td align="center">0.77</td>
<td align="center">1</td>
<td align="center">0.37</td>
<td align="center">0.18</td>
<td align="center">0.13</td>
</tr>
<tr class="even">
<td align="center">0.45</td>
<td align="center">0.35</td>
<td align="center">0.29</td>
<td align="center">0.28</td>
<td align="center">0.33</td>
<td align="center">0.4</td>
<td align="center">0.37</td>
<td align="center">1</td>
<td align="center">0.28</td>
<td align="center">0.22</td>
</tr>
<tr class="odd">
<td align="center">0.33</td>
<td align="center">0.19</td>
<td align="center">0.19</td>
<td align="center">0.14</td>
<td align="center">0.2</td>
<td align="center">0.2</td>
<td align="center">0.18</td>
<td align="center">0.28</td>
<td align="center">1</td>
<td align="center">0.5</td>
</tr>
<tr class="even">
<td align="center">0.18</td>
<td align="center">0.22</td>
<td align="center">0.08</td>
<td align="center">0.15</td>
<td align="center">0.17</td>
<td align="center">0.13</td>
<td align="center">0.13</td>
<td align="center">0.22</td>
<td align="center">0.5</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<pre class="r"><code>##Missingness_Patterns
formr::missingness_patterns(iq %&gt;% select(raven_2015_old, math_2015_old, raven_2015_young, math_2015_young, count_backwards, words_immediate, words_delayed, adaptive_numbering, raven_2007_old, math_2007_young))</code></pre>
<pre><code>##  index                col missings
##      1    math_2007_young    36885
##      2     raven_2007_old    36263
##      3   raven_2015_young    33144
##      4    math_2015_young    33144
##      5    count_backwards    17635
##      6     raven_2015_old    16748
##      7      math_2015_old    16748
##      8 adaptive_numbering    16678
##      9    words_immediate    16616
##     10      words_delayed    16616</code></pre>
<table style="width:67%;">
<colgroup>
<col width="31%" />
<col width="11%" />
<col width="23%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Pattern</th>
<th align="center">Freq</th>
<th align="center">Culprit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1_2_3_4_____________</td>
<td align="center">17673</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">1_2_____5_6_7_8_9_10</td>
<td align="center">7164</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">1_<strong>3_4</strong>___________</td>
<td align="center">5201</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center"><strong>2</strong>_______________</td>
<td align="center">3497</td>
<td align="center">raven_2007_old</td>
</tr>
<tr class="odd">
<td align="center">1_2_3_4_5_6_7_8_9_10</td>
<td align="center">3455</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">____________________</td>
<td align="center">2640</td>
<td align="center">_</td>
</tr>
<tr class="odd">
<td align="center">1___3_4_5_6_7_8_9_10</td>
<td align="center">1892</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center"><strong>2</strong>___5_6_7_8_9_10</td>
<td align="center">1263</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">__2_3_4_5_6_7_8_9_10</td>
<td align="center">1210</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">____3_4_5_6_7_8_9_10</td>
<td align="center">1076</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">1_2_3_4_5___________</td>
<td align="center">645</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center"><strong>2_3_4</strong>___________</td>
<td align="center">607</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">____3_4_____________</td>
<td align="center">484</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">1_2_3_4_<strong>6_7</strong>_____</td>
<td align="center">263</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">1_2_3_4_5_____8_9_10</td>
<td align="center">261</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">________5_6_7_8_9_10</td>
<td align="center">231</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">1_<strong>3_4_5</strong>_________</td>
<td align="center">132</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">1_2_3_4_5_6_7_______</td>
<td align="center">72</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center"><strong>2<em>5</em></strong>________</td>
<td align="center">54</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">1_<strong>3_4</strong><em>6_7</em>______</td>
<td align="center">39</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">________5___________</td>
<td align="center">36</td>
<td align="center">count_backwards</td>
</tr>
<tr class="even">
<td align="center">1_<strong>3_4_5</strong>___8_9_10</td>
<td align="center">33</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">1_2_3_4_5_6_7_8_____</td>
<td align="center">23</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">____3_4_5___________</td>
<td align="center">16</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center"><strong>2_3_4_5</strong>_________</td>
<td align="center">15</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">1_2_3_4_<strong>6_7_8</strong>___</td>
<td align="center">12</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">__________6_7_______</td>
<td align="center">12</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center"><strong>2<em>5</em></strong>__8_9_10</td>
<td align="center">11</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong>_____6_7_______</td>
<td align="center">11</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">________5_____8_9_10</td>
<td align="center">11</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">1_2_3_4_5_____8_____</td>
<td align="center">8</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center"><strong>2_3_4_5</strong>___8_9_10</td>
<td align="center">6</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">____3_4_<strong>6_7</strong>_____</td>
<td align="center">3</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">________5_6_7_8_____</td>
<td align="center">3</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">1_2_3_4_______8_____</td>
<td align="center">2</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">1_<strong>3_4_5_6_7_8</strong>___</td>
<td align="center">2</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">1_<strong>3_4_5_6_7</strong>_____</td>
<td align="center">2</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">1_<strong>3_4</strong><em>6_7_8</em>____</td>
<td align="center">2</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center"><strong>2_3_4</strong><em>6_7</em>______</td>
<td align="center">2</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center"><strong>2<em>5_6_7_8</em></strong>__</td>
<td align="center">2</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">____3_4_5_____8_9_10</td>
<td align="center">2</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">________5_6_7_______</td>
<td align="center">2</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">1_2_______6_7_______</td>
<td align="center">1</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">1_<strong>3_4_5<em>8</em></strong>__</td>
<td align="center">1</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">1_<strong>3_4</strong>_____8_____</td>
<td align="center">1</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">1_______5_6_7_8_9_10</td>
<td align="center">1</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center"><strong>2_3_4_5_6_7</strong>_____</td>
<td align="center">1</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center"><strong>2_3_4_5<em>8</em></strong>__</td>
<td align="center">1</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center"><strong>2_3_4</strong><em>6_7_8</em>____</td>
<td align="center">1</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center"><strong>2<em>5_6_7</em></strong>____</td>
<td align="center">1</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center"><strong>2<em>5</em>8</strong>___</td>
<td align="center">1</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center"><strong>2</strong>_____6_7_8_____</td>
<td align="center">1</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">____3_4_5_6_7_8_____</td>
<td align="center">1</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">________5_____8_____</td>
<td align="center">1</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<pre class="r"><code>iq %&gt;% select(raven_2015_old, math_2015_old, raven_2015_young, math_2015_young, count_backwards, words_immediate, words_delayed, adaptive_numbering) %&gt;% tidyr::gather() %&gt;% 
  ggplot(aes(value)) + geom_bar() + facet_wrap(~ key, scales = &quot;free&quot;)</code></pre>
<pre><code>## Warning: attributes are not identical across measure variables;
## they will be dropped</code></pre>
<pre><code>## Warning: Removed 167329 rows containing non-finite values (stat_count).</code></pre>
<p><img src="1_data_import_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code>##g_factor
&quot;g_factor =~ raven_2015_old + math_2015_old + count_backwards +  words_delayed + adaptive_numbering&quot; %&gt;%
cfa(missing = &quot;fiml&quot;, data = iq, std.lv = T, std.ov = T) -&gt; cfa_g</code></pre>
<pre><code>## Warning in lav_data_full(data = data, group = group, cluster = cluster, : lavaan WARNING: some cases are empty and will be ignored:
##   34 40 41 54 59 69 71 72 81 82 103 111 112 113 117 120 129 166 168 176 186 196 198 215 220 235 247 254 256 258 262 263 278 281 295 310 311 312 313 315 316 323 331 341 353 368 373 374 376 384 393 394 395 427 431 437 440 442 455 457 475 482 495 498 508 510 519 535 537 543 590 591 646 653 657 661 675 688 703 709 746 762 772 817 836 864 867 889 897 904 916 923 926 966 970 984 995 996 997 998 999 1000 1001 1030 1044 1047 1048 1061 1066 1067 1072 1073 1074 1085 1095 1101 1118 1119 1120 1123 1130 1131 1150 1155 1158 1161 1173 1177 1204 1206 1214 1220 1222 1236 1242 1243 1244 1248 1249 1259 1262 1272 1273 1298 1301 1315 1329 1369 1374 1375 1387 1394 1420 1422 1424 1431 1434 1436 1437 1440 1483 1493 1525 1528 1532 1535 1546 1547 1548 1549 1550 1554 1555 1569 1573 1577 1578 1593 1623 1625 1637 1650 1655 1676 1681 1698 1700 1702 1704 1705 1711 1723 1724 1728 1739 1741 1743 1752 1753 1757 1759 1760 1767 1775 1776 1790 1796 1804 1810 1813 1817 1818 1825 1826 1842 1849 1855 1857 1871 1873 1874 1876 1878 1887 1894 1909 1913 1916 1922 1926 1928 1929 1934 1935 1936 1938 1941 1943 1944 1949 1950 1957 1968 1969 1976 1980 1987 2003 2016 2021 2023 2028 2051 2063 2067 2075 2082 2083 2100 2108 2112 2114 2126 2132 2135 2138 2139 2155 2165 2167 2179 2189 2194 2195 2199 2208 2220 2231 2232 2233 2236 2237 2239 2248 2249 2250 2252 2259 2264 2266 2269 2276 2277 2298 2315 2342 2365 2383 2401 2422 2429 2438 2440 2449 2450 2455 2456 2463 2464 2475 2476 2482 2511 2532 2535 2537 2538 2553 2575 2580 2586 2597 2598 2618 2643 2646 2648 2678 2686 2699 2713 2717 2724 2727 2755 2759 2776 2795 2796 2797 2804 2808 2812 2827 2877 2880 2887 2888 2893 2896 2899 2901 2904 2906 2908 2910 2920 2931 2935 2936 2962 2964 2985 2997 3001 3004 3011 3013 3015 3031 3034 3035 3037 3038 3040 3041 3053 3062 3066 3081 3082 3097 3114 3120 3125 3127 3134 3141 3145 3148 3153 3156 3160 3180 3183 3212 3213 3214 3225 3230 3234 3241 3245 3249 3258 3264 3267 3280 3282 3285 3290 3300 3303 3306 3309 3319 3320 3323 3326 3329 3330 3332 3333 3338 3344 3353 3358 3363 3367 3368 3373 3378 3382 3388 3389 3398 3401 3402 3403 3404 3407 3409 3430 3431 3437 3438 3459 3463 3477 3494 3507 3508 3514 3541 3544 3546 3547 3550 3556 3561 3565 3567 3570 3575 3586 3589 3606 3616 3643 3647 3656 3658 3661 3663 3665 3674 3678 3680 3682 3691 3692 3695 3697 3698 3706 3708 3710 3711 3713 3715 3716 3718 3727 3728 3729 3737 3750 3752 3753 3760 3762 3771 3780 3785 3786 3788 3789 3809 3816 3837 3839 3841 3848 3855 3862 3866 3877 3880 3881 3882 3883 3884 3885 3886 3887 3891 3893 3910 3919 3922 3926 3952 3957 3964 3969 3971 3976 3979 3981 3982 3997 4000 4001 4002 4017 4018 4037 4039 4041 4049 4075 4095 4096 4097 4111 4127 4129 4131 4134 4138 4150 4161 4178 4183 4204 4209 4216 4219 4225 4233 4236 4237 4238 4243 4244 4266 4274 4295 4298 4300 4315 4316 4324 4334 4337 4338 4342 4344 4351 4356 4372 4390 4391 4402 4411 4412 4413 4414 4415 4416 4422 4423 4424 4437 4438 4439 4458 4476 4481 4485 4502 4506 4512 4515 4518 4519 4533 4534 4535 4537 4542 4543 4549 4550 4565 4575 4579 4583 4589 4591 4610 4613 4615 4622 4623 4634 4641 4642 4649 4650 4653 4654 4671 4673 4682 4683 4693 4696 4699 4703 4704 4707 4710 4713 4719 4744 4754 4757 4758 4760 4764 4766 4775 4780 4783 4793 4797 4804 4810 4811 4838 4884 4909 4927 4935 4936 4937 4939 4940 4942 5000 5001 5002 5003 5004 5007 5014 5035 5074 5075 5091 5095 5135 5145 5195 5201 5209 5210 5226 5241 5242 5259 5260 5268 5271 5280 5311 5322 5329 5332 5351 5356 5357 5358 5368 5371 5408 5419 5422 5436 5440 5441 5444 5445 5446 5457 5494 5504 5533 5541 5611 5637 5663 5665 5668 5674 5687 5691 5693 5703 5704 5712 5722 5727 5730 5737 5741 5753 5849 5850 5857 5860 5873 5879 5906 5926 5936 5938 5939 5940 5954 5956 5964 5979 5998 6013 6058 6059 6063 6068 6084 6094 6113 6129 6151 6197 6214 6225 6228 6232 6239 6248 6250 6258 6259 6264 6270 6283 6312 6313 6319 6360 6361 6362 6376 6388 6389 6405 6422 6434 6435 6459 6473 6476 6477 6486 6490 6491 6513 6517 6520 6521 6522 6535 6539 6540 6541 6542 6543 6549 6559 6560 6561 6568 6569 6570 6571 6572 6574 6575 6577 6578 6579 6580 6582 6590 6592 6605 6611 6627 6632 6633 6637 6638 6643 6653 6654 6658 6666 6667 6669 6700 6716 6721 6725 6728 6733 6750 6751 6752 6769 6770 6773 6774 6778 6782 6787 6811 6818 6823 6827 6828 6832 6833 6834 6836 6837 6839 6844 6846 6850 6857 6861 6863 6870 6871 6890 6918 6928 6935 6946 6968 6971 6980 6983 7011 7014 7018 7027 7048 7052 7059 7061 7071 7082 7089 7125 7149 7163 7164 7176 7184 7194 7209 7210 7229 7256 7264 7273 7276 7299 7308 7383 7436 7451 7476 7528 7540 7546 7592 7593 7598 7619 7626 7631 7655 7658 7659 7660 7661 7662 7669 7694 7716 7717 7727 7728 7730 7733 7739 7756 7778 7780 7801 7809 7812 7822 7850 7854 7879 7880 7893 7935 7940 7963 7969 7976 7979 8005 8006 8007 8014 8030 8055 8065 8070 8071 8073 8074 8096 8115 8118 8129 8149 8150 8160 8169 8174 8185 8192 8193 8196 8198 8199 8213 8226 8233 8237 8242 8251 8292 8295 8296 8298 8299 8303 8307 8310 8311 8320 8321 8336 8338 8341 8343 8384 8385 8389 8394 8397 8400 8409 8410 8411 8412 8413 8414 8429 8431 8432 8442 8459 8465 8469 8477 8479 8487 8489 8497 8503 8504 8505 8508 8509 8510 8515 8517 8518 8524 8525 8526 8528 8532 8534 8535 8549 8550 8555 8560 8561 8562 8564 8567 8569 8570 8575 8578 8579 8589 8600 8603 8604 8613 8620 8634 8647 8656 8657 8661 8670 8671 8678 8680 8692 8696 8702 8707 8708 8711 8713 8721 8727 8738 8743 8744 8750 8751 8768 8770 8772 8794 8803 8807 8823 8826 8827 8846 8856 8861 8890 8895 8896 8907 8911 8920 8929 8934 8936 8937 8938 8939 8942 8957 8959 8973 9002 9007 9008 9009 9015 9026 9028 9032 9040 9043 9046 9054 9065 9077 9078 9081 9095 9096 9097 9098 9099 9106 9108 9110 9111 9114 9117 9119 9122 9125 9128 9130 9131 9133 9137 9141 9144 9145 9146 9147 9148 9149 9157 9158 9159 9161 9162 9167 9168 9169 9176 9179 9183 9185 9186 9187 9189 9191 9194 9195 9196 9205 9207 9210 9212 9214 9216 9217 9235 9247 9249 9250 9295 9303 9306 9310 9315 9321 9322 9326 9329 9334 9340 9341 9342 9351 9354 9377 9391 9392 9393 9394 9395 9396 9397 9398 9399 9400 9401 9402 9403 9404 9406 9415 9417 9419 9421 9424 9427 9431 9433 9437 9442 9444 9446 9449 9455 9456 9459 9460 9461 9465 9473 9474 9478 9489 9490 9491 9492 9498 9499 9507 9510 9512 9513 9514 9515 9523 9525 9526 9534 9537 9538 9545 9547 9548 9555 9556 9572 9573 9590 9591 9599 9601 9612 9619 9621 9625 9628 9643 9644 9652 9656 9657 9659 9662 9679 9680 9681 9686 9688 9690 9691 9692 9693 9694 9695 9696 9706 9710 9711 9715 9724 9736 9747 9748 9750 9752 9753 9755 9759 9760 9761 9764 9765 9766 9775 9781 9784 9785 9789 9790 9807 9811 9812 9813 9820 9821 9824 9827 9829 9837 9839 9843 9844 9851 9852 9854 9855 9856 9858 9859 9860 9862 9863 9866 9869 9872 9875 9886 9897 9898 9899 9904 9905 9911 9941 9948 9950 9951 9956 9968 9976 9977 9983 9987 9988 9996 10001 10008 10019 10023 10037 10040 10041 10042 10044 10047 10057 10063 10079 10081 10083 10085 10096 10107 10113 10117 10118 10126 10140 10148 10181 10185 10187 10189 10192 10193 10194 10195 10196 10197 10207 10208 10244 10250 10277 10278 10280 10286 10298 10300 10303 10304 10305 10306 10310 10311 10312 10313 10314 10317 10319 10337 10340 10343 10363 10366 10368 10376 10385 10386 10387 10388 10391 10398 10402 10408 10416 10420 10422 10427 10428 10429 10462 10492 10505 10506 10507 10508 10509 10511 10512 10513 10514 10515 10519 10524 10534 10542 10555 10570 10575 10580 10585 10591 10592 10600 10604 10605 10612 10614 10625 10626 10627 10634 10638 10640 10641 10644 10650 10655 10656 10666 10668 10673 10682 10684 10685 10686 10691 10697 10699 10705 10706 10710 10711 10715 10716 10718 10726 10728 10735 10741 10775 10783 10793 10802 10831 10832 10837 10841 10862 10881 10899 10904 10906 10909 10912 10919 10922 10923 10932 10934 10944 10958 10959 10960 10961 10968 10969 10971 10975 10998 10999 11011 11024 11027 11032 11034 11048 11049 11069 11079 11084 11089 11105 11106 11113 11114 11118 11120 11121 11122 11123 11124 11125 11126 11128 11129 11133 11134 11158 11159 11162 11163 11164 11171 11172 11177 11178 11182 11185 11191 11192 11195 11199 11200 11226 11228 11229 11231 11233 11244 11245 11246 11249 11251 11252 11263 11264 11266 11267 11273 11276 11279 11280 11</code></pre>
<pre class="r"><code>summary(cfa_g)</code></pre>
<pre><code>## lavaan (0.5-23.1097) converged normally after  15 iterations
## 
##                                                   Used       Total
##   Number of observations                         31795       48087
## 
##   Number of missing patterns                         9
## 
##   Estimator                                         ML
##   Minimum Function Test Statistic              329.835
##   Degrees of freedom                                 5
##   P-value (Chi-square)                           0.000
## 
## Parameter Estimates:
## 
##   Information                                 Observed
##   Standard Errors                             Standard
## 
## Latent Variables:
##                    Estimate  Std.Err  z-value  P(&gt;|z|)
##   g_factor =~                                         
##     raven_2015_old    0.689    0.006  112.639    0.000
##     math_2015_old     0.558    0.006   89.813    0.000
##     count_backwrds    0.438    0.007   66.340    0.000
##     words_delayed     0.552    0.006   89.858    0.000
##     adaptiv_nmbrng    0.674    0.006  110.663    0.000
## 
## Intercepts:
##                    Estimate  Std.Err  z-value  P(&gt;|z|)
##    .raven_2015_old   -0.008    0.006   -1.398    0.162
##    .math_2015_old    -0.006    0.006   -1.132    0.258
##    .count_backwrds   -0.018    0.006   -3.193    0.001
##    .words_delayed    -0.003    0.006   -0.522    0.601
##    .adaptiv_nmbrng   -0.004    0.006   -0.797    0.425
##     g_factor          0.000                           
## 
## Variances:
##                    Estimate  Std.Err  z-value  P(&gt;|z|)
##    .raven_2015_old    0.532    0.006   82.789    0.000
##    .math_2015_old     0.693    0.007  104.370    0.000
##    .count_backwrds    0.816    0.007  112.531    0.000
##    .words_delayed     0.696    0.007  105.100    0.000
##    .adaptiv_nmbrng    0.548    0.006   85.135    0.000
##     g_factor          1.000</code></pre>
<pre class="r"><code>iq$g_factor = predict(cfa_g)[,1]
qplot(iq$g_factor)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 16292 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="1_data_import_files/figure-html/unnamed-chunk-4-2.png" width="672" /></p>
</div>
</div>
<div id="personality" class="section level2">
<h2>Personality</h2>
<pre class="r"><code>### Personality
##Rearrange personality data so that every individual has only one row
pers = spread(b3b_psn, psntype, psn01)
##name columns
colnames(pers) &lt;- c(&quot;hhid14_9&quot;, &quot;pid14&quot;, &quot;hhid14&quot;, &quot;pidlink&quot;, &quot;version&quot;, &quot;module&quot;, &quot;e1&quot;, &quot;c1&quot;, &quot;o1&quot;, &quot;e2r&quot;, &quot;n1r&quot;, &quot;a1&quot;, &quot;n2r&quot;, &quot;o2&quot;, &quot;c2r&quot;, &quot;o3&quot;, &quot;a2&quot;, &quot;c3&quot;, &quot;e3&quot;, &quot;a3r&quot;, &quot;n3&quot;)
pers = pers %&gt;% select(hhid14_9, pidlink, e1, c1, o1, e2r, n1r, a1, n2r, o2, c2r, o3, a2, c3, e3, a3r, n3)

##Extraversion
pers$e2r_reversed = 6 - pers$e2r
extraversion = pers %&gt;% select(e1, e2r_reversed, e3)
psych::alpha(data.frame(extraversion), check.keys = T)</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(extraversion), check.keys = T)
## 
##   raw_alpha std.alpha G6(smc) average_r  S/N    ase mean   sd
##       0.37      0.35    0.28      0.15 0.54 0.0056  3.4 0.67
## 
##  lower alpha upper     95% confidence boundaries
## 0.36 0.37 0.38 
## 
##  Reliability if an item is dropped:
##              raw_alpha std.alpha G6(smc) average_r   S/N alpha se
## e1               0.072     0.081   0.042     0.042 0.088   0.0092
## e2r_reversed     0.218     0.246   0.140     0.140 0.326   0.0077
## e3               0.429     0.429   0.273     0.273 0.753   0.0064
## 
##  Item statistics 
##                  n raw.r std.r r.cor r.drop mean   sd
## e1           31446  0.77  0.71  0.48   0.30  3.1 1.14
## e2r_reversed 31446  0.73  0.67  0.37   0.24  3.0 1.12
## e3           31446  0.44  0.60  0.19   0.11  4.2 0.67
## 
## Non missing response frequency for each item
##                 1    2    3    4    5 miss
## e1           0.03 0.39 0.08 0.39 0.11    0
## e2r_reversed 0.07 0.36 0.09 0.43 0.05    0
## e3           0.00 0.03 0.05 0.64 0.28    0</code></pre>
<pre class="r"><code>pers$big5_ext = rowMeans(extraversion)
qplot(pers$big5_ext)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="1_data_import_files/figure-html/select%20pesonality%20data-1.png" width="672" /></p>
<pre class="r"><code>##conscientiousness
pers$c2r_reversed = 6 - pers$c2r
conscientiousness = pers %&gt;% select(c1, c2r_reversed, c3)
psych::alpha(data.frame(conscientiousness), check.keys = T)</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(conscientiousness), check.keys = T)
## 
##   raw_alpha std.alpha G6(smc) average_r  S/N   ase mean   sd
##       0.29      0.31    0.24      0.13 0.45 0.007  3.8 0.55
## 
##  lower alpha upper     95% confidence boundaries
## 0.27 0.29 0.3 
## 
##  Reliability if an item is dropped:
##              raw_alpha std.alpha G6(smc) average_r  S/N alpha se
## c1                0.10      0.10   0.054     0.054 0.11   0.0101
## c2r_reversed      0.35      0.36   0.219     0.219 0.56   0.0071
## c3                0.20      0.21   0.116     0.116 0.26   0.0087
## 
##  Item statistics 
##                  n raw.r std.r r.cor r.drop mean   sd
## c1           31446  0.61  0.69  0.42   0.23  4.1 0.71
## c2r_reversed 31446  0.65  0.60  0.19   0.10  3.6 0.95
## c3           31446  0.67  0.65  0.34   0.17  3.8 0.90
## 
## Non missing response frequency for each item
##                 1    2    3    4    5 miss
## c1           0.01 0.04 0.04 0.66 0.25    0
## c2r_reversed 0.03 0.18 0.07 0.65 0.07    0
## c3           0.01 0.12 0.08 0.63 0.15    0</code></pre>
<pre class="r"><code>pers$big5_con = rowMeans(conscientiousness)
qplot(pers$big5_con)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="1_data_import_files/figure-html/select%20pesonality%20data-2.png" width="672" /></p>
<pre class="r"><code>##Openness
openness = pers %&gt;% select(o1, o2, o3)
psych::alpha(data.frame(openness), check.keys = T)</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(openness), check.keys = T)
## 
##   raw_alpha std.alpha G6(smc) average_r  S/N    ase mean   sd
##       0.45      0.45    0.35      0.21 0.81 0.0054  3.7 0.67
## 
##  lower alpha upper     95% confidence boundaries
## 0.43 0.45 0.46 
## 
##  Reliability if an item is dropped:
##    raw_alpha std.alpha G6(smc) average_r  S/N alpha se
## o1      0.30      0.30    0.18      0.18 0.43   0.0078
## o2      0.39      0.39    0.25      0.25 0.65   0.0068
## o3      0.35      0.36    0.22      0.22 0.55   0.0073
## 
##  Item statistics 
##        n raw.r std.r r.cor r.drop mean   sd
## o1 31446  0.71  0.71  0.45   0.30  3.7 0.98
## o2 31446  0.70  0.67  0.37   0.25  3.5 1.05
## o3 31446  0.65  0.69  0.41   0.27  4.0 0.88
## 
## Non missing response frequency for each item
##       1    2    3    4    5 miss
## o1 0.02 0.18 0.08 0.58 0.14    0
## o2 0.03 0.22 0.09 0.54 0.12    0
## o3 0.01 0.10 0.05 0.61 0.23    0</code></pre>
<pre class="r"><code>pers$big5_open = rowMeans(openness)
qplot(pers$big5_open)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="1_data_import_files/figure-html/select%20pesonality%20data-3.png" width="672" /></p>
<pre class="r"><code>## Neuroticism
pers$n1r_reversed = 6 - pers$n1r
pers$n2r_reversed = 6 - pers$n2r
neuroticism = pers %&gt;% select(n1r_reversed, n2r_reversed, n3)
pers$big5_neu = rowMeans(neuroticism)
qplot(pers$big5_neu)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="1_data_import_files/figure-html/select%20pesonality%20data-4.png" width="672" /></p>
<pre class="r"><code>##Agreeableness
pers$a3r_reversed = 6- pers$a3r
agreeableness= pers %&gt;% select(a1, a2, a3r_reversed)
pers$big5_agree = rowMeans(agreeableness)
qplot(pers$big5_agree)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="1_data_import_files/figure-html/select%20pesonality%20data-5.png" width="672" /></p>
</div>
<div id="risk-preference" class="section level2">
<h2>Risk preference</h2>
<pre class="r"><code>###Risktaking
risk = b3a_si %&gt;% select(hhid14_9, pidlink, random_si, si01, si02, si03, si04, si05, si11, si12, si13, si14, si15)

## 8 means they didnt know which answer they would choose
risk$si01[ risk$si01 == 8] = NA
risk$si02[ risk$si02 == 8] = NA
risk$si03[ risk$si03 == 8] = NA
risk$si04[ risk$si04 == 8] = NA
risk$si05[ risk$si05 == 8] = NA
risk$si11[ risk$si11 == 8] = NA
risk$si12[ risk$si12 == 8] = NA
risk$si13[ risk$si13 == 8] = NA
risk$si14[ risk$si14 == 8] = NA
risk$si15[ risk$si15 == 8] = NA

## calculate a risk score for risk game A 
# (5 = gamble averse, Ordinalskala : 1 = risk loving, 4 = risk averse)
risk$riskA = ifelse(risk$si01 == 1 &amp; risk$si02 == 1, 5,
             ifelse(risk$si01 == 2 &amp; risk$si03 == 1 &amp; risk$si04 == 1, 4,
             ifelse(risk$si01 == 2 &amp; risk$si03 == 1 &amp; risk$si04 == 2, 3,
             ifelse(risk$si01 == 2 &amp; risk$si03 == 2 &amp; risk$si05 == 1, 2,
             ifelse(risk$si01 == 2 &amp; risk$si03 == 2 &amp; risk$si05 == 2, 1,
             NA)))))
qplot(risk$riskA[risk$riskA != 5])</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 3882 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="1_data_import_files/figure-html/select%20risk%20taking%20data-1.png" width="672" /></p>
<pre class="r"><code>## calculate a risk score for risk game B 
# (5 = gamble averse, Ordinalskala : 1 = risk loving, 4 = risk averse)
risk$riskB = ifelse(risk$si11 == 2 &amp; risk$si12 == 1, 5,
             ifelse(risk$si11 == 1 &amp; risk$si13 == 1 &amp; risk$si14 == 1, 4,
             ifelse(risk$si11 == 1 &amp; risk$si13 == 1 &amp; risk$si14 == 2, 3,
             ifelse(risk$si11 == 1 &amp; risk$si13 == 2 &amp; risk$si15 == 1, 2,
             ifelse(risk$si11 == 1 &amp; risk$si13 == 2 &amp; risk$si15 == 2, 1,
             NA)))))
qplot(risk$riskB[risk$riskB !=5])</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 2084 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="1_data_import_files/figure-html/select%20risk%20taking%20data-2.png" width="672" /></p>
<pre class="r"><code>psych::alpha(data.frame(risk %&gt;% select(riskA, riskB)), check.keys = T)</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(risk %&gt;% select(riskA, riskB)), check.keys = T)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean   sd
##       0.29      0.33     0.2       0.2 0.5 0.0067  3.6 0.96
## 
##  lower alpha upper     95% confidence boundaries
## 0.28 0.29 0.3 
## 
##  Reliability if an item is dropped:
##       raw_alpha std.alpha G6(smc) average_r S/N alpha se
## riskA       0.2       0.2    0.04       0.2  NA       NA
## riskB       0.2       0.2    0.04       0.2  NA       NA
## 
##  Item statistics 
##           n raw.r std.r r.cor r.drop mean   sd
## riskA 27780  0.90  0.77  0.35    0.2  3.4 1.51
## riskB 29578  0.64  0.77  0.35    0.2  3.9 0.82
## 
## Non missing response frequency for each item
##          1    2    3    4    5 miss
## riskA 0.19 0.12 0.11 0.24 0.33 0.12
## riskB 0.04 0.02 0.11 0.70 0.13 0.07</code></pre>
</div>
<div id="educational-attainment" class="section level2">
<h2>Educational Attainment</h2>
<pre class="r"><code># Select, rename and mutate data
ea = b3a_dl1 %&gt;%
  select(pidlink, dl04, dl06, dl07, dl07a, dl07aa) %&gt;%
  rename(pidlink = pidlink, attended_school = dl04, highest_education = dl06,
         highest_grade=dl07, currently_attending_school = dl07a, hours_in_class = dl07aa) %&gt;%
  mutate(attended_school = as.factor(ifelse(attended_school == 8, NA,
                                            ifelse(attended_school == 1, &quot;yes&quot;,
                                                   ifelse(attended_school == 3, &quot;no&quot;,
                                                          attended_school)))),
         highest_education = as.factor(ifelse(highest_education == 2 | highest_education == 72,
                                                     &quot;Elementary&quot;,
                                                     ifelse(highest_education == 3 |
                                                              highest_education == 4 |
                                                              highest_education == 73,
                                                            &quot;Junior High&quot;,
                                                            ifelse(highest_education == 5 |
                                                                     highest_education == 6 |
                                                                     highest_education == 74,
                                                                   &quot;Senior High&quot;,
                                                                   ifelse(highest_education == 60 |
                                                                            highest_education == 61 |
                                                                            highest_education == 62 |
                                                                            highest_education == 63 |
                                                                            highest_education == 13,
                                                                          &quot;University&quot;, NA))))),#&quot;other&quot; = NA
         highest_grade = ifelse(highest_grade == 98, NA,
                                ifelse(highest_grade == 99, NA, highest_grade)),
         currently_attending_school = as.factor(ifelse(currently_attending_school == 1, &quot;yes&quot;,
                                                       ifelse(currently_attending_school == 3, &quot;no&quot;, NA))),
         hours_in_class = ifelse(hours_in_class == 99, NA,
                                 ifelse(hours_in_class == 98, NA, hours_in_class)))

## Create variable that includes years of education (highest_education.highest_grade) as a numeric variable
ea = ea %&gt;%
  mutate(years_of_education_factor = as.factor(str_c(highest_education, &quot;.&quot;, highest_grade)),
         years_of_education = as.numeric(ifelse(attended_school == &quot;no&quot;, 0,
                                         ifelse(years_of_education_factor == &quot;Elementary.0&quot;, 0.5,
                                         ifelse(years_of_education_factor == &quot;Elementary.1&quot;, 1,
                                         ifelse(years_of_education_factor == &quot;Elementary.2&quot;, 2,
                                         ifelse(years_of_education_factor == &quot;Elementary.3&quot;, 3,
                                         ifelse(years_of_education_factor == &quot;Elementary.4&quot;, 4,
                                         ifelse(years_of_education_factor == &quot;Elementary.5&quot;, 5,
                                         ifelse(years_of_education_factor == &quot;Elementary.6&quot;, NA,
                                         ifelse(years_of_education_factor == &quot;Elementary.7&quot;, 6,
                                         ifelse(years_of_education_factor == &quot;Junior High.0&quot;, 6.5,
                                         ifelse(years_of_education_factor == &quot;Junior High.1&quot;, 7,
                                         ifelse(years_of_education_factor == &quot;Junior High.2&quot;, 8,
                                         ifelse(years_of_education_factor == &quot;Junior High.3&quot;, NA,
                                         ifelse(years_of_education_factor == &quot;Junior High.7&quot;, 9,
                                         ifelse(years_of_education_factor == &quot;Senior High.0&quot;, 9.5,
                                         ifelse(years_of_education_factor == &quot;Senior High.1&quot;, 10,
                                         ifelse(years_of_education_factor == &quot;Senior High.2&quot;, 11,
                                         ifelse(years_of_education_factor == &quot;Senior High.3&quot;, NA,
                                         ifelse(years_of_education_factor == &quot;Senior High.7&quot;, 12,
                                         ifelse(years_of_education_factor == &quot;University.0&quot;, 12.5,
                                         ifelse(years_of_education_factor == &quot;University.1&quot;, 13,
                                         ifelse(years_of_education_factor == &quot;University.2&quot;, 14,
                                         ifelse(years_of_education_factor == &quot;University.3&quot;, 15,
                                         ifelse(years_of_education_factor == &quot;University.4&quot;, 16,
                                         ifelse(years_of_education_factor == &quot;University.5&quot;, 17,
                                         ifelse(years_of_education_factor == &quot;University.6&quot;, NA,
                                         ifelse(years_of_education_factor == &quot;University.7&quot;, 18,
                                                NA)))))))))))))))))))))))))))))
qplot(ea$years_of_education)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 646 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="1_data_import_files/figure-html/select%20educational%20attainment%20data-1.png" width="672" /></p>
</div>
<div id="ebtanasuanun-score" class="section level2">
<h2>EBTANAS/UAN/UN Score</h2>
<pre class="r"><code>EBTANAS_long = b3a_dl3 %&gt;%
  select(pidlink, &quot;Level_of_schooling&quot; = dl3type, &quot;Type_of_test&quot; = dl16c1, &quot;Indonesia_score&quot; = dl16db,
         &quot;English_score&quot; = dl16dc, &quot;Math_score&quot; = dl16dd, &quot;Total_score&quot; = dl16e) %&gt;%
  mutate(Level_of_schooling = ifelse(Level_of_schooling == 1, &quot;Elementary&quot;,
                                     ifelse(Level_of_schooling == 2, &quot;Junior High&quot;,
                                            ifelse(Level_of_schooling == 3, &quot;Senior High&quot;, NA))),
         Type_of_test = ifelse(Type_of_test == 1, &quot;EBTANAS&quot;,
                               ifelse(Type_of_test == 2, &quot;UAN/UN&quot;, NA))) %&gt;%
  filter(!is.na(Indonesia_score) | !is.na(English_score) | !is.na(Math_score) | !is.na(Total_score))
  # remove people with no EBTANAS Information

#Wrangle Data
EBTANAS_Elemenatry = EBTANAS_long %&gt;%
  filter(Level_of_schooling == &quot;Elementary&quot;) %&gt;%
  rename(&quot;Indonesia_score_elementary&quot; = Indonesia_score, &quot;English_score_elementary&quot; = English_score,
         &quot;Math_score_elemenatry&quot; = Math_score, &quot;Total_score_elemenatry&quot; = Total_score,
         &quot;Type_of_test_elementary&quot; = Type_of_test) %&gt;%
  select(-Level_of_schooling)

EBTANAS_Junior_High = EBTANAS_long %&gt;%
  filter(Level_of_schooling == &quot;Junior High&quot;) %&gt;%
  rename(&quot;Indonesia_score_Junior_High&quot; = Indonesia_score, &quot;English_score_Junior_High&quot; = English_score,
         &quot;Math_score_Junior_High&quot; = Math_score, &quot;Total_score_Junior_High&quot; = Total_score,
         &quot;Type_of_test_Junior_High&quot; = Type_of_test)%&gt;%
  select(-Level_of_schooling)

EBTANAS_Senior_High = EBTANAS_long %&gt;%
  filter(Level_of_schooling == &quot;Senior High&quot;) %&gt;%
  rename(&quot;Indonesia_score_Senior_High&quot; = Indonesia_score, &quot;English_score_Senior_High&quot; = English_score,
         &quot;Math_score_Senior_High&quot; = Math_score, &quot;Total_score_Senior_High&quot; = Total_score,
         &quot;Type_of_test_Senior_High&quot; = Type_of_test)%&gt;%
  select(-Level_of_schooling)

EBTANAS = full_join(EBTANAS_Elemenatry, EBTANAS_Junior_High, by = &quot;pidlink&quot;)
EBTANAS = full_join(EBTANAS, EBTANAS_Senior_High, by = &quot;pidlink&quot;) 

table(is.na(EBTANAS$Total_score_elemenatry))</code></pre>
<table style="width:22%;">
<colgroup>
<col width="11%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">FALSE</th>
<th align="center">TRUE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">4275</td>
<td align="center">2002</td>
</tr>
</tbody>
</table>
<pre class="r"><code>table(is.na(EBTANAS$Total_score_Junior_High))</code></pre>
<table style="width:22%;">
<colgroup>
<col width="11%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">FALSE</th>
<th align="center">TRUE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">3911</td>
<td align="center">2366</td>
</tr>
</tbody>
</table>
<pre class="r"><code>table(is.na(EBTANAS$Total_score_Senior_High))</code></pre>
<table style="width:22%;">
<colgroup>
<col width="11%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">FALSE</th>
<th align="center">TRUE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">2459</td>
<td align="center">3818</td>
</tr>
</tbody>
</table>
<pre class="r"><code>EBTANAS = EBTANAS %&gt;%
  mutate(Total_score_highest = Total_score_elemenatry,
         Total_score_highest = ifelse(!is.na(Total_score_Senior_High), Total_score_Senior_High,
                                      ifelse(!is.na(Total_score_Junior_High), Total_score_Junior_High,
                                             Total_score_highest)),
         Total_score_highest_type = ifelse(!is.na(Total_score_Senior_High), &quot;Senior High&quot;,
                                      ifelse(!is.na(Total_score_Junior_High), &quot;Junior High&quot;,
                                             ifelse(!is.na(Total_score_elemenatry), &quot;Elementary&quot;,
                                                           NA))),
         Math_score_highest = Math_score_elemenatry,
         Math_score_highest = ifelse(!is.na(Math_score_Senior_High), Math_score_Senior_High,
                                      ifelse(!is.na(Math_score_Junior_High), Math_score_Junior_High,
                                             Math_score_highest)),
         Math_score_highest_type = ifelse(!is.na(Math_score_Senior_High), &quot;Senior High&quot;,
                                      ifelse(!is.na(Math_score_Junior_High), &quot;Junior High&quot;,
                                             ifelse(!is.na(Math_score_elemenatry), &quot;Elementary&quot;,
                                                           NA))))
table(is.na(EBTANAS$Total_score_highest))</code></pre>
<table style="width:22%;">
<colgroup>
<col width="11%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">FALSE</th>
<th align="center">TRUE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">5801</td>
<td align="center">476</td>
</tr>
</tbody>
</table>
<pre class="r"><code>table(is.na(EBTANAS$Math_score_highest))</code></pre>
<table style="width:22%;">
<colgroup>
<col width="11%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">FALSE</th>
<th align="center">TRUE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">5792</td>
<td align="center">485</td>
</tr>
</tbody>
</table>
<pre class="r"><code>table(EBTANAS$Total_score_highest_type)</code></pre>
<table style="width:57%;">
<colgroup>
<col width="18%" />
<col width="19%" />
<col width="19%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Elementary</th>
<th align="center">Junior High</th>
<th align="center">Senior High</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1042</td>
<td align="center">2300</td>
<td align="center">2459</td>
</tr>
</tbody>
</table>
<pre class="r"><code>table(EBTANAS$Math_score_highest_type)</code></pre>
<table style="width:57%;">
<colgroup>
<col width="18%" />
<col width="19%" />
<col width="19%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Elementary</th>
<th align="center">Junior High</th>
<th align="center">Senior High</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1066</td>
<td align="center">2270</td>
<td align="center">2456</td>
</tr>
</tbody>
</table>
<pre class="r"><code>qplot(EBTANAS$Total_score_highest)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 476 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="1_data_import_files/figure-html/EBTANAS/UAN/UN%20Score-1.png" width="672" /></p>
<pre class="r"><code>qplot(EBTANAS$Math_score_highest)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 485 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="1_data_import_files/figure-html/EBTANAS/UAN/UN%20Score-2.png" width="672" /></p>
<pre class="r"><code>## Working while still in school
child_labour = b3a_dl4 %&gt;%
  select(pidlink, &quot;Level_of_schooling&quot; = dl4type, &quot;Worked&quot; = dl15, &quot;Missed_school&quot; = dl14a) %&gt;%
  mutate(Level_of_schooling = ifelse(Level_of_schooling == 1, &quot;Elementary&quot;,
                                     ifelse(Level_of_schooling == 2, &quot;JuniorHigh&quot;,
                                            ifelse(Level_of_schooling == 3, &quot;SeniorHigh&quot;,
                                                   ifelse(Level_of_schooling == 4, &quot;University&quot;, NA)))),
         Worked = ifelse(Worked == 1, 1,
                         ifelse(Worked == 3, 0, NA)),
         Missed_school = ifelse(Missed_school == 1, 1,
                         ifelse(Missed_school == 3, 0, NA)))

# Wrangle Data
child_labour_work = child_labour %&gt;%
  select(pidlink, Level_of_schooling, Worked) %&gt;%
  spread(., Level_of_schooling, Worked) %&gt;%
  rename(&quot;Elementary_worked&quot; = Elementary, &quot;Junior_high_worked&quot; = JuniorHigh, 
         &quot;Senior_high_worked&quot; = SeniorHigh, &quot;University_worked&quot; = University) %&gt;%
  mutate(total_worked = ifelse(Elementary_worked == 1 | Junior_high_worked == 1 |
                                 Senior_high_worked == 1 | University_worked == 1, 1, 0),
         total_worked  = ifelse(is.na(total_worked), 0, total_worked))

child_labour_missed = child_labour %&gt;%
  select(pidlink, Level_of_schooling, Missed_school) %&gt;%
  spread(., Level_of_schooling, Missed_school) %&gt;%
  rename(&quot;Elementary_missed&quot; = Elementary, &quot;Junior_high_missed&quot; = JuniorHigh, 
         &quot;Senior_high_missed&quot; = SeniorHigh, &quot;University_missed&quot; = University) %&gt;%
  mutate(total_missed = ifelse(Elementary_missed == 1 | Junior_high_missed == 1 |
                                 Senior_high_missed == 1 | University_missed == 1, 1, 0))

child_labour = full_join(child_labour_work, child_labour_missed, by = &quot;pidlink&quot;)
table(child_labour$total_missed)</code></pre>
<table style="width:19%;">
<colgroup>
<col width="9%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">0</th>
<th align="center">1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">2608</td>
<td align="center">1017</td>
</tr>
</tbody>
</table>
<pre class="r"><code>table(child_labour$total_worked)</code></pre>
<table style="width:19%;">
<colgroup>
<col width="9%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">0</th>
<th align="center">1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">9379</td>
<td align="center">3498</td>
</tr>
</tbody>
</table>
</div>
<div id="job-information" class="section level2">
<h2>Job Information</h2>
<pre class="r"><code>job = b3a_tk2 %&gt;% select(pidlink, &quot;Category&quot; = tk24a, &quot;Sector&quot; = tk19ab, &quot;wage_last_month&quot; = tk25a1,
                         &quot;wage_last_year&quot; = tk25a2) %&gt;%
  mutate(Category = ifelse(Category == 1 | Category == 2 | Category == 3, &quot;Self-employed&quot;,
                           ifelse(Category == 4, &quot;Government worker&quot;,
                                  ifelse(Category == 5, &quot;Private worker&quot;,
                                         ifelse(Category == 7, &quot;Casual worker in agriculture&quot;,
                                                ifelse(Category == 8, &quot;Casual worker not in agriculture&quot;,
                                                       ifelse(Category == 6, &quot;Unpaid family worker&quot;,
                                                              NA)))))),
         Self_employed = ifelse(Category == &quot;Self-employed&quot;, 1,
                                ifelse(is.na(Category), NA, 0)),
         Sector = ifelse(Sector == 1, &quot;Agriculture, forestry, fishing and hunting&quot;,
                  ifelse(Sector == 2, &quot;Mining and quarrying&quot;,
                  ifelse(Sector == 3, &quot;Manufacturing&quot;,
                  ifelse(Sector == 4, &quot;Electricity, gas, water&quot;,
                  ifelse(Sector == 5, &quot;Construction&quot;,
                  ifelse(Sector == 6, &quot;Wholesale, retail, restaurants and hotels&quot;,
                  ifelse(Sector == 7, &quot;Transportation, storage and communications&quot;,
                  ifelse(Sector == 8, &quot;Finance, insurance, real estate and business services&quot;,
                  ifelse(Sector == 9, &quot;Social services&quot;,
                  ifelse(Sector == 10, &quot;Activities that cannot be classified&quot;, NA)))))))))),
         wage_last_month = ifelse(wage_last_month == 8, NA, wage_last_month),
         wage_last_year = ifelse(wage_last_year == 8, NA, wage_last_year))

table(job$Category)</code></pre>
<table>
<colgroup>
<col width="24%" />
<col width="17%" />
<col width="15%" />
<col width="13%" />
<col width="12%" />
<col width="17%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Casual worker in agriculture</th>
<th align="center">Casual worker not in agriculture</th>
<th align="center">Government worker</th>
<th align="center">Private worker</th>
<th align="center">Self-employed</th>
<th align="center">Unpaid family worker</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">830</td>
<td align="center">1888</td>
<td align="center">1616</td>
<td align="center">8364</td>
<td align="center">9194</td>
<td align="center">2589</td>
</tr>
</tbody>
</table>
<pre class="r"><code>table(job$Sector)</code></pre>
<table>
<colgroup>
<col width="14%" />
<col width="6%" />
<col width="11%" />
<col width="13%" />
<col width="7%" />
<col width="10%" />
<col width="8%" />
<col width="13%" />
<col width="14%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Agriculture, forestry, fishing and hunting</th>
<th align="center">Construction</th>
<th align="center">Electricity, gas, water</th>
<th align="center">Finance, insurance, real estate and business services</th>
<th align="center">Manufacturing</th>
<th align="center">Mining and quarrying</th>
<th align="center">Social services</th>
<th align="center">Transportation, storage and communications</th>
<th align="center">Wholesale, retail, restaurants and hotels</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">5940</td>
<td align="center">29</td>
<td align="center">394</td>
<td align="center">5003</td>
<td align="center">5469</td>
<td align="center">839</td>
<td align="center">1510</td>
<td align="center">787</td>
<td align="center">3754</td>
</tr>
</tbody>
</table>
<pre class="r"><code>qplot(job$wage_last_month)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 11970 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="1_data_import_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<pre class="r"><code>summary(job$wage_last_month)</code></pre>
<table style="width:92%;">
<colgroup>
<col width="9%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="16%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Min.</th>
<th align="center">1st Qu.</th>
<th align="center">Median</th>
<th align="center">Mean</th>
<th align="center">3rd Qu.</th>
<th align="center">Max.</th>
<th align="center">NA’s</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">550000</td>
<td align="center">1250000</td>
<td align="center">1923793</td>
<td align="center">2400000</td>
<td align="center">999999997</td>
<td align="center">11970</td>
</tr>
</tbody>
</table>
<pre class="r"><code>x = job %&gt;% filter(wage_last_month &lt; 5000000)
qplot(x$wage_last_month)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="1_data_import_files/figure-html/unnamed-chunk-5-2.png" width="672" /></p>
<pre class="r"><code>qplot(job$wage_last_year)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 12064 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="1_data_import_files/figure-html/unnamed-chunk-5-3.png" width="672" /></p>
<pre class="r"><code>summary(job$wage_last_year)</code></pre>
<table style="width:96%;">
<colgroup>
<col width="9%" />
<col width="13%" />
<col width="15%" />
<col width="15%" />
<col width="15%" />
<col width="16%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Min.</th>
<th align="center">1st Qu.</th>
<th align="center">Median</th>
<th align="center">Mean</th>
<th align="center">3rd Qu.</th>
<th align="center">Max.</th>
<th align="center">NA’s</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">3960000</td>
<td align="center">12000000</td>
<td align="center">20680463</td>
<td align="center">27000000</td>
<td align="center">999999997</td>
<td align="center">12064</td>
</tr>
</tbody>
</table>
<pre class="r"><code>x = job %&gt;% filter(wage_last_year &lt; 50000000)
qplot(x$wage_last_year)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="1_data_import_files/figure-html/unnamed-chunk-5-4.png" width="672" /></p>
</div>
<div id="health-information---smoking-behavior" class="section level2">
<h2>Health Information - Smoking Behavior</h2>
<pre class="r"><code>smoking = b3b_km %&gt;%
  select(pidlink, &quot;ever_smoked&quot; = km01a, &quot;still_smoking&quot; = km04, &quot;amount&quot; = km08,
         &quot;money_spent_smoking&quot; = km09, &quot;age_first_smoke&quot; = km10) %&gt;%
  mutate(ever_smoked = ifelse(ever_smoked == 1, 1, 0),
         still_smoking = ifelse(still_smoking == 1, 1, 0),
         amount = ifelse(amount == 8, NA,
                         ifelse(amount == 98, NA, amount)),
         amount_still_smokers = ifelse(still_smoking == 1, amount, NA))</code></pre>
</div>
<div id="merge-data" class="section level2">
<h2>Merge data</h2>
<pre class="r"><code>### Merge all data for people with birthorder informations
alldata_birthorder = left_join(alldata_pregnancy, iq, by = &quot;pidlink&quot;)
alldata_birthorder = left_join(alldata_birthorder, pers, by = &quot;pidlink&quot;)</code></pre>
<pre><code>## Warning: Column `pidlink` has different attributes on LHS and RHS of join</code></pre>
<pre class="r"><code>alldata_birthorder = left_join(alldata_birthorder, risk, by = &quot;pidlink&quot;)
alldata_birthorder = left_join(alldata_birthorder, ea, by = &quot;pidlink&quot;)
alldata_birthorder = left_join(alldata_birthorder, EBTANAS, by = &quot;pidlink&quot;)
alldata_birthorder = left_join(alldata_birthorder, child_labour, by = &quot;pidlink&quot;)</code></pre>
<pre><code>## Warning: Column `pidlink` has different attributes on LHS and RHS of join</code></pre>
<pre class="r"><code>alldata_birthorder = left_join(alldata_birthorder, job, by = &quot;pidlink&quot;)
alldata_birthorder = left_join(alldata_birthorder, smoking, by = &quot;pidlink&quot;)


alldata = left_join(individuals_unchanged, iq, by = &quot;pidlink&quot;)
alldata = left_join(alldata, pers, by = &quot;pidlink&quot;)</code></pre>
<pre><code>## Warning: Column `pidlink` has different attributes on LHS and RHS of join</code></pre>
<pre class="r"><code>alldata = left_join(alldata, risk, by = &quot;pidlink&quot;)
alldata = left_join(alldata, ea, by = &quot;pidlink&quot;)
alldata = left_join(alldata, EBTANAS, by = &quot;pidlink&quot;)
alldata = left_join(alldata, child_labour, by = &quot;pidlink&quot;)</code></pre>
<pre><code>## Warning: Column `pidlink` has different attributes on LHS and RHS of join</code></pre>
<pre class="r"><code>alldata = left_join(alldata, job, by = &quot;pidlink&quot;)
alldata = left_join(alldata, smoking, by = &quot;pidlink&quot;)</code></pre>
</div>
<div id="save-data" class="section level2">
<h2>Save data</h2>
<p>for future analyses</p>
<pre class="r"><code>alldata_birthorder = alldata_birthorder %&gt;% ungroup()
alldata = alldata %&gt;% ungroup()
pregnancy = pregnancy %&gt;% ungroup()
iq = iq %&gt;% ungroup()
hdataset = alldata_birthorder

saveRDS(hdataset, file = &quot;data/hdataset.rds&quot;)
saveRDS(alldata_birthorder, file = &quot;data/alldata_birthorder.rds&quot;)
saveRDS(alldata, file = &quot;data/alldata.rds&quot;)
saveRDS(pregnancy, file = &quot;data/pregnancy.rds&quot;)
saveRDS(iq, file = &quot;data/iq.rds&quot;)</code></pre>
</div>
</div>

<div id="rmd-source-code">LS0tCm91dHB1dDoKICBodG1sX2RvY3VtZW50OgogICAgY29kZV9mb2xkaW5nOiAic2hvdyIKZWRpdG9yX29wdGlvbnM6IAogIGNodW5rX291dHB1dF90eXBlOiBjb25zb2xlCi0tLQoKIyAgPHNwYW4gc3R5bGU9ImNvbG9yOiNGQzhENjIiPkRhdGEgV3JhbmdsaW5nPC9zcGFuPiB7LnRhYnNldH0KCiMjIEhlbHBlcgpgYGB7ciBoZWxwZXJ9CnNvdXJjZSgiMF9oZWxwZXJzLlIiKQpgYGAKCgojIyBJbXBvcnQgZGF0YSB7LmFjdGl2ZX0KCkFsbCBkYXRhIGlzIHJldHJpZXZlZCBmcm9tIHRoZSBbUkFORCBmb3VuZGF0aW9uXShodHRwOi8vd3d3LnJhbmQub3JnL2xhYm9yL0ZMUy9JRkxTLmh0bWwpIApgYGB7ciBJbXBvcnQgZGF0YX0KIyMjIEluZm9ybWF0aW9ucyBhYm91dCBpbmRpdmlkdWFscyBsaXZpbmcgaW4gdGhlIGhvdXNlaG9sZCBpbiAyMDE0LzIwMTUKIyMgQWxsIEluZGl2aWR1YWxzIGxpdmluZyBpbiB0aGUgaG91c2Vob2xkCmJrX2FyMSA9IHJlYWRfZHRhKCJkYXRhL2hoMTRfYWxsX2R0YS9ia19hcjEuZHRhIikgIyBCb29rIEssIFNlY3Rpb24gYXIKIyBjb21wdXRlIGZhdGhlciBwaWRsaW5rCmJrX2FyMSA9IGxlZnRfam9pbihia19hcjEsIGJrX2FyMSAlPiUgc2VsZWN0KGhoaWQxNF85LCBwaWQxNCwgcGlkbGluaykgJT4lIHJlbmFtZShhcjEwID0gcGlkMTQsIGZhdGhlcl9waWRsaW5rID0gcGlkbGluayksIGJ5ID0gYygiaGhpZDE0XzkiLCAiYXIxMCIpKQojIGNvbXB1dGUgbW90aGVyIHBpZGxpbmsKYmtfYXIxID0gbGVmdF9qb2luKGJrX2FyMSwgYmtfYXIxICU+JSBzZWxlY3QoaGhpZDE0XzksIHBpZDE0LCBwaWRsaW5rKSAlPiUgcmVuYW1lKGFyMTEgPSBwaWQxNCwgbW90aGVyX3BpZGxpbmsgPSBwaWRsaW5rKSwgYnkgPSBjKCJoaGlkMTRfOSIsICJhcjExIikpCgojIyMgSW5mb3JtYXRpb25zIGZyb20gSUZMUyB3YXZlIDUgdG8gbGluayBkYXRhIHRvIGVhcmxpZXIgd2F2ZXM6CnB0cmFjayA9IHJlYWRfZHRhKCJkYXRhL2hoMTRfYWxsX2R0YS9wdHJhY2suZHRhIikgIyBUcmFja2luZyBpbmZvcm1hdGlvbnMKCiMjIyBQcmVnbmFuY3kgSW5mb3JtYXRpb25zIGZyb20gbW90aGVyCiMjIFdhdmUgNSAtIDIwMTQKdzVfcHJlZ25hbmN5ID0gcmVhZF9kdGEoImRhdGEvaGgxNF9hbGxfZHRhL2I0X2NoMS5kdGEiKSAjIEJvb2sgNCwgU2VjdGlvbiBjaAojIyBXYXZlIDQgLSAyMDA3Cnc0X3ByZWduYW5jeSA9IHJlYWRfZHRhKCJkYXRhL2hoMDdfYWxsX2R0YS9iNF9jaDEuZHRhIikgIyBCb29rIDQsIFNlY3Rpb24gY2gKIyMgV2F2ZSAzIC0gMjAwMAp3M19wcmVnbmFuY3kgPSByZWFkX2R0YSgiZGF0YS9oaDAwX2FsbF9kdGEvYjRfY2gxLmR0YSIpICMgQm9vayA0LCBTZWN0aW9uIGNoCiMjIFdhdmUgMiAtIDE5OTcKdzJfcHJlZ25hbmN5ID0gcmVhZF9kdGEoImRhdGEvaGg5N2R0YS9iNF9jaDEuZHRhIikgIyBCb29rIDQsIFNlY3Rpb24gY2gKIyMgV2F2ZSAxIC0gMTk5Mwp3MV9wcmVnbmFuY3kgPSByZWFkX2R0YSgiZGF0YS9oaDkzZHRhL2J1azRjaDEuZHRhIikgIyBCb29rIDQsIFNlY3Rpb24gY2gKCiMjIyBNYXJyaWFnZSBpbmZvcm1hdGlvbiBmcm9tIG1vdGhlcgojIyBXYXZlIDUgLSAyMDE0Cnc1X21hcnJpYWdlPSByZWFkX2R0YSgiZGF0YS9oaDE0X2FsbF9kdGEvYjRfa3czLmR0YSIpICMgQm9vayA0LCBTZWN0aW9uIGt3MwojIyBXYXZlIDQgLSAyMDA3Cnc0X21hcnJpYWdlID0gcmVhZF9kdGEoImRhdGEvaGgwN19hbGxfZHRhL2I0X2t3Mi5kdGEiKSAjIEJvb2sgNCwgU2VjdGlvbiBrdzIKIyMgV2F2ZSAzIC0gMjAwMAp3M19tYXJyaWFnZSA9IHJlYWRfZHRhKCJkYXRhL2hoMDBfYWxsX2R0YS9iNF9rdzMuZHRhIikgIyBCb29rIDQsIFNlY3Rpb24ga3czCiMjIFdhdmUgMiAtIDE5OTcKdzJfbWFycmlhZ2UgPSByZWFkX2R0YSgiZGF0YS9oaDk3ZHRhL2I0X2t3Mi5kdGEiKSAjIEJvb2sgNCwgU2VjdGlvbiBrdzIKIyMgV2F2ZSAxIC0gMTk5Mwp3MV9tYXJyaWFnZSA9IHJlYWRfZHRhKCJkYXRhL2hoOTNkdGEvYnVrNGt3Mi5kdGEiKSAjIEJvb2sgNCwgU2VjdGlvbiBrdzIKCiMjIEFkZGl0aW9uYWwgbWFycmlhZ2UgaW5mb3JtYXRpb24gZnJvbSBtb3RoZXIKIyBXYXZlIDUgLSAyMDE0Cnc1X21hcnJpYWdlX2FkZGl0aW9uYWwgPSByZWFkX2R0YSgiZGF0YS9oaDE0X2FsbF9kdGEvYjRfY292LmR0YSIpICMgQm9vayA0LCBTZWN0aW9uIGNvdgojIFdhdmUgNCAtIDIwMDcKdzRfbWFycmlhZ2VfYWRkaXRpb25hbCA9IHJlYWRfZHRhKCJkYXRhL2hoMDdfYWxsX2R0YS9iNF9jb3YuZHRhIikgIyBCb29rIDQsIFNlY3Rpb24gY292CiMgV2F2ZSAzIC0gMjAwMAp3M19tYXJyaWFnZV9hZGRpdGlvbmFsID0gcmVhZF9kdGEoImRhdGEvaGgwMF9hbGxfZHRhL2I0X2Nvdi5kdGEiKSAjIEJvb2sgNCwgU2VjdGlvbiBjb3YKIyBXYXZlIDIgLSAxOTk3CncyX21hcnJpYWdlX2FkZGl0aW9uYWwgPSByZWFkX2R0YSgiZGF0YS9oaDk3ZHRhL2I0X2Nvdi5kdGEiKSAjIEJvb2sgNCwgU2VjdGlvbiBjb3YKIyBXYXZlIDEgLSAxOTkzCncxX21hcnJpYWdlX2FkZGl0aW9uYWwgPSByZWFkX2R0YSgiZGF0YS9oaDkzZHRhL2J1a2thcjIuZHRhIikgIyBCb29rIEssIFNlY3Rpb24gYXIsIGhvdXNlaG9sZCByb2FzdGVyCgojIyMgSVEgSW5mb3JtYXRpb24KZWtfZWsyID0gcmVhZF9kdGEoImRhdGEvaGgxNF9hbGxfZHRhL2VrX2VrMi5kdGEiKSAjIEJvb2sgZWsyOiA+MTUgeWVhcnMKZWtfZWsxID0gcmVhZF9kdGEoImRhdGEvaGgxNF9hbGxfZHRhL2VrX2VrMS5kdGEiKSAjIEJvb2sgZWsxOiA8MTUgeWVhcnMKIyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIChjb3VudGluZyBiYWNrd2FyZHMsIGFkYXB0aXZlIHRlc3RpbmcpIGZvciBhZHVsdHMKYjNiX2NvYiA9IHJlYWRfZHRhKCJkYXRhL2hoMTRfYWxsX2R0YS9iM2JfY29iLmR0YSIpICMgQm9vayAzYiwgU2VjdGlvbiBjb2IKYjNiX2NvMSA9IHJlYWRfZHRhKCJkYXRhL2hoMTRfYWxsX2R0YS9iM2JfY28xLmR0YSIpICMgQm9vayAzYiwgU2VjdGlvbiBjbzEKIyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGZyb20gZWFybGllciB3YXZlcwpiZWtfZWsxID0gcmVhZF9kdGEoImRhdGEvaGgwN19hbGxfZHRhL2Jla19lazEuZHRhIikgIyBJbnRlbGxpZ2VuY2UgaW5mb3JtYXRpb24gZnJvbSB3YXZlIDQgKDIwMDcpOiA3LTE0CmJla19lazIgPSByZWFkX2R0YSgiZGF0YS9oaDA3X2FsbF9kdGEvYmVrX2VrMi5kdGEiKSAjIEludGVsbGlnZW5jZSBpbmZvIGZyb20gd2F2ZSA0ICgyMDA3KTogMTUgLSAyNApiZWswMCA9IHJlYWRfZHRhKCJkYXRhL2hoMDBfYWxsX2R0YS9iZWsuZHRhIikgIyBJbnRlbGxpZ2VuY2UgaW5mb3JtYXRpb24gZnJvbSB3YXZlIDMgKDIwMDApCmJlazk3ID0gcmVhZF9kdGEoImRhdGEvaGg5N2R0YS9iZWsuZHRhIikgI0ludGVsbGlnZW5jZSBpbmZvcm1hdGlvbiBmcm9tIHdhdmUgMiAoMTk5NykKCgojIyMgUGVyc29uYWxpdHkgSW5mb3JtYXRpb24gKG9ubHkgZm9yIGFkdWx0cykKYjNiX3BzbiA9IHJlYWRfZHRhKCJkYXRhL2hoMTRfYWxsX2R0YS9iM2JfcHNuLmR0YSIpICMgQm9vayAzYiwgU2VjdGlvbiBwc24KCiMjIyBSaXNrIHRha2luZwpiM2Ffc2kgPSByZWFkX2R0YSgiZGF0YS9oaDE0X2FsbF9kdGEvYjNhX3NpLmR0YSIpICMgQm9vayAzYSwgU2VjdGlvbiBzaQoKIyMjIEVkdWNhdGlvbmFsIEF0dGFpbm1lbnQKYjNhX2RsMSA9IHJlYWRfZHRhKCJkYXRhL2hoMTRfYWxsX2R0YS9iM2FfZGwxLmR0YSIpICMgQm9vayAzYSwgU2VjdGlvbiBkbDEKCiMjIyBFQlRBTkFTL1VBTi9VTiBTY29yZQpiM2FfZGwzID0gcmVhZF9kdGEoImRhdGEvaGgxNF9hbGxfZHRhL2IzYV9kbDMuZHRhIikgIyBCb29rIDNhLCBTZWN0aW9uIGRsMwpiM2FfZGw0ID0gcmVhZF9kdGEoImRhdGEvaGgxNF9hbGxfZHRhL2IzYV9kbDQuZHRhIikgIyBCb29rIDNhLCBTZWN0aW9uIGRsNAoKIyMjIEpvYiBJbmZvcm1hdGlvbgpiM2FfdGsyID0gcmVhZF9kdGEoImRhdGEvaGgxNF9hbGxfZHRhL2IzYV90azIuZHRhIikgIyBCb29rIDNhLCBTZWN0aW9uIHRrMgoKIyMjIFNtb2tpbmcgYmVoYXZpb3IKYjNiX2ttID0gcmVhZF9kdGEoImRhdGEvaGgxNF9hbGxfZHRhL2IzYl9rbS5kdGEiKSAjIEJvb2sgM2IsIFNlY3Rpb24ga20KYGBgCgojIyBCaXJ0aCBvcmRlciBpbmZvcm1hdGlvbiB7LnRhYnNldH0KIyMjIEluZm9ybWF0aW9uIGFib3V0IHByZWduYW5jeQpgYGB7cn0KIyMgU2VsZWN0IGRhdGEKdzVfcHJlZ25hbmN5ID0gdzVfcHJlZ25hbmN5ICU+JSBzZWxlY3QocGlkbGluaywgY2gwNSwgY2gwNiwgY2gwNmEsIGNoMDgsIGNoMDlkYXksIGNoMDltdGgsIGNoMDl5ciwgY2gyNSkKdzRfcHJlZ25hbmN5ID0gdzRfcHJlZ25hbmN5ICU+JSBzZWxlY3QocGlkbGluaywgY2gwNSwgY2gwNiwgY2gwNmEsIGNoMDgsIGNoMDlkYXksIGNoMDltdGgsIGNoMDl5ciwgY2gyNSkKdzNfcHJlZ25hbmN5ID0gdzNfcHJlZ25hbmN5ICU+JSBzZWxlY3QocGlkbGluaywgY2gwNSwgY2gwNiwgY2gwNmEsIGNoMDgsIGNoMDlkYXksIGNoMDltdGgsIGNoMDl5ciwgY2gyNSkKdzJfcHJlZ25hbmN5ID0gdzJfcHJlZ25hbmN5ICU+JSBzZWxlY3QocGlkbGluaywgY2gwNSwgY2gwNiwgY2gwNmEsIGNoMDgsIGNoMDlkYXksIGNoMDltdGgsIGNoMDl5ciwgY2gyNSkKdzFfcHJlZ25hbmN5ID0gdzFfcHJlZ25hbmN5ICU+JSAKICBncm91cF9ieShwaWRsaW5rLCBjaDA0KSAlPiUgbXV0YXRlKGNoMDZhID0gaWZfZWxzZSghaXMubmEocGlkbGluaykgJiAhaXMubmEoY2gwNCksIGlmX2Vsc2UoIG4oKSA+IDEsIDEsIDMpLCA5KSkgJT4lCiAgdW5ncm91cCgpICU+JSAKICBzZWxlY3QocGlkbGluaywgY2gwNSwgY2gwNiwgY2gwNmEsIGNoMDgsIGNoMDlkYXksIGNoMDltdGgsIGNoMDl5ciwgY2gyNSkgJT4lIAojIEluIHRoZSBmaXJzdCB3YXZlIHRoZSB5ZWFyIGlzIG5hbWVkIHdyb25nCiAgbXV0YXRlKGNoMDl5ciA9IGlmZWxzZShjaDA5eXIgPD0gOTMsIGNoMDl5ciwgTkEpLAogICAgICAgICAgY2gwOXlyID0gYXMubnVtZXJpYyhzdHJfYygiMTkiLCBjaDA5eXIpKSkKCiMjIENvbWJpbmUgZGF0YQpwcmVnbmFuY3kgPSBiaW5kX3Jvd3ModzEgPSB3MV9wcmVnbmFuY3ksIHcyID0gdzJfcHJlZ25hbmN5LCB3MyA9IHczX3ByZWduYW5jeSwgdzQgPSB3NF9wcmVnbmFuY3ksIHc1ID0gdzVfcHJlZ25hbmN5LCAuaWQgPSAid2F2ZSIpCnByZWduYW5jeSA9IGNvZGVib29rOjpyZXNjdWVfYXR0cmlidXRlcyhwcmVnbmFuY3ksIHc1X3ByZWduYW5jeSkKCiMjIFJlbmFtZSBWYXJpYWJsZXMKcHJlZ25hbmN5ID0gcHJlZ25hbmN5ICU+JSByZW5hbWUoY2hyb25fb3JkZXJfYmlydGggPSBjaDA1LCBsaWZlYmlydGhzID0gY2gwNiwgbXVsdGlwbGVfYmlydGggPSBjaDA2YSwgZ2VuZGVyID0gY2gwOCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmlydGhfZGF5ID0gY2gwOWRheSwgYmlydGhfbW9udGggPSBjaDA5bXRoLCBiaXJ0aF95ZWFyID0gY2gwOXlyLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW90aGVyX3BpZGxpbmsgPSBwaWRsaW5rLCBhbGl2ZSA9IGNoMjUpICMgcHJlZ25hbmN5JGxpZmViaXJ0aHMgdmFsdWVzOiAxID0gc3RpbGwgcHJlZ25hbnQsIDIgPSBsaXZlYmlydGgsIDMgPSBzdGlsbCBiaXJ0aCwgNCA9IG1pc3NjYXJyaWFnZQoKIyMgU2V0IHZhbHVlcyBhcyBOQSB0aGF0IGFyZSBtaXNzaW5nCnByZWduYW5jeSA9IHByZWduYW5jeSAlPiUKICBtdXRhdGUoYmlydGhfZGF5ID0gaWZlbHNlKGJpcnRoX2RheT4zMSwgTkEsIGJpcnRoX2RheSksCiAgICAgICAgIGJpcnRoX21vbnRoID0gaWZlbHNlKGJpcnRoX21vbnRoPjEyLCBOQSwgYmlydGhfbW9udGgpLAogICAgICAgICBiaXJ0aF95ZWFyID0gaWZlbHNlKGJpcnRoX3llYXI+MjAxNiwgTkEsIGJpcnRoX3llYXIpLAogICAgICAgICBiaXJ0aF9kYXkgPSBpZmVsc2UoaXMubmFuKGJpcnRoX2RheSksIE5BLCBiaXJ0aF9kYXkpLAogICAgICAgICBiaXJ0aF9tb250aCA9IGlmZWxzZShpcy5uYW4oYmlydGhfbW9udGgpLCBOQSwgYmlydGhfbW9udGgpLAogICAgICAgICBiaXJ0aF95ZWFyID0gaWZlbHNlKGlzLm5hbihiaXJ0aF95ZWFyKSwgTkEsIGJpcnRoX3llYXIpLAogICAgICAgICBtdWx0aXBsZV9iaXJ0aCA9IGlmZWxzZShtdWx0aXBsZV9iaXJ0aCA9PSA5LCBOQSwgbXVsdGlwbGVfYmlydGgpLAogICAgICAgICBtdWx0aXBsZV9iaXJ0aCA9IGlmZWxzZShpcy5uYW4obXVsdGlwbGVfYmlydGgpLCBOQSwgbXVsdGlwbGVfYmlydGgpKQoKcHJlZ25hbmN5JG1vbnRoID0gcGFzdGUwKHByZWduYW5jeSRiaXJ0aF95ZWFyLCItIiwgaWZlbHNlKGlzLm5hKHByZWduYW5jeSRiaXJ0aF9tb250aCksICIwMSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRfbW9udGgocHJlZ25hbmN5JGJpcnRoX21vbnRoKSkpCgpwcmVnbmFuY3kgPSBwcmVnbmFuY3kgJT4lIAogIG11dGF0ZShiaXJ0aGRhdGUgPSBhbGxfYXZhaWxhYmxlX2luZm9fYmlydGhfZGF0ZShiaXJ0aF95ZWFyLCBiaXJ0aF9tb250aCwgYmlydGhfZGF5KSwKICAgICAgICAgbW90aGVyX2JpcnRoZGF0ZSA9IHN0cl9jKG1vdGhlcl9waWRsaW5rLCAiLSIsIGJpcnRoZGF0ZSksCiAgICAgICAgIG1vdGhlcl9iaXJ0aG9yZGVyID0gcGFzdGUwKG1vdGhlcl9waWRsaW5rICwgIi0iLCBjaHJvbl9vcmRlcl9iaXJ0aCkpCgpwcmVnbmFuY3kgPSBwcmVnbmFuY3kgJT4lIAogIG11dGF0ZSh3YXZlID0gc3RyX3N1Yih3YXZlLCAyLCAzKSAlPiUgYXMubnVtZXJpYygpKSAlPiUgIyBmcm9tIG1vc3QgcmVjZW50IHdhdmUgdG8gb2xkZXN0CiAgYXJyYW5nZShkZXNjKHdhdmUpKSAlPiUgIyB1c2UgbW9zdCByZWNlbnQgd2F2ZSAoYmVjYXVzZSB0aGVzZSB3aWxsIGhhdmUgcHJlZ25hbmN5IG91dGNvbWVzKQogIGdyb3VwX2J5KG1vdGhlcl9iaXJ0aGRhdGUpICU+JSAKICBtdXRhdGUoYmlydGhkYXRlX2R1cGVkX2luX2VhcmxpZXJfd2F2ZSA9IG1pbl9yYW5rKHdhdmUpKSAlPiUgCiAgZ3JvdXBfYnkobW90aGVyX2JpcnRob3JkZXIpICU+JSAKICBtdXRhdGUoYmlydGhvcmRlcl9kdXBlZF9pbl9lYXJsaWVyX3dhdmUgPSBtaW5fcmFuayh3YXZlKSkKIyB0aGVzZSBhcmUgcHJlZ25hbmN5IHRoYXQgY2hhbmdlcyBzdGF0dXMgKGkuZS4gb25nb2luZyBpbiB3YXZlIDIsIG1pc2NhcnJpZWQvYm9ybiBieSB3YXZlIDMpCmNyb3NzdGFicyh+IGJpcnRoZGF0ZV9kdXBlZF9pbl9lYXJsaWVyX3dhdmUgKyBiaXJ0aG9yZGVyX2R1cGVkX2luX2VhcmxpZXJfd2F2ZSArIGlzLm5hKGJpcnRoZGF0ZSksIHByZWduYW5jeSkKCiMgdW5mb3J0dW5hdGVseSwgc29tZXRpbWVzIGNocm9uX29yZGVyX2JpcnRoIGlzIGluY29uc2lzdGVudCB3aXRoIGJpcnRoZGF0ZXMKIyB0byBlbGltaW5hdGUgZHVwbGljYXRlcyBmcm9tIHRoZSBwcmVnbmFuY3kgZmlsZSAoYmVjYXVzZSBwcmVnbmFuY2llcyBjaGFuZ2VkIHN0YXR1c2VzKQojIG5vdywgZm9yIHRob3NlIHdoZXJlIHdlIGRvbid0IGtub3cgdGhlIGJpcnRoZGF0ZSwgd2Uga2VlcCBvbmx5IHVuaXF1ZSBiaXJ0aCBvcmRlcnMKIyBmb3IgdGhvc2UsIHdoZXJlIHdlIGtub3cgdGhlIGJpcnRoZGF0ZSwgd2Uga2VlcCBvbmx5IHVuaXF1ZSBiaXJ0aGRhdGVzIChhcyB0aGlzIGlzIGhpZ2hlciBxIGluZm9ybWF0aW9uKQpwcmVnbmFuY3kgPSBwcmVnbmFuY3kgJT4lIAogIGZpbHRlcigoaXMubmEoYmlydGhkYXRlKSAmJiBiaXJ0aG9yZGVyX2R1cGVkX2luX2VhcmxpZXJfd2F2ZSA9PSAxKSB8IGJpcnRoZGF0ZV9kdXBlZF9pbl9lYXJsaWVyX3dhdmUgPT0gMSkgJT4lIAogIHVuZ3JvdXAoKSAjIGVsaW1pbmF0ZSBkdXBlcyBhY3Jvc3Mgd2F2ZXMgKHNhbWUgbW90aGVyX2JpcnRoZGF0ZSksIGtlZXAgbXVsdCBiaXJ0aHMKY3Jvc3N0YWJzKH4gYmlydGhkYXRlX2R1cGVkX2luX2VhcmxpZXJfd2F2ZSArIGJpcnRob3JkZXJfZHVwZWRfaW5fZWFybGllcl93YXZlICsgaXMubmEoYmlydGhkYXRlKSwgcHJlZ25hbmN5KQoKeCA9ICh1bmlxdWUocHJlZ25hbmN5JG1vdGhlcl9waWRsaW5rKSkKCiMjcmVtb3ZlIGFsbCB3aXRoIG1pc3NpbmcgYmlydGhkYXRlL21pc2NhcnJpYWdlIGRhdGUKdGFibGUoaXMubmEocHJlZ25hbmN5JGJpcnRoZGF0ZSkpCgojIGZvciB3aGF0ZXZlciByZWFzb24gdGhlcmUgYXJlIHNvbWUgbXVsdGlwbGUgYmlydGhzIHdpdGgganVzdCBvbmUgcm93IGluIHRoZSBkYXRhLCBidXQgbnVtYmVyIGFyZSBsb3cgZW5vdWdoCiMgdGhhdCB3ZSBjb25zaWRlciBzb21lIGVycm9ycyBpbiB0aGUgcmVjb3JkcyB0aGUgbGlrZWx5IHJlYXNvbgpwcmVnbmFuY3kgJT4lIGZpbHRlcighaXMubmEoYmlydGhkYXRlKSkgJT4lIGdyb3VwX2J5KG1vdGhlcl9iaXJ0aGRhdGUpICAlPiUgCiAgbXV0YXRlKG11bHQgPSBuKCkpICU+JSBjcm9zc3RhYnMofiBtdWx0ICsgbXVsdGlwbGVfYmlydGggKyBpcy5uYShiaXJ0aF9tb250aCksIGRhdGEgPSAuKQoKIyMgRm9ybSB2YXJpYWJsZSBmb3IgYW55IG11bHRpcGxlIGJpcnRoIGluIGZhbWlseQpwcmVnbmFuY3kgPSBwcmVnbmFuY3kgJT4lIGdyb3VwX2J5KG1vdGhlcl9waWRsaW5rKSAlPiUgbXV0YXRlKGFueV9tdWx0aXBsZV9iaXJ0aCA9IGlmX2Vsc2UoYW55KG11bHRpcGxlX2JpcnRoID09IDEpLCAxLCAwKSkKcHJvcC50YWJsZSh0YWJsZShwcmVnbmFuY3kkbXVsdGlwbGVfYmlydGgpKQpwcm9wLnRhYmxlKHRhYmxlKHByZWduYW5jeSRhbnlfbXVsdGlwbGVfYmlydGgpKQpgYGAKCiMjIyBJbmZvcm1hdGlvbiBhYm91dCBtYXJyaWFnZSBoaXN0b3J5CmBgYHtyIG1hcnJpYWdlIGhpc3Rvcnl9CiMjIFNlbGVjdCBtYXJyaWFnZSBkYXRhCnc1X21hcnJpYWdlID0gdzVfbWFycmlhZ2UgJT4lIHNlbGVjdChwaWRsaW5rLCBrdzEwbXRoLCBrdzEweXIsIGt3MThtdGgsIGt3MTh5ciwga3cxMSwga3cxOSkKdzRfbWFycmlhZ2UgPSB3NF9tYXJyaWFnZSAlPiUgc2VsZWN0KHBpZGxpbmssIGt3MTBtdGgsIGt3MTB5ciwga3cxOG10aCwga3cxOHlyLCBrdzExLCBrdzE5KQp3M19tYXJyaWFnZSA9IHczX21hcnJpYWdlICU+JSBzZWxlY3QocGlkbGluaywga3cxMG10aCwga3cxMHlyLCBrdzE4bXRoLCBrdzE4eXIsIGt3MTEsIGt3MTkpCncyX21hcnJpYWdlID0gdzJfbWFycmlhZ2UgJT4lIHNlbGVjdChwaWRsaW5rLCBrdzEwbXRoLCBrdzEweXIsIGt3MThtdGgsIGt3MTh5ciwga3cxMSwga3cxOSkKdzFfbWFycmlhZ2UgPSB3MV9tYXJyaWFnZSAlPiUgc2VsZWN0KHBpZGxpbmssIGt3MDVhLCBrdzA1Yiwga3cxM2EsIGt3MTNiLCBrdzA2LCBrdzE0YWdlKQojIEluIHRoZSBmaXJzdCB3YXZlIHRoZSB5ZWFyIGlzIG5hbWVkIHdyb25nCncxX21hcnJpYWdlID0gdzFfbWFycmlhZ2UgJT4lCiAgbXV0YXRlKGt3MDVhID0gaWZlbHNlKGt3MDVhIDw9IDkzLCBhcy5udW1lcmljKHN0cl9jKCIxOSIsIHcxX21hcnJpYWdlJGt3MDVhKSksIGt3MDVhKSwKICAgICAgICAga3cxM2EgPSBpZmVsc2Uoa3cxM2EgPD05MyAsIGFzLm51bWVyaWMoc3RyX2MoIjE5IiwgdzFfbWFycmlhZ2Uka3cxM2EpKSwga3cxM2EpKQojIEFuZCB0aGUgY29sdW1uIG5hbWVzIGFyZSB3cm9uZy4uLgp3MV9tYXJyaWFnZSA9IHcxX21hcnJpYWdlICU+JSByZW5hbWUoa3cxMG10aCA9IGt3MDViLCBrdzEweXIgPSBrdzA1YSwga3cxOG10aCA9IGt3MTNiLCBrdzE4eXIgPSBrdzEzYSwga3cxMSA9IGt3MDYsIGt3MTkgPSBrdzE0YWdlKQoKIyMgU2VsZWN0IGFkZGl0aW9uYWwgbWFycmlhZ2UgaW5mb3JtYXRpb24gKGFnZSBvZiByZXNwb25kZW50KQp3NV9tYXJyaWFnZV9hZGRpdGlvbmFsID0gdzVfbWFycmlhZ2VfYWRkaXRpb25hbCAlPiUgc2VsZWN0KHBpZGxpbmssIGFnZSwgZG9iX3lyKQp3NF9tYXJyaWFnZV9hZGRpdGlvbmFsID0gdzRfbWFycmlhZ2VfYWRkaXRpb25hbCAlPiUgc2VsZWN0KHBpZGxpbmssIGFnZSwgZG9iX3lyKQp3M19tYXJyaWFnZV9hZGRpdGlvbmFsID0gdzNfbWFycmlhZ2VfYWRkaXRpb25hbCAlPiUgc2VsZWN0KHBpZGxpbmssIGFnZSwgZG9iX3lyKQp3Ml9tYXJyaWFnZV9hZGRpdGlvbmFsID0gdzJfbWFycmlhZ2VfYWRkaXRpb25hbCAlPiUgc2VsZWN0KHBpZGxpbmssIGFnZSwgZG9iX3lyKQp3MV9tYXJyaWFnZV9hZGRpdGlvbmFsID0gdzFfbWFycmlhZ2VfYWRkaXRpb25hbCAlPiUgc2VsZWN0KHBpZGxpbmssIGFyMDl5ciwgYXIwOHlyKQojIEluIHRoZSBmaXJzdCB3YXZlIHRoZSB5ZWFyIGlzIG5hbWVkIHdyb25nCncxX21hcnJpYWdlX2FkZGl0aW9uYWwgPSB3MV9tYXJyaWFnZV9hZGRpdGlvbmFsICU+JQogIG11dGF0ZShhcjA4eXIgPSBpZmVsc2UoYXIwOHlyIDw9IDkzLCAKICAgICAgICAgICAgICAgICAgICAgICAgIGFzLm51bWVyaWMoc3RyX2MoIjE5IiwgdzFfbWFycmlhZ2VfYWRkaXRpb25hbCRhcjA4eXIpKSwKICAgICAgICAgICAgICAgICAgICAgICAgIGFyMDh5cikpCiMgQW5kIHRoZSBjb2x1bW4gbmFtZXMgYXJlIHdyb25nLi4uCncxX21hcnJpYWdlX2FkZGl0aW9uYWwgPSB3MV9tYXJyaWFnZV9hZGRpdGlvbmFsICU+JSByZW5hbWUoYWdlID0gYXIwOXlyLCBkb2JfeXIgPSBhcjA4eXIpCgojIyBDb21iaW5lIG1hcnJpYWdlIGluZm9ybWF0aW9uIGFuZCBhZGRpdGlvbmFsIG1hcnJpYWdlIGluZm9ybWF0aW9uOgp3MV9tYXJyaWFnZSA9IGxlZnRfam9pbih3MV9tYXJyaWFnZSwgdzFfbWFycmlhZ2VfYWRkaXRpb25hbCwgYnkgPSAicGlkbGluayIpICU+JQogIG11dGF0ZSh3YXZlID0gYXMubnVtZXJpYygiMTk5MyIpKQp3Ml9tYXJyaWFnZSA9IGxlZnRfam9pbih3Ml9tYXJyaWFnZSwgdzJfbWFycmlhZ2VfYWRkaXRpb25hbCwgYnkgPSAicGlkbGluayIpICU+JQogIG11dGF0ZSh3YXZlID0gYXMubnVtZXJpYygiMTk5NyIpKQp3M19tYXJyaWFnZSA9IGxlZnRfam9pbih3M19tYXJyaWFnZSwgdzNfbWFycmlhZ2VfYWRkaXRpb25hbCwgYnkgPSAicGlkbGluayIpICAlPiUKICBtdXRhdGUod2F2ZSA9IGFzLm51bWVyaWMoIjIwMDAiKSkKdzRfbWFycmlhZ2UgPSBsZWZ0X2pvaW4odzRfbWFycmlhZ2UsIHc0X21hcnJpYWdlX2FkZGl0aW9uYWwsIGJ5ID0gInBpZGxpbmsiKSAlPiUKICBtdXRhdGUod2F2ZSA9IGFzLm51bWVyaWMoIjIwMDciKSkKdzVfbWFycmlhZ2UgPSBsZWZ0X2pvaW4odzVfbWFycmlhZ2UsIHc1X21hcnJpYWdlX2FkZGl0aW9uYWwsIGJ5ID0gInBpZGxpbmsiKSAlPiUKICBtdXRhdGUod2F2ZSA9IGFzLm51bWVyaWMoIjIwMTQiKSkKCiMjIENvbWJpbmUgbWFycmlhZ2UgaW5mb3JtYXRpb25zCm1hcnJpYWdlID0gYmluZF9yb3dzKHcxX21hcnJpYWdlLCB3Ml9tYXJyaWFnZSwgdzNfbWFycmlhZ2UsIHc0X21hcnJpYWdlLCB3NV9tYXJyaWFnZSkKCiMgUmVuYW1lIGNvbHVtbnMKbWFycmlhZ2UgPSBtYXJyaWFnZSAlPiUgcmVuYW1lKHN0YXJ0X3llYXIgPSBrdzEweXIsIHN0YXJ0X21vbnRoID0ga3cxMG10aCwgZW5kX3llYXIgPSBrdzE4eXIsIGVuZF9tb250aCA9IGt3MThtdGgsIHN0YXJ0X2FnZSA9IGt3MTEsIGVuZF9hZ2UgPSBrdzE5LCBiaXJ0aF95ZWFyID0gZG9iX3lyLCBiaXJ0aF9hZ2UgPSBhZ2UpCgoKIyBTZXQgdmFsdWVzIGFzIE5BIHRoYXQgYXJlIG1pc3NpbmcKbWFycmlhZ2Ukc3RhcnRfeWVhclsgbWFycmlhZ2Ukc3RhcnRfeWVhcjwxOTAwXSA9IE5BCm1hcnJpYWdlJHN0YXJ0X3llYXJbIG1hcnJpYWdlJHN0YXJ0X3llYXI+MjAxNl0gPSBOQQptYXJyaWFnZSRzdGFydF95ZWFyWyBpcy5uYW4obWFycmlhZ2Ukc3RhcnRfeWVhcildID0gTkEKbWFycmlhZ2UkZW5kX3llYXJbIG1hcnJpYWdlJGVuZF95ZWFyPDE5MDBdID0gTkEKbWFycmlhZ2UkZW5kX3llYXJbIG1hcnJpYWdlJGVuZF95ZWFyPjIwMTZdID0gTkEKbWFycmlhZ2UkZW5kX3llYXJbIGlzLm5hbihtYXJyaWFnZSRlbmRfeWVhcildID0gTkEKbWFycmlhZ2Ukc3RhcnRfbW9udGggW21hcnJpYWdlJHN0YXJ0X21vbnRoPjEyXSA9IE5BCm1hcnJpYWdlJHN0YXJ0X21vbnRoIFtpcy5uYW4obWFycmlhZ2Ukc3RhcnRfbW9udGgpXSA9IE5BCm1hcnJpYWdlJGVuZF9tb250aCBbbWFycmlhZ2UkZW5kX21vbnRoPjEyXSA9IE5BCm1hcnJpYWdlJGVuZF9tb250aCBbaXMubmFuKG1hcnJpYWdlJGVuZF9tb250aCldID0gTkEKbWFycmlhZ2Ukc3RhcnRfYWdlIFttYXJyaWFnZSRzdGFydF9hZ2UgPiA5N10gPSBOQQptYXJyaWFnZSRzdGFydF9hZ2UgW2lzLm5hbihtYXJyaWFnZSRzdGFydF9hZ2UpXSA9IE5BCm1hcnJpYWdlJGVuZF9hZ2UgW21hcnJpYWdlJGVuZF9hZ2UgPiA5N10gPSBOQQptYXJyaWFnZSRlbmRfYWdlIFtpcy5uYW4obWFycmlhZ2UkZW5kX2FnZSldID0gTkEKbWFycmlhZ2UkYmlydGhfeWVhclsgbWFycmlhZ2UkYmlydGhfeWVhcjwxOTAwXSA9IE5BCm1hcnJpYWdlJGJpcnRoX3llYXJbIG1hcnJpYWdlJGJpcnRoX3llYXI+MjAxNl0gPSBOQQptYXJyaWFnZSRiaXJ0aF95ZWFyWyBpcy5uYW4obWFycmlhZ2UkYmlydGhfeWVhcildID0gTkEKbWFycmlhZ2UkYmlydGhfYWdlIFttYXJyaWFnZSRiaXJ0aF9hZ2UgPiA5N10gPSBOQQptYXJyaWFnZSRiaXJ0aF9hZ2UgW2lzLm5hbihtYXJyaWFnZSRiaXJ0aF9hZ2UpXSA9IE5BCgojIyBSZWNvbnN0cnVjdCBtYXJyaWFnZSBzdGFydCB5ZWFyIGFuZCBlbmQgeWVhciBmb3IgbWFycmlhZ2VzIHdpdGggbWlzc2luZyB5ZWFyCm1hcnJpYWdlID0gbWFycmlhZ2UgJT4lCiAgbXV0YXRlKGJpcnRoX3llYXIgPSBpZmVsc2UoaXMubmEoYmlydGhfeWVhciksIHdhdmUgLSBiaXJ0aF9hZ2UsIGJpcnRoX3llYXIpLAogICAgICAgICBzdGFydF95ZWFyID0gaWZlbHNlKGlzLm5hKHN0YXJ0X3llYXIpLCBiaXJ0aF95ZWFyICsgc3RhcnRfYWdlLCBzdGFydF95ZWFyKSwKICAgICAgICAgZW5kX3llYXIgPSBpZmVsc2UoaXMubmEoZW5kX3llYXIpLCBiaXJ0aF95ZWFyICsgZW5kX2FnZSwgZW5kX3llYXIpKQoKCm1hcnJpYWdlID0gbWFycmlhZ2UgJT4lIGFycmFuZ2UocGlkbGluaywgc3RhcnRfeWVhciwgc3RhcnRfbW9udGgsIHN0YXJ0X2FnZSwgZW5kX3llYXIsIGVuZF9tb250aCwgZW5kX2FnZSkKCm1hcnJpYWdlID0gbWFycmlhZ2UgJT4lIGZpbHRlcighZHVwbGljYXRlZChjYmluZChwaWRsaW5rLCBzdGFydF95ZWFyLCBzdGFydF9tb250aCkpIHwgaXMubmEoc3RhcnRfeWVhcikgfCBpcy5uYShzdGFydF9tb250aCkpICMgbm9ib2R5IGdldHMgbWFycmllZCB0d2ljZSBvbiB0aGUgc2FtZSBkYXksIHJpZ2h0PyBzbyB0aGVzZSBhcmUgZHVwZXMuCgojIyBDYWxjdWxhdGUgZGF0ZSBmb3IgYmVnaW5uaW5nIG9mIG1hcnJpYWdlOgptYXJyaWFnZSA9IG1hcnJpYWdlICU+JSAKICB1bmdyb3VwKCkgJT4lCiAgbXV0YXRlKHN0YXJ0X3N0cmluZyA9IHN0cl9jKHN0YXJ0X3llYXIsICItIiwgaWZlbHNlKGlzLm5hKHN0YXJ0X21vbnRoKSwgIjAxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkX21vbnRoKHN0YXJ0X21vbnRoKSksICItMDEiKSwKICAgICAgICBlbmRfc3RyaW5nID0gc3RyX2MoZW5kX3llYXIsICItIiwgaWZlbHNlKGlzLm5hKGVuZF9tb250aCksICIxMiIsIHBhZF9tb250aChlbmRfbW9udGgpKSwgIi0wMSIpLAogICAgICAgIHN0YXJ0ID0geW1kKHN0YXJ0X3N0cmluZyksCiAgICAgICAgZW5kID0geW1kKGVuZF9zdHJpbmcpICsgbW9udGhzKDEpIC0gZGF5cygxKSkKCiMjIENvdW50IG51bWJlciBvZiBtYXJyaWFnZXMKbWFycmlhZ2UgPSBtYXJyaWFnZSAlPiUKICBhcnJhbmdlKHBpZGxpbmssIHN0YXJ0LCBlbmQpICU+JQogIGdyb3VwX2J5KHBpZGxpbmspICU+JQogIG11dGF0ZShudW1iZXJfbWFycmlhZ2VzID0gbigpLAogICAgICAgICBvcmRlcl9tYXJyaWFnZSA9IHJvd19udW1iZXIoKSwKICAgICAgICAgbWFycmlhZ2VfaWQgPSBwYXN0ZTAocGlkbGluaywgIl8iLCBhcy5jaGFyYWN0ZXIob3JkZXJfbWFycmlhZ2UpLCAiXyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzLmNoYXJhY3RlcihzdGFydCksICIvIixhcy5jaGFyYWN0ZXIoZW5kKSkpCgojIyMgTWFycmlhZ2UgVGltZWxpbmUKbWluaW11bV9zdGFydCA9IG1pbih5bWQoc3RyX2MocHJlZ25hbmN5JG1vbnRoLCAiLTAxIikpLCBuYS5ybSA9IFQpCm1heGltdW1fZW5kID0gbWF4KHltZChzdHJfYyhwcmVnbmFuY3kkbW9udGgsICItMDEiKSksIG5hLnJtID0gVCkKbWFycmlhZ2VfdGltZWxpbmUgPSBtYXJyaWFnZSAlPiUKICAgIG11dGF0ZShpbXBsaWVkX3N0YXJ0ID0gYXMuRGF0ZShpZmVsc2UoaXMubmEoc3RhcnQpLCBtaW5pbXVtX3N0YXJ0ICwgc3RhcnQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbj0iMTk3MC0wMS0wMSIpLAogICAgICAgICAgIGltcGxpZWRfZW5kID0gYXMuRGF0ZShpZmVsc2UoaXMubmEoZW5kKSwgbWF4aW11bV9lbmQgLCBlbmQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW49IjE5NzAtMDEtMDEiKSkgJT4lCiAgZmlsdGVyKGltcGxpZWRfc3RhcnQgPCBpbXBsaWVkX2VuZCkKCm1hcnJpYWdlX3RpbWVsaW5lID0gbWFycmlhZ2VfdGltZWxpbmUgJT4lCiAgICByb3d3aXNlKCkgJT4lCiAgICBkbyhkYXRhLmZyYW1lKAogICAgICAgIG1hcnJpYWdlX2lkPS4kbWFycmlhZ2VfaWQsIAogICAgICAgIG1vdGhlcl9waWRsaW5rID0gLiRwaWRsaW5rLAogICAgICAgIG9yZGVyX21hcnJpYWdlID0gLiRvcmRlcl9tYXJyaWFnZSwKICAgICAgICBzdGFydCA9IC4kc3RhcnQsCiAgICAgICAgZW5kID0gLiRlbmQsCiAgICAgICAgbW9udGggPSBzZXEoLiRpbXBsaWVkX3N0YXJ0LC4kaW1wbGllZF9lbmQsIGJ5PSIxIG1vbnRoIikgKSkKCiMgbm8gZHVwbGljYXRlIG1vdGhlcl9pZCAtIG1vbnRoIGNvbWJpbmF0aW9ucyAobm8gdHdvIG1hcnJpYWdlcyBhdCB0aGUgc2FtZSB0aW1lKQptYXJyaWFnZV90aW1lbGluZSA9IG1hcnJpYWdlX3RpbWVsaW5lICU+JSAKICBhcnJhbmdlKG1vdGhlcl9waWRsaW5rLCBzdGFydCwgZW5kKSAlPiUgCiAgZGlzdGluY3QobW90aGVyX3BpZGxpbmssIG1vbnRoLCAua2VlcF9hbGwgPSBUUlVFKQoKbWFycmlhZ2VfdGltZWxpbmUkbW9udGggPSBzdHJpbmdyOjpzdHJfc3ViKGFzLmNoYXJhY3RlcihtYXJyaWFnZV90aW1lbGluZSRtb250aCksMSw3KQoKIyB3ZSBhc3N1bWUgdGhhdCBmYXRoZXJzIGFyZSB0aG9zZSB0byB3aG9tIG1vdGhlcnMgd2VyZSBtYXJyaWVkIGluIHRoZSBiaXJ0aCBtb250aApwcmVnbmFuY3kgPSBwcmVnbmFuY3kgJT4lIGxlZnRfam9pbihtYXJyaWFnZV90aW1lbGluZSwgYnkgPSBjKCJtb3RoZXJfcGlkbGluayIsICJtb250aCIpKSAlPiUgdW5ncm91cCgpCmBgYAoKCiMjIyBCaXJ0aCBvcmRlciBjYWxjdWxhdGlvbnMgey50YWJzZXR9CmBgYHtyIFV0ZXJ1cyBiaXJ0aG9yZGVyIGFuZCBtYXRlcm5hbCBzaWJsaW5nIGNvdW50fQojIyMjIE1hdGVybmFsIFByZWduYW5jeSBPcmRlcgpwcmVnbmFuY3kxID0gcHJlZ25hbmN5ICU+JQogIGdyb3VwX2J5KG1vdGhlcl9waWRsaW5rKSAlPiUKICBtdXRhdGUoYmlydGhvcmRlcl91dGVydXNfcHJlZyA9IG1pbl9yYW5rKGJpcnRoZGF0ZSksCiAgICAgICAgIGJpcnRob3JkZXJfdXRlcnVzX3ByZWcyID0gaWZlbHNlKGlzLm5hKGJpcnRob3JkZXJfdXRlcnVzX3ByZWcpLCBjaHJvbl9vcmRlcl9iaXJ0aCwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShjaHJvbl9vcmRlcl9iaXJ0aCA+IGJpcnRob3JkZXJfdXRlcnVzX3ByZWcsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNocm9uX29yZGVyX2JpcnRoLCBiaXJ0aG9yZGVyX3V0ZXJ1c19wcmVnKSksCiAgICAgICAgICMgYmlydGhvcmRlcl91dGVydXNfcHJlZyA9IGlmZWxzZShhbnlfbXVsdGlwbGVfYmlydGggPT0gMSwgTkEsIGJpcnRob3JkZXJfdXRlcnVzX3ByZWcpLAogICAgICAgICBzaWJsaW5nX2NvdW50X3V0ZXJ1c19wcmVnID0gc3VtKCFpcy5uYShiaXJ0aGRhdGUpKSwKICAgICAgICAgc2libGluZ19jb3VudF91dGVydXNfcHJlZzIgPSBpZmVsc2UoaXMubmEoc2libGluZ19jb3VudF91dGVydXNfcHJlZyksIG1heChjaHJvbl9vcmRlcl9iaXJ0aCwgbmEucm0gPSBUKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKG1heChjaHJvbl9vcmRlcl9iaXJ0aCwgbmEucm0gPSBUKSA+IHNpYmxpbmdfY291bnRfdXRlcnVzX3ByZWcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4KGNocm9uX29yZGVyX2JpcnRoLCBuYS5ybSA9IFQpLCBzaWJsaW5nX2NvdW50X3V0ZXJ1c19wcmVnKSkKICAgICAgICAgIyAsc2libGluZ19jb3VudF91dGVydXNfcHJlZyA9IGlmZWxzZShhbnlfbXVsdGlwbGVfYmlydGggPT0gMSwgTkEsIHNpYmxpbmdfY291bnRfdXRlcnVzX3ByZWcpCiAgICAgICAgICkgJT4lCiAgdW5ncm91cCgpCmNvci50ZXN0KHByZWduYW5jeTEkYmlydGhvcmRlcl91dGVydXNfcHJlZywgcHJlZ25hbmN5MSRiaXJ0aG9yZGVyX3V0ZXJ1c19wcmVnMikKY29yLnRlc3QocHJlZ25hbmN5MSRzaWJsaW5nX2NvdW50X3V0ZXJ1c19wcmVnLCBwcmVnbmFuY3kxJHNpYmxpbmdfY291bnRfdXRlcnVzX3ByZWcpCmNyb3NzdGFicyh+IGlzLm5hKGJpcnRob3JkZXJfdXRlcnVzX3ByZWcpICsgaXMubmEoYmlydGhvcmRlcl91dGVydXNfcHJlZzIpICsgaXMubmEoYmlydGhkYXRlKSwgcHJlZ25hbmN5MSkKY3Jvc3N0YWJzKH4gaXMubmEoc2libGluZ19jb3VudF91dGVydXNfcHJlZykgKyBpcy5uYShzaWJsaW5nX2NvdW50X3V0ZXJ1c19wcmVnMikgKyBpcy5uYShiaXJ0aGRhdGUpLCBwcmVnbmFuY3kxKQojIG91ciBiaXJ0aGRhdGUgYmFzZWQgYmlydGhvcmRlciBlc3RpbWF0ZXMgYXJlIGV4dHJlbWVseSBjb25zaXN0ZW50IHdpdGggY2hyb25fb3JkZXJfYmlydGgKCiMjIyMgTWF0ZXJuYWwgQmlydGggT3JkZXIKcHJlZ25hbmN5MiA9IHByZWduYW5jeSAlPiUKICBmaWx0ZXIobGlmZWJpcnRocyA9PSAyKSAlPiUKICBncm91cF9ieShtb3RoZXJfcGlkbGluaykgJT4lCiAgICBtdXRhdGUoYmlydGhvcmRlcl91dGVydXNfYWxpdmUgPSBtaW5fcmFuayhiaXJ0aGRhdGUpLAogICAgICAgICAgICMgYmlydGhvcmRlcl91dGVydXNfYWxpdmUgPSBpZmVsc2UoYW55X211bHRpcGxlX2JpcnRoID09IDEsIE5BLCBiaXJ0aG9yZGVyX3V0ZXJ1c19hbGl2ZSksCiAgICAgICAgICAgc2libGluZ19jb3VudF91dGVydXNfYWxpdmUgPSBzdW0oIWlzLm5hKGJpcnRoZGF0ZSkpCiAgICAgICAgICAgIyAsc2libGluZ19jb3VudF91dGVydXNfYWxpdmUgPSBpZmVsc2UoYW55X211bHRpcGxlX2JpcnRoID09IDEsIE5BLCBzaWJsaW5nX2NvdW50X3V0ZXJ1c19hbGl2ZSkKICAgICAgICAgICApICU+JQogIHVuZ3JvdXAoKQoKcHJlZ25hbmN5MiA9IHByZWduYW5jeTIgJT4lIHNlbGVjdChtb3RoZXJfYmlydGhkYXRlLCBiaXJ0aG9yZGVyX3V0ZXJ1c19hbGl2ZSwgc2libGluZ19jb3VudF91dGVydXNfYWxpdmUpICU+JSBkaXN0aW5jdCgpCgojIyMjIFBhcmVudGFsIEZ1bGwgU2libGluZyBCaXJ0aG9yZGVyCnByZWduYW5jeTMgPSBwcmVnbmFuY3kgJT4lCiAgZmlsdGVyKGxpZmViaXJ0aHMgPT0gMikgJT4lCiAgZ3JvdXBfYnkobWFycmlhZ2VfaWQpICU+JQogICAgbXV0YXRlKGJpcnRob3JkZXJfZ2VuZXMgPSBtaW5fcmFuayhiaXJ0aGRhdGUpLAogICAgICAgICAgIGJpcnRob3JkZXJfZ2VuZXMgPSBpZmVsc2UoaXMubmEobWFycmlhZ2VfaWQpLCBOQSwgYmlydGhvcmRlcl9nZW5lcyksCiAgICAgICAgICAgc2libGluZ19jb3VudF9nZW5lcyA9IGlmZWxzZShpcy5uYShtYXJyaWFnZV9pZCksIE5BLCBzdW0oIWlzLm5hKG1hcnJpYWdlX2lkKSkpKSAlPiUKICB1bmdyb3VwKCkKCnByZWduYW5jeTMgPSBwcmVnbmFuY3kzICU+JSBzZWxlY3QobW90aGVyX2JpcnRoZGF0ZSwgYmlydGhvcmRlcl9nZW5lcywgc2libGluZ19jb3VudF9nZW5lcykgJT4lIGRpc3RpbmN0KCkKCgojIHJlbW92ZSBkdXBlcyBiZWNhdXNlIG9mIG1pc3NpbmdzIGFuZCB0d2lucwpwcmVnbmFuY3kxIDwtIHByZWduYW5jeTEgJT4lIHNlbGVjdCgtYmlydGhvcmRlcl91dGVydXNfcHJlZzIsIC1zaWJsaW5nX2NvdW50X3V0ZXJ1c19wcmVnMikgJT4lIAogIGZpbHRlcighaXMubmEoYmlydGhkYXRlKSkgJT4lIAogIGRpc3RpbmN0KG1vdGhlcl9iaXJ0aGRhdGUsIC5rZWVwX2FsbCA9IFRSVUUpCgpwcmVnbmFuY3kyIDwtIHByZWduYW5jeTIgJT4lCiAgZGlzdGluY3QobW90aGVyX2JpcnRoZGF0ZSwgLmtlZXBfYWxsID0gVFJVRSkKCiMjIyBDb21iaW5lIGJpcnRob3JkZXIgZGF0YQp0YWJsZShkdXBsaWNhdGVkKHByZWduYW5jeTEkbW90aGVyX2JpcnRoZGF0ZSkpCnRhYmxlKGR1cGxpY2F0ZWQocHJlZ25hbmN5MiRtb3RoZXJfYmlydGhkYXRlKSkKdGFibGUoZHVwbGljYXRlZChwcmVnbmFuY3kzJG1vdGhlcl9iaXJ0aGRhdGUpKQoKcHJlZ25hbmN5ID0gbGVmdF9qb2luKHByZWduYW5jeTEsIHByZWduYW5jeTIsIGJ5PSJtb3RoZXJfYmlydGhkYXRlIikgJT4lIHVuZ3JvdXAoKQpwcmVnbmFuY3kgPSBsZWZ0X2pvaW4ocHJlZ25hbmN5LCBwcmVnbmFuY3kzLCBieSA9ICJtb3RoZXJfYmlydGhkYXRlIikgJT4lIHVuZ3JvdXAoKQpgYGAKCgojIyMgQmlydGggb3JkZXIgZ3JhcGhzCmBgYHtyfQojIyMgR3JhcGhzCiMjIEJpb2xvZ2ljYWwgQmlydGhvcmRlciAtIFV0ZXJ1c19QcmVnbmFuY2llcwpnZ3Bsb3QocHJlZ25hbmN5LCBhZXMoeD1zaWJsaW5nX2NvdW50X3V0ZXJ1c19wcmVnLCB5PWJpcnRob3JkZXJfdXRlcnVzX3ByZWcpKSArIGdlb21faml0dGVyKGFscGhhID0gMC4xKQoKIyMgQmlvbG9naWNhbCBCaXJ0aG9yZGVyIC0gVXRlcnVzX0JpcnRocwpnZ3Bsb3QocHJlZ25hbmN5LCBhZXMoeD1zaWJsaW5nX2NvdW50X3V0ZXJ1c19hbGl2ZSwgeT1iaXJ0aG9yZGVyX3V0ZXJ1c19hbGl2ZSkpICsgZ2VvbV9qaXR0ZXIoYWxwaGEgPSAwLjEpCgojIyBCaW9sb2dpY2FsIEJpcnRob3JkZXIgLSBGdWxsIFNpYmxpbmcgT3JkZXIKZ2dwbG90KHByZWduYW5jeSwgYWVzKHg9c2libGluZ19jb3VudF9nZW5lcywgeT1iaXJ0aG9yZGVyX2dlbmVzKSkgKyBnZW9tX2ppdHRlcihhbHBoYSA9IDAuMSkKCiMjIEJpbzogVXRlcnVzX3ByZWcgdnMuIFV0ZXJ1c19CaXJ0aHMKZ2dwbG90KHByZWduYW5jeSwgYWVzKHg9YmlydGhvcmRlcl91dGVydXNfcHJlZywgeT1iaXJ0aG9yZGVyX3V0ZXJ1c19hbGl2ZSkpICsgZ2VvbV9qaXR0ZXIoYWxwaGEgPSAwLjEpCiMgVGhlIGJpcnRoX29yZGVyX2FsaXZlIGlzIGFsd2F5cyBsb3dlciwgd2hpY2ggbWFrZXMgc2Vuc2UsIGJlY2F1cyBub3QgbGl2ZSBiaXJ0aHMgKG1pc2NhcnJpYWdlLCBzdGlsbCBiaXJ0aHMgYXJlIGV4Y2x1ZGVkKQoKIyMgQmlvOiBVdGVydXNfcHJlZyB2cy4gR2VuZXMKZ2dwbG90KHByZWduYW5jeSwgYWVzKHg9YmlydGhvcmRlcl91dGVydXNfcHJlZywgeT1iaXJ0aG9yZGVyX2dlbmVzKSkgKyBnZW9tX2ppdHRlcihhbHBoYSA9IDAuMSkKIyBUaGUgYmlydGhvcmRlcl9nZW5lcyBpcyBhbHdheXMgbG93ZXIsIHdoaWNoIG1ha2VzIHNlbnNlLCBiZWNhdXNlIGRpZmZlcmVudC91bmtub3duIGZhdGhlcnMgYXJlIGV4Y2x1ZGVkCgojIyBCaW86IFV0ZXJ1c19hbGl2ZSB2cy4gR2VuZXMKZ2dwbG90KHByZWduYW5jeSwgYWVzKHg9YmlydGhvcmRlcl91dGVydXNfYWxpdmUsIHk9YmlydGhvcmRlcl9nZW5lcykpICArIGdlb21faml0dGVyKGFscGhhID0gMC4xKQojIGNoaWxkcmVuIHdpdGggdGhlIHNhbWUgZmF0aGVyIGluY2x1ZGVzIG9ubHkgbGl2ZSBiaXJ0aHMKCiMgY2hyb24gb3JkZXIgYmlydGggZG9lcyBub3QgY29ycmVsYXRlIHBlcmZlY3RseSwgdW5zdXJwcmlzaW5nIGdpdmVuIHRoYXQgd2UgZm91bmQgY2hyb24gb3JkZXJzIHNvbWV0aW1lcyBzdGFydGVkCiMgZnJvbSAxIGluIG5ldyB3YXZlcyBldmVuIHRob3VnaCBwcmV2aW91cyBiaXJ0aHMgd2VyZSByZWNvcmRlZApwcmVnbmFuY3kgJT4lIHNlbGVjdChjaHJvbl9vcmRlcl9iaXJ0aCwgYmlydGhvcmRlcl91dGVydXNfYWxpdmUsIGJpcnRob3JkZXJfdXRlcnVzX3ByZWcsIGJpcnRob3JkZXJfZ2VuZXMpICU+JSBuYS5vbWl0KCkgJT4lIGNvcigpCnByZWduYW5jeSAlPiUgc2VsZWN0KGNocm9uX29yZGVyX2JpcnRoLCBiaXJ0aG9yZGVyX3V0ZXJ1c19hbGl2ZSwgYmlydGhvcmRlcl91dGVydXNfcHJlZywgYmlydGhvcmRlcl9nZW5lcykgJT4lIG1pc3NpbmduZXNzX3BhdHRlcm5zKCkKcHJlZ25hbmN5ICU+JSBzZWxlY3Qoc2libGluZ19jb3VudF91dGVydXNfYWxpdmUsIHNpYmxpbmdfY291bnRfdXRlcnVzX3ByZWcsIHNpYmxpbmdfY291bnRfZ2VuZXMpICU+JSBtaXNzaW5nbmVzc19wYXR0ZXJucygpCmBgYAoKIyMgU2VsZWN0IGluZGl2aWR1YWwgZGF0YSBmcm9tIElGTFMgNQpgYGB7ciBzZWxlY3QgaW5kaXZpZHVhbCBkYXRhfQojIyMgSW5kaXZpZHVhbHMKaW5kaXZpZHVhbHMgPSBia19hcjEgJT4lIHNlbGVjdChoaGlkMTRfOSwgcGlkbGluaywgZmF0aGVyX3BpZGxpbmssIG1vdGhlcl9waWRsaW5rLCBhcjAxYSwgYXIwMmIsIGFyMTAsIGFyMTEsIGFyMDcsIGFyMDhkYXksIGFyMDhtdGgsIGFyMDh5ciwgYXIwOSwgYXIxOGV5ciwgYXIxOGVtdGgpCiNSZW5hbWUgdmFyaWFibGVzIHRvIG1ha2UgaXQgZWFzaWVyCmluZGl2aWR1YWxzID0gcmVuYW1lKGluZGl2aWR1YWxzLCByZWxhdGlvbl90b19ISF9oZWFkID0gYXIwMmIsIGZhdGhlcklEID0gYXIxMCwgbW90aGVySUQgPSBhcjExLCBzZXggPSBhcjA3LCBhZ2UgPSBhcjA5LCBzdGF0dXMgPSBhcjAxYSwgZGVhdGhfeXIgPSBhcjE4ZXlyLCBkZWF0aF9tb250aCA9IGFyMThlbXRoKSAKIyBSZW1vdmUgZHVwbGljYXRzIChzb21lIHBlb3BsZSBhcmUgbWVudGlvbmVkIGluIHR3byBob3VzZWhvbGRzLCBlLmcuIGJlY2F1c2UgdGhleSBtb3ZlZCBpbiB0aGUgbGFzdCAxMiBtb250aHMpCmluZGl2aWR1YWxzID0gaW5kaXZpZHVhbHMgJT4lIGRpc3RpbmN0KHBpZGxpbmssIC5rZWVwX2FsbCA9IFRSVUUpCmluZGl2aWR1YWxzX3VuY2hhbmdlZCA9IGluZGl2aWR1YWxzCgojIyBwZW9wbGUgd2hvc2UgcGFyZW50cyBjYW4gbm90IGJlIGlkZW50aWZpZWQgaGF2ZSB0byBiZSBtYXJrZWQgYXMgTkE6CmluZGl2aWR1YWxzJGZhdGhlcklEWyBpbmRpdmlkdWFscyRmYXRoZXJJRD41MF0gPSBOQQppbmRpdmlkdWFscyRtb3RoZXJJRFsgaW5kaXZpZHVhbHMkbW90aGVySUQ+NTBdID0gTkEKCgojIyBDcmVhdGUgZGF0ZSBvZiBiaXJ0aAojU2V0IGFsbCB2YXJpYWJsZXMgbWlzc2luZyB0aGF0IGhhdmUgbm90IGJlZW4gcmVwb3J0ZWQ6CmluZGl2aWR1YWxzJGFyMDhkYXlbIGluZGl2aWR1YWxzJGFyMDhkYXk+MzFdID0gTkEKaW5kaXZpZHVhbHMkYXIwOG10aFsgaW5kaXZpZHVhbHMkYXIwOG10aD4xMl0gPSBOQQppbmRpdmlkdWFscyRhcjA4eXJbIGluZGl2aWR1YWxzJGFyMDh5cj4yMDE2XSA9IE5BCmluZGl2aWR1YWxzJGFyMDhkYXlbIGlzLm5hbihpbmRpdmlkdWFscyRhcjA4ZGF5KSBdID0gTkEKaW5kaXZpZHVhbHMkYXIwOG10aFsgaXMubmFuKGluZGl2aWR1YWxzJGFyMDhtdGgpIF0gPSBOQQppbmRpdmlkdWFscyRhcjA4eXJbIGlzLm5hbihpbmRpdmlkdWFscyRhcjA4eXIpXSA9IE5BCmluZGl2aWR1YWxzJGRlYXRoX21vbnRoWyBpbmRpdmlkdWFscyRkZWF0aF9tb250aD4xMl0gPSBOQQppbmRpdmlkdWFscyRkZWF0aF95clsgaW5kaXZpZHVhbHMkZGVhdGhfeXI+MjAxNl0gPSBOQQppbmRpdmlkdWFscyRkZWF0aF9tb250aFsgaXMubmFuKGluZGl2aWR1YWxzJGRlYXRoX21vbnRoKSBdID0gTkEKaW5kaXZpZHVhbHMkZGVhdGhfeXJbIGlzLm5hbihpbmRpdmlkdWFscyRkZWF0aF95cildID0gTkEKCiMjIENyZWF0ZSB2YXJpYWJsZSB0aGF0IGNvbnRhaW5zIHBpZGxpbmsgb2YgbW90aGVyIGFuZCBiaXJ0aGRhdGUgb2YgY2hpbGQ6CmluZGl2aWR1YWxzID0gaW5kaXZpZHVhbHMgJT4lCiAgICBtdXRhdGUoYmlydGhkYXRlID0gYWxsX2F2YWlsYWJsZV9pbmZvX2JpcnRoX2RhdGUoYXIwOHlyLCBhcjA4bXRoLCBhcjA4ZGF5KSwKICAgICAgICAgICBtb3RoZXJfYmlydGhkYXRlID0gc3RyX2MobW90aGVyX3BpZGxpbmssICItIiwgYmlydGhkYXRlKSkgIyBtb3RoZXJfcGlkbGluay1ZWVlZLU1NOyBpcyBOQSBpZiBiaXJ0aF95ZWFyIGlzIG1pc3NpbmcKCmluZGl2aWR1YWxzID0gaW5kaXZpZHVhbHMgJT4lIGdyb3VwX2J5KG1vdGhlcl9waWRsaW5rKSAlPiUgCiAgbXV0YXRlKGJpcnRob3JkZXJfbmFpdmVfaW5kID0gaWZfZWxzZSghaXMubmEobW90aGVyX3BpZGxpbmspLCBtaW5fcmFuayhiaXJ0aGRhdGUpLCBOQV9pbnRlZ2VyXyksCiAgICAgICAgIHNpYmxpbmdfY291bnRfbmFpdmVfaW5kID0gaWZfZWxzZSghaXMubmEobW90aGVyX3BpZGxpbmspLCBuKCksIE5BX2ludGVnZXJfKSkgJT4lIAogIHVuZ3JvdXAoKQoKIyNSZW1vdmUgYWxsIHdpdGggbWlzc2luZyBtb3RoZXJfYmlydGhkYXRlCiMgaW5kaXZpZHVhbHMgPSBpbmRpdmlkdWFscyAlPiUKIyAgIGZpbHRlcighaXMubmEobW90aGVyX2JpcnRoZGF0ZSkpCgojIAojIGluZGl2aWR1YWxzID0gaW5kaXZpZHVhbHMgJT4lCiMgICBncm91cF9ieShtb3RoZXJfYmlydGhkYXRlKSAlPiUKIyAgIG11dGF0ZSh0d2luX29yZGVyID0gcm93X251bWJlcihiaXJ0aGRhdGUpLAojICAgICAgICAgIG1vdGhlcl9iaXJ0aGRhdGVfdW5pcXVlID0gcGFzdGUwKG1vdGhlcl9iaXJ0aGRhdGUsICItIiwgdHdpbl9vcmRlcikpICU+JQojICAgdW5ncm91cCgpICU+JQojICAgc2VsZWN0KG1vdGhlcl9iaXJ0aGRhdGVfdW5pcXVlLCBwaWRsaW5rLCBzZXgsIGFnZSkKIyAKIyAKIyBwcmVnbmFuY3lfbWlzc2luZyA9IHByZWduYW5jeSAlPiUKIyAgIG11dGF0ZShtaXNzaW5nID0gaWZlbHNlKCEobW90aGVyX2JpcnRoZGF0ZV91bmlxdWUgJWluJSBpbmRpdmlkdWFscyRtb3RoZXJfYmlydGhkYXRlX3VuaXF1ZSksCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAxLCAwKSkgJT4lCiMgICBmaWx0ZXIobWlzc2luZyA9PSAxKQoKIyBwcmV2ZW50IHRoYXQgdHdpbnMgZXhpc3QgNCB0aW1lcyBiZWNhdXNlIHRoZXkgYXBwZWFyIHR3aWNlIGluIHByZWduYW5jeSBhbmQgdHdpY2UgaW4gaW5kaXZpZHVhbHMsIGJ5IGVsaW1pbmF0aW5nIGR1cGVzIGZyb20gcHJlZ25hbmN5CiMgcHJlZ25hbmN5X25vdF9taXNzaW5nID0gcHJlZ25hbmN5ICU+JQojICAgbXV0YXRlKG1pc3NpbmcgPSBpZmVsc2UoIShtb3RoZXJfYmlydGhkYXRlX3VuaXF1ZSAlaW4lIGluZGl2aWR1YWxzJG1vdGhlcl9iaXJ0aGRhdGVfdW5pcXVlKSwKIyAgICAgICAgICAgICAgICAgICAgICAgICAgIDEsIDApKSAlPiUKIyAgIGZpbHRlcihtaXNzaW5nID09IDApICAgICAgICAgIAoKYWxsZGF0YV9wcmVnbmFuY3kgPSBmdWxsX2pvaW4ocHJlZ25hbmN5LCBpbmRpdmlkdWFscywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnkgPSBjKCJtb3RoZXJfcGlkbGluayIsICJiaXJ0aGRhdGUiLCAibW90aGVyX2JpcnRoZGF0ZSIpKSAlPiUgCiAgZGlzdGluY3QobW90aGVyX3BpZGxpbmssIGJpcnRoZGF0ZSwgcGlkbGluaywgLmtlZXBfYWxsID0gVFJVRSkKCmFsbGRhdGFfcHJlZ25hbmN5ID0gYWxsZGF0YV9wcmVnbmFuY3kgJT4lIGdyb3VwX2J5KG1vdGhlcl9waWRsaW5rKSAlPiUgCiAgbXV0YXRlKGJpcnRob3JkZXJfbmFpdmUgPSBtaW5fcmFuayhpZl9lbHNlKCFpcy5uYShtb3RoZXJfcGlkbGluayksIGJpcnRoZGF0ZSwgTkFfY2hhcmFjdGVyXykpLAogICAgICAgICBzaWJsaW5nX2NvdW50X25haXZlID0gaWZfZWxzZSghaXMubmEobW90aGVyX3BpZGxpbmspLCBuKCksIE5BX2ludGVnZXJfKSkgJT4lIAogICMgZmlsdGVyKGlzLm5hKGxpZmViaXJ0aHMpIHwgbGlmZWJpcnRocyA9PSAyKSAlPiUgCiAgIyBtdXRhdGUoYmlydGhvcmRlcl9uYWl2ZTMgPSBpZl9lbHNlKCFpcy5uYShtb3RoZXJfcGlkbGluaykgJiAoaXMubmEobGlmZWJpcnRocykgfCBsaWZlYmlydGhzID09IDIpLCBtaW5fcmFuayhiaXJ0aGRhdGUpLCBOQV9pbnRlZ2VyXyksCiAgIyAgICAgICAgc2libGluZ19jb3VudF9uYWl2ZTMgPSBpZl9lbHNlKCFpcy5uYShtb3RoZXJfcGlkbGluaykgJiAoaXMubmEobGlmZWJpcnRocykgfCBsaWZlYmlydGhzID09IDIpLCBzdW0oaXMubmEobGlmZWJpcnRocykgfCBsaWZlYmlydGhzID09IDIpLCBOQV9pbnRlZ2VyXykpICU+JSAKICB1bmdyb3VwKCkKCiMgYWxsZGF0YV9wcmVnbmFuY3kgPSBiaW5kX3Jvd3MoYWxsZGF0YV9wcmVnbmFuY3ksIHByZWduYW5jeV9taXNzaW5nKQoKcHJvcC50YWJsZSh0YWJsZShhbGxkYXRhX3ByZWduYW5jeSRtdWx0aXBsZV9iaXJ0aCkpCnByb3AudGFibGUodGFibGUoYWxsZGF0YV9wcmVnbmFuY3kkYW55X211bHRpcGxlX2JpcnRoKSkKCmFsbGRhdGFfcHJlZ25hbmN5ICU+JSBzZWxlY3QoYmlydGhvcmRlcl9uYWl2ZSxiaXJ0aG9yZGVyX25haXZlX2luZCxjaHJvbl9vcmRlcl9iaXJ0aCwgYmlydGhvcmRlcl91dGVydXNfYWxpdmUsIGJpcnRob3JkZXJfdXRlcnVzX3ByZWcsIGJpcnRob3JkZXJfZ2VuZXMpICU+JSBjb3IodXNlPSdwYWlyd2lzZS5jb21wbGV0ZS5vYnMnKSAlPiUgcm91bmQoMikKYWxsZGF0YV9wcmVnbmFuY3kgJT4lIHNlbGVjdChiaXJ0aG9yZGVyX25haXZlLCBjaHJvbl9vcmRlcl9iaXJ0aCwgYmlydGhvcmRlcl91dGVydXNfYWxpdmUsIGJpcnRob3JkZXJfdXRlcnVzX3ByZWcsIGJpcnRob3JkZXJfZ2VuZXMpICU+JSBjb2RlYm9vazo6bWRfcGF0dGVybigpCmFsbGRhdGFfcHJlZ25hbmN5ICU+JSBzZWxlY3Qoc2libGluZ19jb3VudF9uYWl2ZSwgc2libGluZ19jb3VudF91dGVydXNfYWxpdmUsIHNpYmxpbmdfY291bnRfdXRlcnVzX3ByZWcsIHNpYmxpbmdfY291bnRfZ2VuZXMpICU+JSBjb3IodXNlPSdwYWlyd2lzZS5jb21wbGV0ZS5vYnMnKSAlPiUgcm91bmQoMikKCnFwbG90KGRhdGE9YWxsZGF0YV9wcmVnbmFuY3ksc2libGluZ19jb3VudF9uYWl2ZSkgKyBmYWNldF93cmFwKH4gaXMubmEoc2libGluZ19jb3VudF91dGVydXNfcHJlZykpCnFwbG90KGRhdGE9YWxsZGF0YV9wcmVnbmFuY3ksYmlydGhvcmRlcl9uYWl2ZSkgKyBmYWNldF93cmFwKH4gaXMubmEoc2libGluZ19jb3VudF91dGVydXNfcHJlZykpCgojIHByb3AudGFibGUodGFibGUoYWxsZGF0YV9wcmVnbmFuY3kkYmlydGhvcmRlcl91dGVydXNfYWxpdmUgPT0gYWxsZGF0YV9wcmVnbmFuY3kkYmlydGhvcmRlcl9uYWl2ZTMpKQpwcm9wLnRhYmxlKHRhYmxlKGFsbGRhdGFfcHJlZ25hbmN5JGJpcnRob3JkZXJfdXRlcnVzX2FsaXZlID09IGFsbGRhdGFfcHJlZ25hbmN5JGJpcnRob3JkZXJfbmFpdmUpKQpwcm9wLnRhYmxlKHRhYmxlKGFsbGRhdGFfcHJlZ25hbmN5JGJpcnRob3JkZXJfdXRlcnVzX3ByZWcgPT0gYWxsZGF0YV9wcmVnbmFuY3kkYmlydGhvcmRlcl9uYWl2ZSkpCmdncGxvdChhbGxkYXRhX3ByZWduYW5jeSwgYWVzKHg9YmlydGhvcmRlcl91dGVydXNfYWxpdmUsIHk9YmlydGhvcmRlcl9uYWl2ZSkpICsgZ2VvbV9qaXR0ZXIoYWxwaGEgPSAwLjEpCiMgaXQgbWFrZXMgc2Vuc2UgdGhhdCB0aGUgYmlydGggb3JkZXIgYmFzZWQgb24gaW5jbHVkaW5nIHRoZSBwcmVnbmFuY3kgZmlsZSBpcyBzdHJpY3RseSBoaWdoZXIsIGJlY2F1c2UKIyB0aGlzIGluY2x1ZGVzIHBlb3BsZSB3aG8gbW92ZWQgYXdheQpnZ3Bsb3QoYWxsZGF0YV9wcmVnbmFuY3ksIGFlcyh4PWJpcnRob3JkZXJfbmFpdmVfaW5kLCB5PWJpcnRob3JkZXJfbmFpdmUpKSArIGdlb21faml0dGVyKGFscGhhID0gMC4xKQpnZ3Bsb3QoYWxsZGF0YV9wcmVnbmFuY3ksIGFlcyh4PXNpYmxpbmdfY291bnRfbmFpdmVfaW5kLCB5PXNpYmxpbmdfY291bnRfbmFpdmUpKSArIGdlb21faml0dGVyKGFscGhhID0gMC4xKQoKYWxsZGF0YV9wcmVnbmFuY3kgJT4lIGZpbHRlcihiaXJ0aG9yZGVyX25haXZlICE9IGJpcnRob3JkZXJfdXRlcnVzX2FsaXZlKSAlPiUgc2VsZWN0KGJpcnRob3JkZXJfbmFpdmUsYmlydGhvcmRlcl9uYWl2ZV9pbmQsIGJpcnRob3JkZXJfdXRlcnVzX2FsaXZlLCBzaWJsaW5nX2NvdW50X3V0ZXJ1c19hbGl2ZSwgbW90aGVyX3BpZGxpbmssIGJpcnRoZGF0ZSwgbW90aGVyX2JpcnRoZGF0ZSkgJT4lIFZpZXcoKQoKIyBhbGxkYXRhX3ByZWduYW5jeSAlPiUgZmlsdGVyKG1vdGhlcl9waWRsaW5rID09ICIwMDEwNjAwMDciKSAlPiUgc2VsZWN0KGJpcnRob3JkZXJfbmFpdmUsYmlydGhvcmRlcl9uYWl2ZV9pbmQsIGJpcnRob3JkZXJfdXRlcnVzX2FsaXZlLCBzaWJsaW5nX2NvdW50X25haXZlLCBzaWJsaW5nX2NvdW50X3V0ZXJ1c19hbGl2ZSwgbW90aGVyX3BpZGxpbmssIGJpcnRoZGF0ZSwgbW90aGVyX2JpcnRoZGF0ZSkgJT4lIFZpZXcoKQoKCmNvci50ZXN0KGFsbGRhdGFfcHJlZ25hbmN5JHNpYmxpbmdfY291bnRfdXRlcnVzX2FsaXZlLCBhbGxkYXRhX3ByZWduYW5jeSRzaWJsaW5nX2NvdW50X25haXZlKQpjcm9zc3RhYnMoYWxsZGF0YV9wcmVnbmFuY3kkc2libGluZ19jb3VudF91dGVydXNfYWxpdmUgPT0gYWxsZGF0YV9wcmVnbmFuY3kkc2libGluZ19jb3VudF9uYWl2ZV9pbmQpCmNyb3NzdGFicyhhbGxkYXRhX3ByZWduYW5jeSRzaWJsaW5nX2NvdW50X3V0ZXJ1c19hbGl2ZSA9PSBhbGxkYXRhX3ByZWduYW5jeSRzaWJsaW5nX2NvdW50X25haXZlKQpjcm9zc3RhYnMofiBJKHNpYmxpbmdfY291bnRfdXRlcnVzX2FsaXZlID09IHNpYmxpbmdfY291bnRfbmFpdmVfaW5kKSArIAogICAgICAgICAgICBJKHNpYmxpbmdfY291bnRfdXRlcnVzX2FsaXZlID09IHNpYmxpbmdfY291bnRfbmFpdmUpLCBhbGxkYXRhX3ByZWduYW5jeSkKY3Jvc3N0YWJzKGFsbGRhdGFfcHJlZ25hbmN5JHNpYmxpbmdfY291bnRfdXRlcnVzX2FsaXZlID09IGFsbGRhdGFfcHJlZ25hbmN5JHNpYmxpbmdfY291bnRfbmFpdmUpCmdncGxvdChhbGxkYXRhX3ByZWduYW5jeSwgYWVzKHg9c2libGluZ19jb3VudF91dGVydXNfYWxpdmUsIHk9c2libGluZ19jb3VudF9uYWl2ZSkpICsgZ2VvbV9qaXR0ZXIoYWxwaGEgPSAwLjEpCgpjcm9zc3RhYnMoIH4gSShzaWJsaW5nX2NvdW50X3V0ZXJ1c19hbGl2ZSA9PSBzaWJsaW5nX2NvdW50X25haXZlKSArIGlzLm5hKGJpcnRoZGF0ZSksIGRhdGEgPSBhbGxkYXRhX3ByZWduYW5jeSkKYGBgCgoKIyMgSW50ZWxsaWdlbmNlIHsudGFic2V0fQpgYGB7ciBzZWxlY3QgSVEgZGF0YX0KIyMjIElRIEluZm9ybWF0aW9ucyBmcm9tIHdhdmUgNSAoMjAxNCkKIyNlazIgKD4xNHlycywgaW5jbHVkZXMgb25seSBpbmRpdmlkdWFscywgdGhhdCBhcmUgMTUgeWVhcnMgb3Igb2xkZXIpCmlxMi4xID0gZWtfZWsyICU+JSBzZWxlY3QoaGhpZDE0XzksIHBpZGxpbmssIGFnZSwgc2V4LCBla3R5cGUsIHJlc3B0eXBlLCByZXN1bHQsIHJlYXNvbiwgZWsxX2FucywgZWsyX2FucywgZWszX2FucywgZWs0X2FucywgZWs1X2FucywgZWs2X2FucywgZWs3X2FucywgZWs4X2FucywgZWs5X2FucywgZWsxMF9hbnMsIGVrMTFfYW5zLCBlazEyX2FucywgZWsxM19hbnMsIGVrMTRfYW5zLCBlazE1X2FucywgZWsxNl9hbnMsIGVrMTdfYW5zLCBlazE4X2FucywgZWsxOV9hbnMsIGVrMjBfYW5zLCBlazIxX2FucywgZWsyMl9hbnMpCgojI2VrMiAoPDE0eXJzLCBpbmNsdWRlcyBhbGwgaW5kaXZpZHVhbHMsIHRoYXQgYXJlIHlvdW5nZXIgdGhhbiAxNSB5ZWFycyBvbGQpCmlxMy4xID0gZWtfZWsxICU+JSBzZWxlY3QoaGhpZDE0XzksIHBpZGxpbmssIGFnZSwgc2V4LCBla3R5cGUsIHJlc3B0eXBlLCByZXN1bHQsIHJlYXNvbiwgZWsxX2FucywgZWsyX2FucywgZWszX2FucywgZWs0X2FucywgZWs1X2FucywgZWs2X2FucywgZWs3X2FucywgZWs4X2FucywgZWs5X2FucywgZWsxMF9hbnMsIGVrMTFfYW5zLCBlazEyX2FucywgZWsxM19hbnMsIGVrMTRfYW5zLCBlazE1X2FucywgZWsxNl9hbnMsIGVrMTdfYW5zLCBlazE4X2FucywgZWsxOV9hbnMsIGVrMjBfYW5zLCBlazIxX2FucywgZWsyMl9hbnMpCgojIyMjIFJhdmVuIFRlc3QgKHdhdmUgMjAxNSwgeW91bmdlciB0aGFuIDE1IHllYXJzKQphbnN3ZXJlZF9yYXZlbl9pdGVtcyA9IGlxMy4xICU+JSBzZWxlY3QoZWsxX2FuczplazEyX2FucykKcHN5Y2g6OmFscGhhKGRhdGEuZnJhbWUoYW5zd2VyZWRfcmF2ZW5faXRlbXMpKQppcTMuMSRyYXZlbl8yMDE1X3lvdW5nID0gcm93TWVhbnMoIGFuc3dlcmVkX3JhdmVuX2l0ZW1zLCBuYS5ybSA9IFQpCnFwbG90KGlxMy4xJHJhdmVuXzIwMTVfeW91bmcpCgojIyMjIE1hdGggVGVzdCAod2F2ZSAyMDE1LCB5b3VuZ2VyIHRoYW4gMTUgeWVhcnMpCmFuc3dlcmVkX21hdGhfaXRlbXMgPSBpcTMuMSAlPiUgc2VsZWN0KGVrMTNfYW5zOmVrMTdfYW5zKQpwc3ljaDo6YWxwaGEoZGF0YS5mcmFtZShhbnN3ZXJlZF9tYXRoX2l0ZW1zKSkKaXEzLjEkbWF0aF8yMDE1X3lvdW5nID0gcm93TWVhbnMoIGFuc3dlcmVkX21hdGhfaXRlbXMsIG5hLnJtID0gVCkKcXBsb3QoaXEzLjEkbWF0aF8yMDE1X3lvdW5nKQoKaXEzLjEgPSBpcTMuMSAlPiUgc2VsZWN0KHBpZGxpbmssIGFnZV8yMDE1X3lvdW5nID0gYWdlLCBzZXhfMjAxNV95b3VuZyA9IHNleCwKICAgICAgICAgICAgICAgICAgICAgICAgIHJhdmVuXzIwMTVfeW91bmcsIG1hdGhfMjAxNV95b3VuZykKCiMjYWRkaXRpb25hbCBpbmZvcm1hdGlvbnMgZm9yIGFkdWx0czogY291bnRpbmcgYmFja3dhcmRzCmlxMi4yID0gYjNiX2NvMSAlPiUgc2VsZWN0KGhoaWQxNF85LCBwaWRsaW5rLCBjbzA0YSwgY28wNGIsIGNvMDRjLCBjbzA0ZCwgY28wNGUsIGNvMDdjb3VudCwgY28xMGNvdW50KQojI2FkZGl0aW9uYWwgaW5mb3JtYXRpb25zIGZvciBhZHVsdHM6IGFkYXB0aXZlIG51bWJlciB0ZXN0CmlxMi4zID0gYjNiX2NvYiAlPiUgc2VsZWN0KGhoaWQxNF85LCBwaWRsaW5rLCB3X2FiaWwsIGNvYjE4LCBjb2IxOWIpCgojIyBwdXQgYWxsIHRoZSBpbmZvcm1hdGlvbnMgZm9yIHBhcnRpY2lwYW50cyA+PSAxNSB0b2dldGhlcgppcTIgPSBmdWxsX2pvaW4oaXEyLjEsIGlxMi4yLCBieSA9ICJwaWRsaW5rIikKaXEyID0gZnVsbF9qb2luKGlxMiwgaXEyLjMsIGJ5ID0gInBpZGxpbmsiKQppcSA9IGlxMgppcSA9IGZ1bGxfam9pbihpcSwgaXEzLjEsIGJ5ID0gInBpZGxpbmsiKQoKIyMjIGNhbGN1bGF0ZSBpcSBzY29yZXMKIyNSYXZlbiBUZXN0ICh3YXZlIDIwMTUsIG9sZGVyIHRoYW4gMTQgeWVhcnMpCmFuc3dlcmVkX3JhdmVuX2l0ZW1zID0gaXEgJT4lIHNlbGVjdChlazFfYW5zOmVrNl9hbnMsIGVrMTFfYW5zLCBlazEyX2FucykKcHN5Y2g6OmFscGhhKGRhdGEuZnJhbWUoYW5zd2VyZWRfcmF2ZW5faXRlbXMpKQppcSRyYXZlbl8yMDE1X29sZCA9IHJvd01lYW5zKCBhbnN3ZXJlZF9yYXZlbl9pdGVtcywgbmEucm0gPSBUKQppcSRyYXZlbl8yMDE1X29sZFshIGlxJHJlc3VsdCAlaW4lIDE6Ml0gPSBOQQpxcGxvdChpcSRyYXZlbl8yMDE1X29sZCkKCiMjTWF0aCBUZXN0ICh3YXZlIDIwMTUsIG9sZGVyIHRoYW4gMTQgeWVhcnMpCmFuc3dlcmVkX21hdGhfaXRlbXMgPSBpcSAlPiUgc2VsZWN0KGVrMThfYW5zOmVrMjJfYW5zKQpwc3ljaDo6YWxwaGEoZGF0YS5mcmFtZShhbnN3ZXJlZF9tYXRoX2l0ZW1zKSkKaXEkbWF0aF8yMDE1X29sZCA9IHJvd01lYW5zKCBhbnN3ZXJlZF9tYXRoX2l0ZW1zLCBuYS5ybSA9IFQpCmlxJG1hdGhfMjAxNV9vbGRbISBpcSRyZXN1bHQgJWluJSAxOjJdID0gTkEKcXBsb3QoaXEkbWF0aF8yMDE1X29sZCkKCgojI0NvdW50aW5nIEl0ZW1zCiMgQ3JlYXRlIFJpZ2h0L1dyb25nIFNjb3JlcyBmb3IgdGhlIGNvdW50aW5nIGl0ZW1zCmlxJGNvMDRhcmlnaHQgPSBhcy5udW1lcmljKGlxJGNvMDRhID09IDkzKQppcSRjbzA0YnJpZ2h0ID0gYXMubnVtZXJpYyhpcSRjbzA0YiA9PSBpcSRjbzA0YS03KQppcSRjbzA0Y3JpZ2h0ID0gYXMubnVtZXJpYyhpcSRjbzA0YyA9PSBpcSRjbzA0Yi03KQppcSRjbzA0ZHJpZ2h0ID0gYXMubnVtZXJpYyhpcSRjbzA0ZCA9PSBpcSRjbzA0Yy03KQppcSRjbzA0ZXJpZ2h0ID0gYXMubnVtZXJpYyhpcSRjbzA0ZSA9PSBpcSRjbzA0ZC03KQoKYW5zd2VyZWRfY291bnRpbmdfaXRlbXMgPSBpcSAlPiUgc2VsZWN0KGNvMDRhcmlnaHQ6Y28wNGVyaWdodCkKcHN5Y2g6OmFscGhhKGRhdGEuZnJhbWUoYW5zd2VyZWRfY291bnRpbmdfaXRlbXMpKQppcSRjb3VudF9iYWNrd2FyZHMgPSByb3dNZWFucyggYW5zd2VyZWRfY291bnRpbmdfaXRlbXMsIG5hLnJtID0gVCkKcXBsb3QoaXEkY291bnRfYmFja3dhcmRzKQoKIyMgV29yZCBNZW1vcnkKaXEkd29yZHNfaW1tZWRpYXRlID0gaXEkY28wN2NvdW50CmlxJHdvcmRzX2RlbGF5ZWQgPSBpcSRjbzEwY291bnQKcXBsb3QoaXEkd29yZHNfaW1tZWRpYXRlLCBpcSR3b3Jkc19kZWxheWVkLCBnZW9tID0gImppdHRlciIpCmFuc3dlcmVkX3dvcmRfaXRlbXMgPSBpcSAlPiUgc2VsZWN0KGNvMDdjb3VudCxjbzEwY291bnQpCnBzeWNoOjphbHBoYShkYXRhLmZyYW1lKGFuc3dlcmVkX3dvcmRfaXRlbXMpKQppcSR3b3Jkc19yZW1lbWJlcmVkX2F2ZyA9IHJvd01lYW5zKCBhbnN3ZXJlZF93b3JkX2l0ZW1zLCBuYS5ybSA9IFQpCnFwbG90KGlxJHdvcmRzX3JlbWVtYmVyZWRfYXZnKQoKIyNBZGFwdGl2ZSBOdW1iZXJpbmcKaXEkYWRhcHRpdmVfbnVtYmVyaW5nID0gaXEkd19hYmlsCnFwbG90KGlxJGFkYXB0aXZlX251bWJlcmluZykKYGBgCgojIyMgSVEtVGVzdHMgZWFybGllciB3YXZlcwpgYGB7cn0KIyMgV2F2ZSA0IC0gMjAwNwojIyMgRGF0YQppcTIwMDdfZWsyPSBiZWtfZWsyICU+JQogIHNlbGVjdChwaWRsaW5rLCBla3R5cGUsICJhZ2VfMjAwNyIgPSBhZ2UsIG1hdGNoZXMoImVrWzAtOV14IiksCiAgICAgICAgIG1hdGNoZXMoImVrWzAtOV1bMC05XXgiKSkKCmlxMjAwN19lazE9IGJla19lazEgJT4lCiAgc2VsZWN0KHBpZGxpbmssIGVrdHlwZSwgImFnZV8yMDA3IiA9IGFnZSwgbWF0Y2hlcygiZWtbMC05XXgiKSwKICAgICAgICAgbWF0Y2hlcygiZWtbMC05XVswLTldeCIpKSAlPiUKICBmaWx0ZXIoIShwaWRsaW5rICVpbiUgaXEyMDA3X2VrMiRwaWRsaW5rKSkKCiMgc29tZSBwZW9wbGUgYW5zd2VyZWQgYm90aCB2ZXJzaW9ucyBvZiB0aGUgdGVzdAojIChkZXBlbmRpbmcgb24gd2hldGhlciB0aGV5IGhhZCBzZWVuIHRlc3QgZWsxIGFscmVhZHkgaW4gMjAwMCkKIyBJbiBvcmRlciB0byBkZWFsIHdpdGggdGhlbSBpIGZvcm0gYW4gYWRkaXRpb25hbCBkYXRhc2V0IHRoYXQgaW5jbHVkZXMgdGhlIGluZm9ybWF0aW9uIGZyb20KIyB0aGUgcGVvcGxlIHRoYXQgcmVwZWF0ZWQgdGhlIGZpcnN0IHRlc3QgYW5kIHRoZWlyIHNjb3JlIG9uIHRoZSBmaXJzdCB0ZXN0IGluIDIwMDcKIyB0aGF0IG1lYW5zIHRoZXkgaGF2ZSBhbHJlYWR5IHNlZW4gdGhlIHRlc3QgNyB5ZWFycyBiZWZvcmUuLi4KIyBpIG1lcmdlIHRoaXMgZGF0YSBsYXRlciBpbiB0aGUgc2FtZSBjb2x1bW4gYXMgdGhlIG90aGVyIHNjb3JlcyBpbiAyMDA3IGluIHRoZSBmaXJzdCB0ZXN0CiMgY2hlY2sgd2l0aCBSdWJlbiwgaWYgdGhhdCBpcyB0aGUgcmlnaHQgd2F5IHRvIGdvLi4uCgppcTIwMDdfZWsxX3JlcGVhdGVyID0gYmVrX2VrMSAlPiUKICBzZWxlY3QocGlkbGluaywgZWt0eXBlLCAiYWdlXzIwMDciID0gYWdlLCBtYXRjaGVzKCJla1swLTldeCIpLAogICAgICAgICBtYXRjaGVzKCJla1swLTldWzAtOV14IikpICU+JQogIGZpbHRlcigocGlkbGluayAlaW4lIGlxMjAwN19lazIkcGlkbGluaykpCgppcTIwMDcgPSBiaW5kX3Jvd3MoaXEyMDA3X2VrMSwgaXEyMDA3X2VrMikgCgojIyMgUmF2ZW4KaXEyMDA3ID0gaXEyMDA3ICU+JQogIG11dGF0ZShlazF4ID0gaWZlbHNlKGVrMXggPT0gMSwgMSwKICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoZWsxeCA9PSA2LCBOQSwgMCkpLAogICAgICAgICBlazJ4ID0gaWZlbHNlKGVrMnggPT0gMSwgIDEsCiAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGVrMnggPT0gNiwgTkEsIDApKSwKICAgICAgICAgZWszeCA9IGlmZWxzZShlazN4ID09IDEsICAxLAogICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShlazN4ID09IDYsIE5BLCAwKSksCiAgICAgICAgIGVrNHggPSBpZmVsc2UoZWs0eCA9PSAxLCAgMSwKICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoZWs0eCA9PSA2LCBOQSwgMCkpLAogICAgICAgICBlazV4ID0gaWZlbHNlKGVrNXggPT0gMSwgIDEsCiAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGVrNXggPT0gNiwgTkEsIDApKSwKICAgICAgICAgZWs2eCA9IGlmZWxzZShlazZ4ID09IDEsICAxLAogICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShlazZ4ID09IDYsIE5BLCAwKSksCiAgICAgICAgIGVrN3ggPSBpZmVsc2UoZWs3eCA9PSAxLCAgMSwKICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoZWs3eCA9PSA2LCBOQSwgMCkpLAogICAgICAgICBlazh4ID0gaWZlbHNlKGVrOHggPT0gMSwgIDEsCiAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGVrOHggPT0gNiwgTkEsIDApKSwKICAgICAgICAgZWs5eCA9IGlmZWxzZShlazl4ID09IDEsICAxLAogICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShlazl4ID09IDYsIE5BLCAwKSksCiAgICAgICAgIGVrMTB4ID0gaWZlbHNlKGVrMTB4ID09IDEsIDEsCiAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGVrMTB4ID09IDYsIE5BLCAwKSksCiAgICAgICAgIGVrMTF4ID0gaWZlbHNlKGVrMTF4ID09IDEsICAxLAogICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShlazExeCA9PSA2LCBOQSwgMCkpLAogICAgICAgICBlazEyeCA9IGlmZWxzZShlazEyeCA9PSAxLCAgMSwKICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoZWsxMnggPT0gNiwgTkEsIDApKSkKCmFuc3dlcmVkX3JhdmVuX2l0ZW1zID0gaXEyMDA3ICU+JSBzZWxlY3QoZWsxeDplazEyeCkKcHN5Y2g6OmFscGhhKGRhdGEuZnJhbWUoYW5zd2VyZWRfcmF2ZW5faXRlbXMpKQppcTIwMDckcmF2ZW4yMDA3ID0gcm93TWVhbnMoYW5zd2VyZWRfcmF2ZW5faXRlbXMsIG5hLnJtID0gVCkKaXEyMDA3ID0gaXEyMDA3ICU+JQogIG11dGF0ZShyYXZlbl8yMDA3X3lvdW5nID0gaWZlbHNlKGVrdHlwZSA9PSAxLCByYXZlbjIwMDcsIE5BKSwKICAgICAgICAgcmF2ZW5fMjAwN19vbGQgPSBpZmVsc2UoZWt0eXBlID09IDIsIHJhdmVuMjAwNywgTkEpKQpxcGxvdChpcTIwMDckcmF2ZW5fMjAwN195b3VuZykKcXBsb3QoaXEyMDA3JHJhdmVuXzIwMDdfb2xkKQoKCiMjTWF0aCBUZXN0CmlxMjAwNyA9IGlxMjAwNyAlPiUKICBtdXRhdGUoZWsxM3ggPSBpZmVsc2UoZWsxM3ggPT0gMSwgMSwKICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoZWsxM3ggPT0gNiwgTkEsIDApKSwKICAgICAgICAgZWsxNHggPSBpZmVsc2UoZWsxNHggPT0gMSwgIDEsCiAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGVrMTR4ID09IDYsIE5BLCAwKSksCiAgICAgICAgIGVrMTV4ID0gaWZlbHNlKGVrMTV4ID09IDEsICAxLAogICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShlazE1eCA9PSA2LCBOQSwgMCkpLAogICAgICAgICBlazE2eCA9IGlmZWxzZShlazE2eCA9PSAxLCAgMSwKICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoZWsxNnggPT0gNiwgTkEsIDApKSwKICAgICAgICAgZWsxN3ggPSBpZmVsc2UoZWsxN3ggPT0gMSwgIDEsCiAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGVrMTd4ID09IDYsIE5BLCAwKSksCiAgICAgICAgIGVrMTh4ID0gaWZlbHNlKGVrMTh4ID09IDEsICAxLAogICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShlazE4eCA9PSA2LCBOQSwgMCkpLAogICAgICAgICBlazE5eCA9IGlmZWxzZShlazE5eCA9PSAxLCAgMSwKICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoZWsxOXggPT0gNiwgTkEsIDApKSwKICAgICAgICAgZWsyMHggPSBpZmVsc2UoZWsyMHggPT0gMSwgIDEsCiAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGVrMjB4ID09IDYsIE5BLCAwKSksCiAgICAgICAgIGVrMjF4ID0gaWZlbHNlKGVrMjF4ID09IDEsICAxLAogICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShlazIxeCA9PSA2LCBOQSwgMCkpLAogICAgICAgICBlazIyeCA9IGlmZWxzZShlazIyeCA9PSAxLCAxLAogICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShlazIyeCA9PSA2LCBOQSwgMCkpKQoKYW5zd2VyZWRfbWF0aF9pdGVtcyA9IGlxMjAwNyAlPiUgc2VsZWN0KGVrMTN4OmVrMjJ4KQppcTIwMDckbWF0aDIwMDcgPSByb3dNZWFucyggYW5zd2VyZWRfbWF0aF9pdGVtcywgbmEucm0gPSBUKQppcTIwMDcgPSBpcTIwMDcgJT4lCiAgbXV0YXRlKG1hdGhfMjAwN195b3VuZyA9IGlmZWxzZShla3R5cGUgPT0gMSwgbWF0aDIwMDcsIE5BKSwKICAgICAgICAgbWF0aF8yMDA3X29sZCA9IGlmZWxzZShla3R5cGUgPT0gMiwgbWF0aDIwMDcsIE5BKSkKcXBsb3QoaXEyMDA3JG1hdGhfMjAwN195b3VuZykKcXBsb3QoaXEyMDA3JG1hdGhfMjAwN19vbGQpCgoKaXEyMDA3ID0gaXEyMDA3ICU+JSBzZWxlY3QocGlkbGluaywgYWdlXzIwMDcsIHJhdmVuXzIwMDdfeW91bmcsIHJhdmVuXzIwMDdfb2xkLAogICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRoXzIwMDdfeW91bmcsIG1hdGhfMjAwN19vbGQpCgojI0RvIHRoZSBzYW1lIGZvciB0aGUgcmVwZWF0ZXIKIyMjIFJhdmVuCmlxMjAwN19lazFfcmVwZWF0ZXIgPSBpcTIwMDdfZWsxX3JlcGVhdGVyICU+JQogIG11dGF0ZShlazF4ID0gaWZlbHNlKGVrMXggPT0gMSwgMSwKICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoZWsxeCA9PSA2LCBOQSwgMCkpLAogICAgICAgICBlazJ4ID0gaWZlbHNlKGVrMnggPT0gMSwgIDEsCiAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGVrMnggPT0gNiwgTkEsIDApKSwKICAgICAgICAgZWszeCA9IGlmZWxzZShlazN4ID09IDEsICAxLAogICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShlazN4ID09IDYsIE5BLCAwKSksCiAgICAgICAgIGVrNHggPSBpZmVsc2UoZWs0eCA9PSAxLCAgMSwKICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoZWs0eCA9PSA2LCBOQSwgMCkpLAogICAgICAgICBlazV4ID0gaWZlbHNlKGVrNXggPT0gMSwgIDEsCiAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGVrNXggPT0gNiwgTkEsIDApKSwKICAgICAgICAgZWs2eCA9IGlmZWxzZShlazZ4ID09IDEsICAxLAogICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShlazZ4ID09IDYsIE5BLCAwKSksCiAgICAgICAgIGVrN3ggPSBpZmVsc2UoZWs3eCA9PSAxLCAgMSwKICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoZWs3eCA9PSA2LCBOQSwgMCkpLAogICAgICAgICBlazh4ID0gaWZlbHNlKGVrOHggPT0gMSwgIDEsCiAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGVrOHggPT0gNiwgTkEsIDApKSwKICAgICAgICAgZWs5eCA9IGlmZWxzZShlazl4ID09IDEsICAxLAogICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShlazl4ID09IDYsIE5BLCAwKSksCiAgICAgICAgIGVrMTB4ID0gaWZlbHNlKGVrMTB4ID09IDEsIDEsCiAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGVrMTB4ID09IDYsIE5BLCAwKSksCiAgICAgICAgIGVrMTF4ID0gaWZlbHNlKGVrMTF4ID09IDEsICAxLAogICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShlazExeCA9PSA2LCBOQSwgMCkpLAogICAgICAgICBlazEyeCA9IGlmZWxzZShlazEyeCA9PSAxLCAgMSwKICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoZWsxMnggPT0gNiwgTkEsIDApKSkKCmFuc3dlcmVkX3JhdmVuX2l0ZW1zID0gaXEyMDA3X2VrMV9yZXBlYXRlciAlPiUgc2VsZWN0KGVrMXg6ZWsxMngpCnBzeWNoOjphbHBoYShkYXRhLmZyYW1lKGFuc3dlcmVkX3JhdmVuX2l0ZW1zKSkKaXEyMDA3X2VrMV9yZXBlYXRlciRyYXZlbl8yMDA3X3lvdW5nX3JlcGVhdGVyID0gcm93TWVhbnMoYW5zd2VyZWRfcmF2ZW5faXRlbXMsIG5hLnJtID0gVCkKcXBsb3QoaXEyMDA3X2VrMV9yZXBlYXRlciRyYXZlbl8yMDA3X3lvdW5nX3JlcGVhdGVyKQoKCiMjTWF0aCBUZXN0CmlxMjAwN19lazFfcmVwZWF0ZXIgPSBpcTIwMDdfZWsxX3JlcGVhdGVyICU+JQogIG11dGF0ZShlazEzeCA9IGlmZWxzZShlazEzeCA9PSAxLCAxLAogICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShlazEzeCA9PSA2LCBOQSwgMCkpLAogICAgICAgICBlazE0eCA9IGlmZWxzZShlazE0eCA9PSAxLCAgMSwKICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoZWsxNHggPT0gNiwgTkEsIDApKSwKICAgICAgICAgZWsxNXggPSBpZmVsc2UoZWsxNXggPT0gMSwgIDEsCiAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGVrMTV4ID09IDYsIE5BLCAwKSksCiAgICAgICAgIGVrMTZ4ID0gaWZlbHNlKGVrMTZ4ID09IDEsICAxLAogICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShlazE2eCA9PSA2LCBOQSwgMCkpLAogICAgICAgICBlazE3eCA9IGlmZWxzZShlazE3eCA9PSAxLCAgMSwKICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoZWsxN3ggPT0gNiwgTkEsIDApKSwKICAgICAgICAgZWsxOHggPSBpZmVsc2UoZWsxOHggPT0gMSwgIDEsCiAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGVrMTh4ID09IDYsIE5BLCAwKSksCiAgICAgICAgIGVrMTl4ID0gaWZlbHNlKGVrMTl4ID09IDEsICAxLAogICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShlazE5eCA9PSA2LCBOQSwgMCkpLAogICAgICAgICBlazIweCA9IGlmZWxzZShlazIweCA9PSAxLCAgMSwKICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoZWsyMHggPT0gNiwgTkEsIDApKSwKICAgICAgICAgZWsyMXggPSBpZmVsc2UoZWsyMXggPT0gMSwgIDEsCiAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGVrMjF4ID09IDYsIE5BLCAwKSksCiAgICAgICAgIGVrMjJ4ID0gaWZlbHNlKGVrMjJ4ID09IDEsIDEsCiAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGVrMjJ4ID09IDYsIE5BLCAwKSkpCgphbnN3ZXJlZF9tYXRoX2l0ZW1zID0gaXEyMDA3X2VrMV9yZXBlYXRlciAlPiUgc2VsZWN0KGVrMTN4OmVrMjJ4KQppcTIwMDdfZWsxX3JlcGVhdGVyJG1hdGhfMjAwN195b3VuZ19yZXBlYXRlciA9IHJvd01lYW5zKCBhbnN3ZXJlZF9tYXRoX2l0ZW1zLCBuYS5ybSA9IFQpCnFwbG90KGlxMjAwN19lazFfcmVwZWF0ZXIkbWF0aF8yMDA3X3lvdW5nX3JlcGVhdGVyKQoKaXEyMDA3X2VrMV9yZXBlYXRlciA9IGlxMjAwN19lazFfcmVwZWF0ZXIgJT4lIHNlbGVjdChwaWRsaW5rLCByYXZlbl8yMDA3X3lvdW5nX3JlcGVhdGVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGhfMjAwN195b3VuZ19yZXBlYXRlcikKCmlxMjAwN19hbGwgPSBsZWZ0X2pvaW4oaXEyMDA3LCBpcTIwMDdfZWsxX3JlcGVhdGVyLCBieSA9ICJwaWRsaW5rIikKCiMgTm93IHdlIGluc3RlcnQgcmF2ZW4gYW5kIG1hdGggc2NvcmVzIGZyb20gdGhlIHJlcGVhdGVycyBhcyByYXZlbiBhbmQgbWF0aCBzY29yZXMgeW91bmcKIyBUcmVhdCB0aGVtIGxpa2UgYWxsIHRoZSBvdGhlcnMuCmNyb3NzdGFicyhpcy5uYShpcTIwMDdfYWxsJHJhdmVuXzIwMDdfeW91bmcpICsgaXMubmEoaXEyMDA3X2FsbCRyYXZlbl8yMDA3X3lvdW5nX3JlcGVhdGVyKSkKCmlxMjAwN19hbGwgPSBpcTIwMDdfYWxsICU+JQogIG11dGF0ZShyYXZlbl8yMDA3X3lvdW5nID0gaWZlbHNlKCFpcy5uYShyYXZlbl8yMDA3X3lvdW5nX3JlcGVhdGVyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXZlbl8yMDA3X3lvdW5nX3JlcGVhdGVyLCByYXZlbl8yMDA3X3lvdW5nKSwKICAgICAgICAgbWF0aF8yMDA3X3lvdW5nID0gaWZlbHNlKCFpcy5uYShtYXRoXzIwMDdfeW91bmdfcmVwZWF0ZXIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0aF8yMDA3X3lvdW5nX3JlcGVhdGVyLCBtYXRoXzIwMDdfeW91bmcpKQoKaXEyMDA3X2FsbCA9IGlxMjAwN19hbGwgJT4lIHNlbGVjdChwaWRsaW5rLCBhZ2VfMjAwNywgcmF2ZW5fMjAwN19vbGQsIHJhdmVuXzIwMDdfeW91bmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0aF8yMDA3X3lvdW5nLCBtYXRoXzIwMDdfb2xkKQppcSA9IGZ1bGxfam9pbihpcSwgaXEyMDA3X2FsbCwgYnkgPSAicGlkbGluayIpCmBgYAoKYGBge3J9CiMjIElRIFRlc3RzIAojIyBDb3JyZWxhdGlvbiBvZiBhbGwgSXEtVGVzdHMKcm91bmQoY29yKGlxICU+JSBzZWxlY3QocmF2ZW5fMjAxNV9vbGQsIG1hdGhfMjAxNV9vbGQsIHJhdmVuXzIwMTVfeW91bmcsIG1hdGhfMjAxNV95b3VuZywgY291bnRfYmFja3dhcmRzLCB3b3Jkc19pbW1lZGlhdGUsIHdvcmRzX2RlbGF5ZWQsIGFkYXB0aXZlX251bWJlcmluZywgcmF2ZW5fMjAwN19vbGQsIG1hdGhfMjAwN195b3VuZyksIHVzZSA9ICJwYWlyd2lzZS5jb21wbGV0ZS5vYnMiKSwgMikKCiMjTWlzc2luZ25lc3NfUGF0dGVybnMKZm9ybXI6Om1pc3NpbmduZXNzX3BhdHRlcm5zKGlxICU+JSBzZWxlY3QocmF2ZW5fMjAxNV9vbGQsIG1hdGhfMjAxNV9vbGQsIHJhdmVuXzIwMTVfeW91bmcsIG1hdGhfMjAxNV95b3VuZywgY291bnRfYmFja3dhcmRzLCB3b3Jkc19pbW1lZGlhdGUsIHdvcmRzX2RlbGF5ZWQsIGFkYXB0aXZlX251bWJlcmluZywgcmF2ZW5fMjAwN19vbGQsIG1hdGhfMjAwN195b3VuZykpCgppcSAlPiUgc2VsZWN0KHJhdmVuXzIwMTVfb2xkLCBtYXRoXzIwMTVfb2xkLCByYXZlbl8yMDE1X3lvdW5nLCBtYXRoXzIwMTVfeW91bmcsIGNvdW50X2JhY2t3YXJkcywgd29yZHNfaW1tZWRpYXRlLCB3b3Jkc19kZWxheWVkLCBhZGFwdGl2ZV9udW1iZXJpbmcpICU+JSB0aWR5cjo6Z2F0aGVyKCkgJT4lIAogIGdncGxvdChhZXModmFsdWUpKSArIGdlb21fYmFyKCkgKyBmYWNldF93cmFwKH4ga2V5LCBzY2FsZXMgPSAiZnJlZSIpCiMjZ19mYWN0b3IKImdfZmFjdG9yID1+IHJhdmVuXzIwMTVfb2xkICsgbWF0aF8yMDE1X29sZCArIGNvdW50X2JhY2t3YXJkcyArICB3b3Jkc19kZWxheWVkICsgYWRhcHRpdmVfbnVtYmVyaW5nIiAlPiUKY2ZhKG1pc3NpbmcgPSAiZmltbCIsIGRhdGEgPSBpcSwgc3RkLmx2ID0gVCwgc3RkLm92ID0gVCkgLT4gY2ZhX2cKc3VtbWFyeShjZmFfZykKCmlxJGdfZmFjdG9yID0gcHJlZGljdChjZmFfZylbLDFdCnFwbG90KGlxJGdfZmFjdG9yKQpgYGAKCgojIyBQZXJzb25hbGl0eQpgYGB7ciBzZWxlY3QgcGVzb25hbGl0eSBkYXRhfQojIyMgUGVyc29uYWxpdHkKIyNSZWFycmFuZ2UgcGVyc29uYWxpdHkgZGF0YSBzbyB0aGF0IGV2ZXJ5IGluZGl2aWR1YWwgaGFzIG9ubHkgb25lIHJvdwpwZXJzID0gc3ByZWFkKGIzYl9wc24sIHBzbnR5cGUsIHBzbjAxKQojI25hbWUgY29sdW1ucwpjb2xuYW1lcyhwZXJzKSA8LSBjKCJoaGlkMTRfOSIsICJwaWQxNCIsICJoaGlkMTQiLCAicGlkbGluayIsICJ2ZXJzaW9uIiwgIm1vZHVsZSIsICJlMSIsICJjMSIsICJvMSIsICJlMnIiLCAibjFyIiwgImExIiwgIm4yciIsICJvMiIsICJjMnIiLCAibzMiLCAiYTIiLCAiYzMiLCAiZTMiLCAiYTNyIiwgIm4zIikKcGVycyA9IHBlcnMgJT4lIHNlbGVjdChoaGlkMTRfOSwgcGlkbGluaywgZTEsIGMxLCBvMSwgZTJyLCBuMXIsIGExLCBuMnIsIG8yLCBjMnIsIG8zLCBhMiwgYzMsIGUzLCBhM3IsIG4zKQoKIyNFeHRyYXZlcnNpb24KcGVycyRlMnJfcmV2ZXJzZWQgPSA2IC0gcGVycyRlMnIKZXh0cmF2ZXJzaW9uID0gcGVycyAlPiUgc2VsZWN0KGUxLCBlMnJfcmV2ZXJzZWQsIGUzKQpwc3ljaDo6YWxwaGEoZGF0YS5mcmFtZShleHRyYXZlcnNpb24pLCBjaGVjay5rZXlzID0gVCkKcGVycyRiaWc1X2V4dCA9IHJvd01lYW5zKGV4dHJhdmVyc2lvbikKcXBsb3QocGVycyRiaWc1X2V4dCkKCiMjY29uc2NpZW50aW91c25lc3MKcGVycyRjMnJfcmV2ZXJzZWQgPSA2IC0gcGVycyRjMnIKY29uc2NpZW50aW91c25lc3MgPSBwZXJzICU+JSBzZWxlY3QoYzEsIGMycl9yZXZlcnNlZCwgYzMpCnBzeWNoOjphbHBoYShkYXRhLmZyYW1lKGNvbnNjaWVudGlvdXNuZXNzKSwgY2hlY2sua2V5cyA9IFQpCnBlcnMkYmlnNV9jb24gPSByb3dNZWFucyhjb25zY2llbnRpb3VzbmVzcykKcXBsb3QocGVycyRiaWc1X2NvbikKCiMjT3Blbm5lc3MKb3Blbm5lc3MgPSBwZXJzICU+JSBzZWxlY3QobzEsIG8yLCBvMykKcHN5Y2g6OmFscGhhKGRhdGEuZnJhbWUob3Blbm5lc3MpLCBjaGVjay5rZXlzID0gVCkKcGVycyRiaWc1X29wZW4gPSByb3dNZWFucyhvcGVubmVzcykKcXBsb3QocGVycyRiaWc1X29wZW4pCgojIyBOZXVyb3RpY2lzbQpwZXJzJG4xcl9yZXZlcnNlZCA9IDYgLSBwZXJzJG4xcgpwZXJzJG4ycl9yZXZlcnNlZCA9IDYgLSBwZXJzJG4ycgpuZXVyb3RpY2lzbSA9IHBlcnMgJT4lIHNlbGVjdChuMXJfcmV2ZXJzZWQsIG4ycl9yZXZlcnNlZCwgbjMpCnBlcnMkYmlnNV9uZXUgPSByb3dNZWFucyhuZXVyb3RpY2lzbSkKcXBsb3QocGVycyRiaWc1X25ldSkKCiMjQWdyZWVhYmxlbmVzcwpwZXJzJGEzcl9yZXZlcnNlZCA9IDYtIHBlcnMkYTNyCmFncmVlYWJsZW5lc3M9IHBlcnMgJT4lIHNlbGVjdChhMSwgYTIsIGEzcl9yZXZlcnNlZCkKcGVycyRiaWc1X2FncmVlID0gcm93TWVhbnMoYWdyZWVhYmxlbmVzcykKcXBsb3QocGVycyRiaWc1X2FncmVlKQpgYGAKCgojIyBSaXNrIHByZWZlcmVuY2UKYGBge3Igc2VsZWN0IHJpc2sgdGFraW5nIGRhdGF9CiMjI1Jpc2t0YWtpbmcKcmlzayA9IGIzYV9zaSAlPiUgc2VsZWN0KGhoaWQxNF85LCBwaWRsaW5rLCByYW5kb21fc2ksIHNpMDEsIHNpMDIsIHNpMDMsIHNpMDQsIHNpMDUsIHNpMTEsIHNpMTIsIHNpMTMsIHNpMTQsIHNpMTUpCgojIyA4IG1lYW5zIHRoZXkgZGlkbnQga25vdyB3aGljaCBhbnN3ZXIgdGhleSB3b3VsZCBjaG9vc2UKcmlzayRzaTAxWyByaXNrJHNpMDEgPT0gOF0gPSBOQQpyaXNrJHNpMDJbIHJpc2skc2kwMiA9PSA4XSA9IE5BCnJpc2skc2kwM1sgcmlzayRzaTAzID09IDhdID0gTkEKcmlzayRzaTA0WyByaXNrJHNpMDQgPT0gOF0gPSBOQQpyaXNrJHNpMDVbIHJpc2skc2kwNSA9PSA4XSA9IE5BCnJpc2skc2kxMVsgcmlzayRzaTExID09IDhdID0gTkEKcmlzayRzaTEyWyByaXNrJHNpMTIgPT0gOF0gPSBOQQpyaXNrJHNpMTNbIHJpc2skc2kxMyA9PSA4XSA9IE5BCnJpc2skc2kxNFsgcmlzayRzaTE0ID09IDhdID0gTkEKcmlzayRzaTE1WyByaXNrJHNpMTUgPT0gOF0gPSBOQQoKIyMgY2FsY3VsYXRlIGEgcmlzayBzY29yZSBmb3IgcmlzayBnYW1lIEEgCiMgKDUgPSBnYW1ibGUgYXZlcnNlLCBPcmRpbmFsc2thbGEgOiAxID0gcmlzayBsb3ZpbmcsIDQgPSByaXNrIGF2ZXJzZSkKcmlzayRyaXNrQSA9IGlmZWxzZShyaXNrJHNpMDEgPT0gMSAmIHJpc2skc2kwMiA9PSAxLCA1LAogICAgICAgICAgICAgaWZlbHNlKHJpc2skc2kwMSA9PSAyICYgcmlzayRzaTAzID09IDEgJiByaXNrJHNpMDQgPT0gMSwgNCwKICAgICAgICAgICAgIGlmZWxzZShyaXNrJHNpMDEgPT0gMiAmIHJpc2skc2kwMyA9PSAxICYgcmlzayRzaTA0ID09IDIsIDMsCiAgICAgICAgICAgICBpZmVsc2UocmlzayRzaTAxID09IDIgJiByaXNrJHNpMDMgPT0gMiAmIHJpc2skc2kwNSA9PSAxLCAyLAogICAgICAgICAgICAgaWZlbHNlKHJpc2skc2kwMSA9PSAyICYgcmlzayRzaTAzID09IDIgJiByaXNrJHNpMDUgPT0gMiwgMSwKICAgICAgICAgICAgIE5BKSkpKSkKcXBsb3QocmlzayRyaXNrQVtyaXNrJHJpc2tBICE9IDVdKQoKIyMgY2FsY3VsYXRlIGEgcmlzayBzY29yZSBmb3IgcmlzayBnYW1lIEIgCiMgKDUgPSBnYW1ibGUgYXZlcnNlLCBPcmRpbmFsc2thbGEgOiAxID0gcmlzayBsb3ZpbmcsIDQgPSByaXNrIGF2ZXJzZSkKcmlzayRyaXNrQiA9IGlmZWxzZShyaXNrJHNpMTEgPT0gMiAmIHJpc2skc2kxMiA9PSAxLCA1LAogICAgICAgICAgICAgaWZlbHNlKHJpc2skc2kxMSA9PSAxICYgcmlzayRzaTEzID09IDEgJiByaXNrJHNpMTQgPT0gMSwgNCwKICAgICAgICAgICAgIGlmZWxzZShyaXNrJHNpMTEgPT0gMSAmIHJpc2skc2kxMyA9PSAxICYgcmlzayRzaTE0ID09IDIsIDMsCiAgICAgICAgICAgICBpZmVsc2UocmlzayRzaTExID09IDEgJiByaXNrJHNpMTMgPT0gMiAmIHJpc2skc2kxNSA9PSAxLCAyLAogICAgICAgICAgICAgaWZlbHNlKHJpc2skc2kxMSA9PSAxICYgcmlzayRzaTEzID09IDIgJiByaXNrJHNpMTUgPT0gMiwgMSwKICAgICAgICAgICAgIE5BKSkpKSkKcXBsb3QocmlzayRyaXNrQltyaXNrJHJpc2tCICE9NV0pCgpwc3ljaDo6YWxwaGEoZGF0YS5mcmFtZShyaXNrICU+JSBzZWxlY3Qocmlza0EsIHJpc2tCKSksIGNoZWNrLmtleXMgPSBUKQoKCmBgYAoKIyMgRWR1Y2F0aW9uYWwgQXR0YWlubWVudApgYGB7ciBzZWxlY3QgZWR1Y2F0aW9uYWwgYXR0YWlubWVudCBkYXRhfQojIFNlbGVjdCwgcmVuYW1lIGFuZCBtdXRhdGUgZGF0YQplYSA9IGIzYV9kbDEgJT4lCiAgc2VsZWN0KHBpZGxpbmssIGRsMDQsIGRsMDYsIGRsMDcsIGRsMDdhLCBkbDA3YWEpICU+JQogIHJlbmFtZShwaWRsaW5rID0gcGlkbGluaywgYXR0ZW5kZWRfc2Nob29sID0gZGwwNCwgaGlnaGVzdF9lZHVjYXRpb24gPSBkbDA2LAogICAgICAgICBoaWdoZXN0X2dyYWRlPWRsMDcsIGN1cnJlbnRseV9hdHRlbmRpbmdfc2Nob29sID0gZGwwN2EsIGhvdXJzX2luX2NsYXNzID0gZGwwN2FhKSAlPiUKICBtdXRhdGUoYXR0ZW5kZWRfc2Nob29sID0gYXMuZmFjdG9yKGlmZWxzZShhdHRlbmRlZF9zY2hvb2wgPT0gOCwgTkEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGF0dGVuZGVkX3NjaG9vbCA9PSAxLCAieWVzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGF0dGVuZGVkX3NjaG9vbCA9PSAzLCAibm8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW5kZWRfc2Nob29sKSkpKSwKICAgICAgICAgaGlnaGVzdF9lZHVjYXRpb24gPSBhcy5mYWN0b3IoaWZlbHNlKGhpZ2hlc3RfZWR1Y2F0aW9uID09IDIgfCBoaWdoZXN0X2VkdWNhdGlvbiA9PSA3MiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRWxlbWVudGFyeSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGhpZ2hlc3RfZWR1Y2F0aW9uID09IDMgfAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hlc3RfZWR1Y2F0aW9uID09IDQgfAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hlc3RfZWR1Y2F0aW9uID09IDczLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSnVuaW9yIEhpZ2giLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoaGlnaGVzdF9lZHVjYXRpb24gPT0gNSB8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hlc3RfZWR1Y2F0aW9uID09IDYgfAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdoZXN0X2VkdWNhdGlvbiA9PSA3NCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTZW5pb3IgSGlnaCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoaGlnaGVzdF9lZHVjYXRpb24gPT0gNjAgfAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGVzdF9lZHVjYXRpb24gPT0gNjEgfAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGVzdF9lZHVjYXRpb24gPT0gNjIgfAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGVzdF9lZHVjYXRpb24gPT0gNjMgfAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGVzdF9lZHVjYXRpb24gPT0gMTMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlVuaXZlcnNpdHkiLCBOQSkpKSkpLCMib3RoZXIiID0gTkEKICAgICAgICAgaGlnaGVzdF9ncmFkZSA9IGlmZWxzZShoaWdoZXN0X2dyYWRlID09IDk4LCBOQSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoaGlnaGVzdF9ncmFkZSA9PSA5OSwgTkEsIGhpZ2hlc3RfZ3JhZGUpKSwKICAgICAgICAgY3VycmVudGx5X2F0dGVuZGluZ19zY2hvb2wgPSBhcy5mYWN0b3IoaWZlbHNlKGN1cnJlbnRseV9hdHRlbmRpbmdfc2Nob29sID09IDEsICJ5ZXMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGN1cnJlbnRseV9hdHRlbmRpbmdfc2Nob29sID09IDMsICJubyIsIE5BKSkpLAogICAgICAgICBob3Vyc19pbl9jbGFzcyA9IGlmZWxzZShob3Vyc19pbl9jbGFzcyA9PSA5OSwgTkEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShob3Vyc19pbl9jbGFzcyA9PSA5OCwgTkEsIGhvdXJzX2luX2NsYXNzKSkpCgojIyBDcmVhdGUgdmFyaWFibGUgdGhhdCBpbmNsdWRlcyB5ZWFycyBvZiBlZHVjYXRpb24gKGhpZ2hlc3RfZWR1Y2F0aW9uLmhpZ2hlc3RfZ3JhZGUpIGFzIGEgbnVtZXJpYyB2YXJpYWJsZQplYSA9IGVhICU+JQogIG11dGF0ZSh5ZWFyc19vZl9lZHVjYXRpb25fZmFjdG9yID0gYXMuZmFjdG9yKHN0cl9jKGhpZ2hlc3RfZWR1Y2F0aW9uLCAiLiIsIGhpZ2hlc3RfZ3JhZGUpKSwKICAgICAgICAgeWVhcnNfb2ZfZWR1Y2F0aW9uID0gYXMubnVtZXJpYyhpZmVsc2UoYXR0ZW5kZWRfc2Nob29sID09ICJubyIsIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKHllYXJzX29mX2VkdWNhdGlvbl9mYWN0b3IgPT0gIkVsZW1lbnRhcnkuMCIsIDAuNSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoeWVhcnNfb2ZfZWR1Y2F0aW9uX2ZhY3RvciA9PSAiRWxlbWVudGFyeS4xIiwgMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoeWVhcnNfb2ZfZWR1Y2F0aW9uX2ZhY3RvciA9PSAiRWxlbWVudGFyeS4yIiwgMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoeWVhcnNfb2ZfZWR1Y2F0aW9uX2ZhY3RvciA9PSAiRWxlbWVudGFyeS4zIiwgMywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoeWVhcnNfb2ZfZWR1Y2F0aW9uX2ZhY3RvciA9PSAiRWxlbWVudGFyeS40IiwgNCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoeWVhcnNfb2ZfZWR1Y2F0aW9uX2ZhY3RvciA9PSAiRWxlbWVudGFyeS41IiwgNSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoeWVhcnNfb2ZfZWR1Y2F0aW9uX2ZhY3RvciA9PSAiRWxlbWVudGFyeS42IiwgTkEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKHllYXJzX29mX2VkdWNhdGlvbl9mYWN0b3IgPT0gIkVsZW1lbnRhcnkuNyIsIDYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKHllYXJzX29mX2VkdWNhdGlvbl9mYWN0b3IgPT0gIkp1bmlvciBIaWdoLjAiLCA2LjUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKHllYXJzX29mX2VkdWNhdGlvbl9mYWN0b3IgPT0gIkp1bmlvciBIaWdoLjEiLCA3LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZSh5ZWFyc19vZl9lZHVjYXRpb25fZmFjdG9yID09ICJKdW5pb3IgSGlnaC4yIiwgOCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoeWVhcnNfb2ZfZWR1Y2F0aW9uX2ZhY3RvciA9PSAiSnVuaW9yIEhpZ2guMyIsIE5BLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZSh5ZWFyc19vZl9lZHVjYXRpb25fZmFjdG9yID09ICJKdW5pb3IgSGlnaC43IiwgOSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoeWVhcnNfb2ZfZWR1Y2F0aW9uX2ZhY3RvciA9PSAiU2VuaW9yIEhpZ2guMCIsIDkuNSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoeWVhcnNfb2ZfZWR1Y2F0aW9uX2ZhY3RvciA9PSAiU2VuaW9yIEhpZ2guMSIsIDEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZSh5ZWFyc19vZl9lZHVjYXRpb25fZmFjdG9yID09ICJTZW5pb3IgSGlnaC4yIiwgMTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKHllYXJzX29mX2VkdWNhdGlvbl9mYWN0b3IgPT0gIlNlbmlvciBIaWdoLjMiLCBOQSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoeWVhcnNfb2ZfZWR1Y2F0aW9uX2ZhY3RvciA9PSAiU2VuaW9yIEhpZ2guNyIsIDEyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZSh5ZWFyc19vZl9lZHVjYXRpb25fZmFjdG9yID09ICJVbml2ZXJzaXR5LjAiLCAxMi41LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZSh5ZWFyc19vZl9lZHVjYXRpb25fZmFjdG9yID09ICJVbml2ZXJzaXR5LjEiLCAxMywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoeWVhcnNfb2ZfZWR1Y2F0aW9uX2ZhY3RvciA9PSAiVW5pdmVyc2l0eS4yIiwgMTQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKHllYXJzX29mX2VkdWNhdGlvbl9mYWN0b3IgPT0gIlVuaXZlcnNpdHkuMyIsIDE1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZSh5ZWFyc19vZl9lZHVjYXRpb25fZmFjdG9yID09ICJVbml2ZXJzaXR5LjQiLCAxNiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoeWVhcnNfb2ZfZWR1Y2F0aW9uX2ZhY3RvciA9PSAiVW5pdmVyc2l0eS41IiwgMTcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKHllYXJzX29mX2VkdWNhdGlvbl9mYWN0b3IgPT0gIlVuaXZlcnNpdHkuNiIsIE5BLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZSh5ZWFyc19vZl9lZHVjYXRpb25fZmFjdG9yID09ICJVbml2ZXJzaXR5LjciLCAxOCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTkEpKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSkpKQpxcGxvdChlYSR5ZWFyc19vZl9lZHVjYXRpb24pCmBgYAoKIyMgRUJUQU5BUy9VQU4vVU4gU2NvcmUKYGBge3IgRUJUQU5BUy9VQU4vVU4gU2NvcmV9CkVCVEFOQVNfbG9uZyA9IGIzYV9kbDMgJT4lCiAgc2VsZWN0KHBpZGxpbmssICJMZXZlbF9vZl9zY2hvb2xpbmciID0gZGwzdHlwZSwgIlR5cGVfb2ZfdGVzdCIgPSBkbDE2YzEsICJJbmRvbmVzaWFfc2NvcmUiID0gZGwxNmRiLAogICAgICAgICAiRW5nbGlzaF9zY29yZSIgPSBkbDE2ZGMsICJNYXRoX3Njb3JlIiA9IGRsMTZkZCwgIlRvdGFsX3Njb3JlIiA9IGRsMTZlKSAlPiUKICBtdXRhdGUoTGV2ZWxfb2Zfc2Nob29saW5nID0gaWZlbHNlKExldmVsX29mX3NjaG9vbGluZyA9PSAxLCAiRWxlbWVudGFyeSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoTGV2ZWxfb2Zfc2Nob29saW5nID09IDIsICJKdW5pb3IgSGlnaCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKExldmVsX29mX3NjaG9vbGluZyA9PSAzLCAiU2VuaW9yIEhpZ2giLCBOQSkpKSwKICAgICAgICAgVHlwZV9vZl90ZXN0ID0gaWZlbHNlKFR5cGVfb2ZfdGVzdCA9PSAxLCAiRUJUQU5BUyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoVHlwZV9vZl90ZXN0ID09IDIsICJVQU4vVU4iLCBOQSkpKSAlPiUKICBmaWx0ZXIoIWlzLm5hKEluZG9uZXNpYV9zY29yZSkgfCAhaXMubmEoRW5nbGlzaF9zY29yZSkgfCAhaXMubmEoTWF0aF9zY29yZSkgfCAhaXMubmEoVG90YWxfc2NvcmUpKQogICMgcmVtb3ZlIHBlb3BsZSB3aXRoIG5vIEVCVEFOQVMgSW5mb3JtYXRpb24KCiNXcmFuZ2xlIERhdGEKRUJUQU5BU19FbGVtZW5hdHJ5ID0gRUJUQU5BU19sb25nICU+JQogIGZpbHRlcihMZXZlbF9vZl9zY2hvb2xpbmcgPT0gIkVsZW1lbnRhcnkiKSAlPiUKICByZW5hbWUoIkluZG9uZXNpYV9zY29yZV9lbGVtZW50YXJ5IiA9IEluZG9uZXNpYV9zY29yZSwgIkVuZ2xpc2hfc2NvcmVfZWxlbWVudGFyeSIgPSBFbmdsaXNoX3Njb3JlLAogICAgICAgICAiTWF0aF9zY29yZV9lbGVtZW5hdHJ5IiA9IE1hdGhfc2NvcmUsICJUb3RhbF9zY29yZV9lbGVtZW5hdHJ5IiA9IFRvdGFsX3Njb3JlLAogICAgICAgICAiVHlwZV9vZl90ZXN0X2VsZW1lbnRhcnkiID0gVHlwZV9vZl90ZXN0KSAlPiUKICBzZWxlY3QoLUxldmVsX29mX3NjaG9vbGluZykKCkVCVEFOQVNfSnVuaW9yX0hpZ2ggPSBFQlRBTkFTX2xvbmcgJT4lCiAgZmlsdGVyKExldmVsX29mX3NjaG9vbGluZyA9PSAiSnVuaW9yIEhpZ2giKSAlPiUKICByZW5hbWUoIkluZG9uZXNpYV9zY29yZV9KdW5pb3JfSGlnaCIgPSBJbmRvbmVzaWFfc2NvcmUsICJFbmdsaXNoX3Njb3JlX0p1bmlvcl9IaWdoIiA9IEVuZ2xpc2hfc2NvcmUsCiAgICAgICAgICJNYXRoX3Njb3JlX0p1bmlvcl9IaWdoIiA9IE1hdGhfc2NvcmUsICJUb3RhbF9zY29yZV9KdW5pb3JfSGlnaCIgPSBUb3RhbF9zY29yZSwKICAgICAgICAgIlR5cGVfb2ZfdGVzdF9KdW5pb3JfSGlnaCIgPSBUeXBlX29mX3Rlc3QpJT4lCiAgc2VsZWN0KC1MZXZlbF9vZl9zY2hvb2xpbmcpCgpFQlRBTkFTX1Nlbmlvcl9IaWdoID0gRUJUQU5BU19sb25nICU+JQogIGZpbHRlcihMZXZlbF9vZl9zY2hvb2xpbmcgPT0gIlNlbmlvciBIaWdoIikgJT4lCiAgcmVuYW1lKCJJbmRvbmVzaWFfc2NvcmVfU2VuaW9yX0hpZ2giID0gSW5kb25lc2lhX3Njb3JlLCAiRW5nbGlzaF9zY29yZV9TZW5pb3JfSGlnaCIgPSBFbmdsaXNoX3Njb3JlLAogICAgICAgICAiTWF0aF9zY29yZV9TZW5pb3JfSGlnaCIgPSBNYXRoX3Njb3JlLCAiVG90YWxfc2NvcmVfU2VuaW9yX0hpZ2giID0gVG90YWxfc2NvcmUsCiAgICAgICAgICJUeXBlX29mX3Rlc3RfU2VuaW9yX0hpZ2giID0gVHlwZV9vZl90ZXN0KSU+JQogIHNlbGVjdCgtTGV2ZWxfb2Zfc2Nob29saW5nKQoKRUJUQU5BUyA9IGZ1bGxfam9pbihFQlRBTkFTX0VsZW1lbmF0cnksIEVCVEFOQVNfSnVuaW9yX0hpZ2gsIGJ5ID0gInBpZGxpbmsiKQpFQlRBTkFTID0gZnVsbF9qb2luKEVCVEFOQVMsIEVCVEFOQVNfU2VuaW9yX0hpZ2gsIGJ5ID0gInBpZGxpbmsiKSAKCnRhYmxlKGlzLm5hKEVCVEFOQVMkVG90YWxfc2NvcmVfZWxlbWVuYXRyeSkpCnRhYmxlKGlzLm5hKEVCVEFOQVMkVG90YWxfc2NvcmVfSnVuaW9yX0hpZ2gpKQp0YWJsZShpcy5uYShFQlRBTkFTJFRvdGFsX3Njb3JlX1Nlbmlvcl9IaWdoKSkKCkVCVEFOQVMgPSBFQlRBTkFTICU+JQogIG11dGF0ZShUb3RhbF9zY29yZV9oaWdoZXN0ID0gVG90YWxfc2NvcmVfZWxlbWVuYXRyeSwKICAgICAgICAgVG90YWxfc2NvcmVfaGlnaGVzdCA9IGlmZWxzZSghaXMubmEoVG90YWxfc2NvcmVfU2VuaW9yX0hpZ2gpLCBUb3RhbF9zY29yZV9TZW5pb3JfSGlnaCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoIWlzLm5hKFRvdGFsX3Njb3JlX0p1bmlvcl9IaWdoKSwgVG90YWxfc2NvcmVfSnVuaW9yX0hpZ2gsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRvdGFsX3Njb3JlX2hpZ2hlc3QpKSwKICAgICAgICAgVG90YWxfc2NvcmVfaGlnaGVzdF90eXBlID0gaWZlbHNlKCFpcy5uYShUb3RhbF9zY29yZV9TZW5pb3JfSGlnaCksICJTZW5pb3IgSGlnaCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKCFpcy5uYShUb3RhbF9zY29yZV9KdW5pb3JfSGlnaCksICJKdW5pb3IgSGlnaCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZSghaXMubmEoVG90YWxfc2NvcmVfZWxlbWVuYXRyeSksICJFbGVtZW50YXJ5IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOQSkpKSwKICAgICAgICAgTWF0aF9zY29yZV9oaWdoZXN0ID0gTWF0aF9zY29yZV9lbGVtZW5hdHJ5LAogICAgICAgICBNYXRoX3Njb3JlX2hpZ2hlc3QgPSBpZmVsc2UoIWlzLm5hKE1hdGhfc2NvcmVfU2VuaW9yX0hpZ2gpLCBNYXRoX3Njb3JlX1Nlbmlvcl9IaWdoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZSghaXMubmEoTWF0aF9zY29yZV9KdW5pb3JfSGlnaCksIE1hdGhfc2NvcmVfSnVuaW9yX0hpZ2gsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGhfc2NvcmVfaGlnaGVzdCkpLAogICAgICAgICBNYXRoX3Njb3JlX2hpZ2hlc3RfdHlwZSA9IGlmZWxzZSghaXMubmEoTWF0aF9zY29yZV9TZW5pb3JfSGlnaCksICJTZW5pb3IgSGlnaCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKCFpcy5uYShNYXRoX3Njb3JlX0p1bmlvcl9IaWdoKSwgIkp1bmlvciBIaWdoIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKCFpcy5uYShNYXRoX3Njb3JlX2VsZW1lbmF0cnkpLCAiRWxlbWVudGFyeSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTkEpKSkpCnRhYmxlKGlzLm5hKEVCVEFOQVMkVG90YWxfc2NvcmVfaGlnaGVzdCkpCnRhYmxlKGlzLm5hKEVCVEFOQVMkTWF0aF9zY29yZV9oaWdoZXN0KSkKdGFibGUoRUJUQU5BUyRUb3RhbF9zY29yZV9oaWdoZXN0X3R5cGUpCnRhYmxlKEVCVEFOQVMkTWF0aF9zY29yZV9oaWdoZXN0X3R5cGUpCgpxcGxvdChFQlRBTkFTJFRvdGFsX3Njb3JlX2hpZ2hlc3QpCnFwbG90KEVCVEFOQVMkTWF0aF9zY29yZV9oaWdoZXN0KQoKIyMgV29ya2luZyB3aGlsZSBzdGlsbCBpbiBzY2hvb2wKY2hpbGRfbGFib3VyID0gYjNhX2RsNCAlPiUKICBzZWxlY3QocGlkbGluaywgIkxldmVsX29mX3NjaG9vbGluZyIgPSBkbDR0eXBlLCAiV29ya2VkIiA9IGRsMTUsICJNaXNzZWRfc2Nob29sIiA9IGRsMTRhKSAlPiUKICBtdXRhdGUoTGV2ZWxfb2Zfc2Nob29saW5nID0gaWZlbHNlKExldmVsX29mX3NjaG9vbGluZyA9PSAxLCAiRWxlbWVudGFyeSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoTGV2ZWxfb2Zfc2Nob29saW5nID09IDIsICJKdW5pb3JIaWdoIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoTGV2ZWxfb2Zfc2Nob29saW5nID09IDMsICJTZW5pb3JIaWdoIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKExldmVsX29mX3NjaG9vbGluZyA9PSA0LCAiVW5pdmVyc2l0eSIsIE5BKSkpKSwKICAgICAgICAgV29ya2VkID0gaWZlbHNlKFdvcmtlZCA9PSAxLCAxLAogICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKFdvcmtlZCA9PSAzLCAwLCBOQSkpLAogICAgICAgICBNaXNzZWRfc2Nob29sID0gaWZlbHNlKE1pc3NlZF9zY2hvb2wgPT0gMSwgMSwKICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShNaXNzZWRfc2Nob29sID09IDMsIDAsIE5BKSkpCgojIFdyYW5nbGUgRGF0YQpjaGlsZF9sYWJvdXJfd29yayA9IGNoaWxkX2xhYm91ciAlPiUKICBzZWxlY3QocGlkbGluaywgTGV2ZWxfb2Zfc2Nob29saW5nLCBXb3JrZWQpICU+JQogIHNwcmVhZCguLCBMZXZlbF9vZl9zY2hvb2xpbmcsIFdvcmtlZCkgJT4lCiAgcmVuYW1lKCJFbGVtZW50YXJ5X3dvcmtlZCIgPSBFbGVtZW50YXJ5LCAiSnVuaW9yX2hpZ2hfd29ya2VkIiA9IEp1bmlvckhpZ2gsIAogICAgICAgICAiU2VuaW9yX2hpZ2hfd29ya2VkIiA9IFNlbmlvckhpZ2gsICJVbml2ZXJzaXR5X3dvcmtlZCIgPSBVbml2ZXJzaXR5KSAlPiUKICBtdXRhdGUodG90YWxfd29ya2VkID0gaWZlbHNlKEVsZW1lbnRhcnlfd29ya2VkID09IDEgfCBKdW5pb3JfaGlnaF93b3JrZWQgPT0gMSB8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlbmlvcl9oaWdoX3dvcmtlZCA9PSAxIHwgVW5pdmVyc2l0eV93b3JrZWQgPT0gMSwgMSwgMCksCiAgICAgICAgIHRvdGFsX3dvcmtlZCAgPSBpZmVsc2UoaXMubmEodG90YWxfd29ya2VkKSwgMCwgdG90YWxfd29ya2VkKSkKCmNoaWxkX2xhYm91cl9taXNzZWQgPSBjaGlsZF9sYWJvdXIgJT4lCiAgc2VsZWN0KHBpZGxpbmssIExldmVsX29mX3NjaG9vbGluZywgTWlzc2VkX3NjaG9vbCkgJT4lCiAgc3ByZWFkKC4sIExldmVsX29mX3NjaG9vbGluZywgTWlzc2VkX3NjaG9vbCkgJT4lCiAgcmVuYW1lKCJFbGVtZW50YXJ5X21pc3NlZCIgPSBFbGVtZW50YXJ5LCAiSnVuaW9yX2hpZ2hfbWlzc2VkIiA9IEp1bmlvckhpZ2gsIAogICAgICAgICAiU2VuaW9yX2hpZ2hfbWlzc2VkIiA9IFNlbmlvckhpZ2gsICJVbml2ZXJzaXR5X21pc3NlZCIgPSBVbml2ZXJzaXR5KSAlPiUKICBtdXRhdGUodG90YWxfbWlzc2VkID0gaWZlbHNlKEVsZW1lbnRhcnlfbWlzc2VkID09IDEgfCBKdW5pb3JfaGlnaF9taXNzZWQgPT0gMSB8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlbmlvcl9oaWdoX21pc3NlZCA9PSAxIHwgVW5pdmVyc2l0eV9taXNzZWQgPT0gMSwgMSwgMCkpCgpjaGlsZF9sYWJvdXIgPSBmdWxsX2pvaW4oY2hpbGRfbGFib3VyX3dvcmssIGNoaWxkX2xhYm91cl9taXNzZWQsIGJ5ID0gInBpZGxpbmsiKQp0YWJsZShjaGlsZF9sYWJvdXIkdG90YWxfbWlzc2VkKQp0YWJsZShjaGlsZF9sYWJvdXIkdG90YWxfd29ya2VkKQpgYGAgCgojIyBKb2IgSW5mb3JtYXRpb24KYGBge3J9CmpvYiA9IGIzYV90azIgJT4lIHNlbGVjdChwaWRsaW5rLCAiQ2F0ZWdvcnkiID0gdGsyNGEsICJTZWN0b3IiID0gdGsxOWFiLCAid2FnZV9sYXN0X21vbnRoIiA9IHRrMjVhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICJ3YWdlX2xhc3RfeWVhciIgPSB0azI1YTIpICU+JQogIG11dGF0ZShDYXRlZ29yeSA9IGlmZWxzZShDYXRlZ29yeSA9PSAxIHwgQ2F0ZWdvcnkgPT0gMiB8IENhdGVnb3J5ID09IDMsICJTZWxmLWVtcGxveWVkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKENhdGVnb3J5ID09IDQsICJHb3Zlcm5tZW50IHdvcmtlciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoQ2F0ZWdvcnkgPT0gNSwgIlByaXZhdGUgd29ya2VyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoQ2F0ZWdvcnkgPT0gNywgIkNhc3VhbCB3b3JrZXIgaW4gYWdyaWN1bHR1cmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoQ2F0ZWdvcnkgPT0gOCwgIkNhc3VhbCB3b3JrZXIgbm90IGluIGFncmljdWx0dXJlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShDYXRlZ29yeSA9PSA2LCAiVW5wYWlkIGZhbWlseSB3b3JrZXIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5BKSkpKSkpLAogICAgICAgICBTZWxmX2VtcGxveWVkID0gaWZlbHNlKENhdGVnb3J5ID09ICJTZWxmLWVtcGxveWVkIiwgMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoaXMubmEoQ2F0ZWdvcnkpLCBOQSwgMCkpLAogICAgICAgICBTZWN0b3IgPSBpZmVsc2UoU2VjdG9yID09IDEsICJBZ3JpY3VsdHVyZSwgZm9yZXN0cnksIGZpc2hpbmcgYW5kIGh1bnRpbmciLAogICAgICAgICAgICAgICAgICBpZmVsc2UoU2VjdG9yID09IDIsICJNaW5pbmcgYW5kIHF1YXJyeWluZyIsCiAgICAgICAgICAgICAgICAgIGlmZWxzZShTZWN0b3IgPT0gMywgIk1hbnVmYWN0dXJpbmciLAogICAgICAgICAgICAgICAgICBpZmVsc2UoU2VjdG9yID09IDQsICJFbGVjdHJpY2l0eSwgZ2FzLCB3YXRlciIsCiAgICAgICAgICAgICAgICAgIGlmZWxzZShTZWN0b3IgPT0gNSwgIkNvbnN0cnVjdGlvbiIsCiAgICAgICAgICAgICAgICAgIGlmZWxzZShTZWN0b3IgPT0gNiwgIldob2xlc2FsZSwgcmV0YWlsLCByZXN0YXVyYW50cyBhbmQgaG90ZWxzIiwKICAgICAgICAgICAgICAgICAgaWZlbHNlKFNlY3RvciA9PSA3LCAiVHJhbnNwb3J0YXRpb24sIHN0b3JhZ2UgYW5kIGNvbW11bmljYXRpb25zIiwKICAgICAgICAgICAgICAgICAgaWZlbHNlKFNlY3RvciA9PSA4LCAiRmluYW5jZSwgaW5zdXJhbmNlLCByZWFsIGVzdGF0ZSBhbmQgYnVzaW5lc3Mgc2VydmljZXMiLAogICAgICAgICAgICAgICAgICBpZmVsc2UoU2VjdG9yID09IDksICJTb2NpYWwgc2VydmljZXMiLAogICAgICAgICAgICAgICAgICBpZmVsc2UoU2VjdG9yID09IDEwLCAiQWN0aXZpdGllcyB0aGF0IGNhbm5vdCBiZSBjbGFzc2lmaWVkIiwgTkEpKSkpKSkpKSkpLAogICAgICAgICB3YWdlX2xhc3RfbW9udGggPSBpZmVsc2Uod2FnZV9sYXN0X21vbnRoID09IDgsIE5BLCB3YWdlX2xhc3RfbW9udGgpLAogICAgICAgICB3YWdlX2xhc3RfeWVhciA9IGlmZWxzZSh3YWdlX2xhc3RfeWVhciA9PSA4LCBOQSwgd2FnZV9sYXN0X3llYXIpKQoKdGFibGUoam9iJENhdGVnb3J5KQp0YWJsZShqb2IkU2VjdG9yKQpxcGxvdChqb2Ikd2FnZV9sYXN0X21vbnRoKQpzdW1tYXJ5KGpvYiR3YWdlX2xhc3RfbW9udGgpCnggPSBqb2IgJT4lIGZpbHRlcih3YWdlX2xhc3RfbW9udGggPCA1MDAwMDAwKQpxcGxvdCh4JHdhZ2VfbGFzdF9tb250aCkKCnFwbG90KGpvYiR3YWdlX2xhc3RfeWVhcikKc3VtbWFyeShqb2Ikd2FnZV9sYXN0X3llYXIpCnggPSBqb2IgJT4lIGZpbHRlcih3YWdlX2xhc3RfeWVhciA8IDUwMDAwMDAwKQpxcGxvdCh4JHdhZ2VfbGFzdF95ZWFyKQpgYGAKCiMjIEhlYWx0aCBJbmZvcm1hdGlvbiAtIFNtb2tpbmcgQmVoYXZpb3IKYGBge3J9CnNtb2tpbmcgPSBiM2Jfa20gJT4lCiAgc2VsZWN0KHBpZGxpbmssICJldmVyX3Ntb2tlZCIgPSBrbTAxYSwgInN0aWxsX3Ntb2tpbmciID0ga20wNCwgImFtb3VudCIgPSBrbTA4LAogICAgICAgICAibW9uZXlfc3BlbnRfc21va2luZyIgPSBrbTA5LCAiYWdlX2ZpcnN0X3Ntb2tlIiA9IGttMTApICU+JQogIG11dGF0ZShldmVyX3Ntb2tlZCA9IGlmZWxzZShldmVyX3Ntb2tlZCA9PSAxLCAxLCAwKSwKICAgICAgICAgc3RpbGxfc21va2luZyA9IGlmZWxzZShzdGlsbF9zbW9raW5nID09IDEsIDEsIDApLAogICAgICAgICBhbW91bnQgPSBpZmVsc2UoYW1vdW50ID09IDgsIE5BLAogICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFtb3VudCA9PSA5OCwgTkEsIGFtb3VudCkpLAogICAgICAgICBhbW91bnRfc3RpbGxfc21va2VycyA9IGlmZWxzZShzdGlsbF9zbW9raW5nID09IDEsIGFtb3VudCwgTkEpKQpgYGAKCiMjIE1lcmdlIGRhdGEKCmBgYHtyIG1lcmdlIGRhdGF9CiMjIyBNZXJnZSBhbGwgZGF0YSBmb3IgcGVvcGxlIHdpdGggYmlydGhvcmRlciBpbmZvcm1hdGlvbnMKYWxsZGF0YV9iaXJ0aG9yZGVyID0gbGVmdF9qb2luKGFsbGRhdGFfcHJlZ25hbmN5LCBpcSwgYnkgPSAicGlkbGluayIpCmFsbGRhdGFfYmlydGhvcmRlciA9IGxlZnRfam9pbihhbGxkYXRhX2JpcnRob3JkZXIsIHBlcnMsIGJ5ID0gInBpZGxpbmsiKQphbGxkYXRhX2JpcnRob3JkZXIgPSBsZWZ0X2pvaW4oYWxsZGF0YV9iaXJ0aG9yZGVyLCByaXNrLCBieSA9ICJwaWRsaW5rIikKYWxsZGF0YV9iaXJ0aG9yZGVyID0gbGVmdF9qb2luKGFsbGRhdGFfYmlydGhvcmRlciwgZWEsIGJ5ID0gInBpZGxpbmsiKQphbGxkYXRhX2JpcnRob3JkZXIgPSBsZWZ0X2pvaW4oYWxsZGF0YV9iaXJ0aG9yZGVyLCBFQlRBTkFTLCBieSA9ICJwaWRsaW5rIikKYWxsZGF0YV9iaXJ0aG9yZGVyID0gbGVmdF9qb2luKGFsbGRhdGFfYmlydGhvcmRlciwgY2hpbGRfbGFib3VyLCBieSA9ICJwaWRsaW5rIikKYWxsZGF0YV9iaXJ0aG9yZGVyID0gbGVmdF9qb2luKGFsbGRhdGFfYmlydGhvcmRlciwgam9iLCBieSA9ICJwaWRsaW5rIikKYWxsZGF0YV9iaXJ0aG9yZGVyID0gbGVmdF9qb2luKGFsbGRhdGFfYmlydGhvcmRlciwgc21va2luZywgYnkgPSAicGlkbGluayIpCgoKYWxsZGF0YSA9IGxlZnRfam9pbihpbmRpdmlkdWFsc191bmNoYW5nZWQsIGlxLCBieSA9ICJwaWRsaW5rIikKYWxsZGF0YSA9IGxlZnRfam9pbihhbGxkYXRhLCBwZXJzLCBieSA9ICJwaWRsaW5rIikKYWxsZGF0YSA9IGxlZnRfam9pbihhbGxkYXRhLCByaXNrLCBieSA9ICJwaWRsaW5rIikKYWxsZGF0YSA9IGxlZnRfam9pbihhbGxkYXRhLCBlYSwgYnkgPSAicGlkbGluayIpCmFsbGRhdGEgPSBsZWZ0X2pvaW4oYWxsZGF0YSwgRUJUQU5BUywgYnkgPSAicGlkbGluayIpCmFsbGRhdGEgPSBsZWZ0X2pvaW4oYWxsZGF0YSwgY2hpbGRfbGFib3VyLCBieSA9ICJwaWRsaW5rIikKYWxsZGF0YSA9IGxlZnRfam9pbihhbGxkYXRhLCBqb2IsIGJ5ID0gInBpZGxpbmsiKQphbGxkYXRhID0gbGVmdF9qb2luKGFsbGRhdGEsIHNtb2tpbmcsIGJ5ID0gInBpZGxpbmsiKQoKYGBgCgojIyBTYXZlIGRhdGEKCmZvciBmdXR1cmUgYW5hbHlzZXMKCmBgYHtyIHNhdmUgZGF0YX0KYWxsZGF0YV9iaXJ0aG9yZGVyID0gYWxsZGF0YV9iaXJ0aG9yZGVyICU+JSB1bmdyb3VwKCkKYWxsZGF0YSA9IGFsbGRhdGEgJT4lIHVuZ3JvdXAoKQpwcmVnbmFuY3kgPSBwcmVnbmFuY3kgJT4lIHVuZ3JvdXAoKQppcSA9IGlxICU+JSB1bmdyb3VwKCkKaGRhdGFzZXQgPSBhbGxkYXRhX2JpcnRob3JkZXIKCnNhdmVSRFMoaGRhdGFzZXQsIGZpbGUgPSAiZGF0YS9oZGF0YXNldC5yZHMiKQpzYXZlUkRTKGFsbGRhdGFfYmlydGhvcmRlciwgZmlsZSA9ICJkYXRhL2FsbGRhdGFfYmlydGhvcmRlci5yZHMiKQpzYXZlUkRTKGFsbGRhdGEsIGZpbGUgPSAiZGF0YS9hbGxkYXRhLnJkcyIpCnNhdmVSRFMocHJlZ25hbmN5LCBmaWxlID0gImRhdGEvcHJlZ25hbmN5LnJkcyIpCnNhdmVSRFMoaXEsIGZpbGUgPSAiZGF0YS9pcS5yZHMiKQpgYGAK</div>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
